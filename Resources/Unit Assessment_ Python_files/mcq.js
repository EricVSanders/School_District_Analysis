(window.LearnosityAmd=window.LearnosityAmd||[]).push([[66],{335:function(e,t,n){"use strict";var o=n(0),r=n.n(o),i=n(35),a=n(10);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,o=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=["exactMatch","partialMatch","partialMatchV2"],l=function isEmptyValidResponse(e){var t=r.a.getNested(e,"valid_response.value");return r.a.isEmpty(t)},c=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(McqScorer,e);var t=_createSuper(McqScorer);function McqScorer(){return _classCallCheck(this,McqScorer),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(McqScorer,[{key:"getScoringData",value:function getScoringData(){return JSON.parse(JSON.stringify(this.scoringData))}},{key:"reset",value:function reset(e){var t=JSON.stringify(e);if(this.serializedData!==t){try{this.scoringData=function getScoringData(e){var t=e.question.validation,n=[];if(!function canValidateResponse(e){return!1!==r.a.getNested(e,"validation.automarkable")&&(e.valid_responses||e.validation&&(!l(e.validation)||!r.a.isEmpty(e.validation.alt_responses)))}(e.question))return{automarkable:!1};if(e.response=e.response||{},t&&t.scoring_type){if(!r.a.contains(s,t.scoring_type))throw new a.a.InvalidScoringTypeException(e.question.type,t.scoring_type);return t.valid_response&&n.push(t.valid_response),t.alt_responses&&(n=n.concat(t.alt_responses)),function processResponsesCurrentScoringFormat(e,t){var n={score:1,penaltyScore:0};return a.a.scoreArray(e,t,n,{ignoreOrder:!0})}(e,n)}return function processLegacyResponsesPre2140(e){var t,n=e.question.valid_responses,o=e.response&&e.response.value,i=(Math.abs(r.a.isNumber(e.question.penalty_score)?e.question.penalty_score:0),!0===e.question.multiple_responses),a=!0,s=[];o?(r.a.isArray(o)||(o=[o]),r.a.each(o,(function(e){var t,o=!1;for(t=0;t<n.length&&(n[t].value!=e||(o=!0,i));t++);o?s.push(!0):(s.push(!1),a=!1)})),i?(t=s.length===n.length&&r.a.all(s)?1:0,a=1===t):t=r.a.all(s)?1:0):a=null;return{score:t,responsesValid:s,maxScore:1,isValid:a}}(e=a.a.normalizeParameters(e))}(JSON.parse(JSON.stringify(e))),a.a.normalizeScores(this.scoringData,e)}catch(e){this.scoringData={error:e}}this.serializedData=t}return this}}]),McqScorer}(i.a);t.a=c},87:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(52),a=n(17),s=n.n(a),l=n(335),c=n(156),u=i.a.extend({initialize:function initialize(){i.a.prototype.initialize.apply(this,arguments),this.shuffleService=new c.a(this,{key:"options"})},getOrderedOptions:function getOrderedOptions(){return this.shuffleService.get("options")},validateStartup:function validateStartup(){i.a.prototype.validateStartup.call(this),this.get("question").options&&r.a.each(this.get("question").options,(function(e){e.value=s.a.sanitizeHTML(e.value),e.label=s.a.sanitizeHTML(e.label)})),this.get("question").valid_responses&&r.a.each(this.get("question").valid_responses,(function(e){e.value&&(e.value=s.a.sanitizeHTML(e.value))}))},processResponseValue:function processResponseValue(e){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").type===this.RESPONSE_TYPE.STRING&&(this.get("response").type=this.RESPONSE_TYPE.ARRAY),this.get("response").value=e},mapValidationMetadataToResponseState:function mapValidationMetadataToResponseState(e){var t,n,o,i,a,s="unattempted"===e.targetState,l=this.shuffleService.mapValueBasedOnOptionOrder(e.metadata);return s?o=this.getUnattemptedValues():(t="correct"===e.targetState,n=this.getResponseValidDetailed().partial,i=this.getMappableResponses(),o=r.a.filter(i,(function(e,o){return n[o]===t}))),a=this.getIndexesForResponseValues(o),r.a.map(a,(function(e,t){return{metadata:l[e],value:s?null:o[t],index:e}}))},getUnattemptedValues:function getUnattemptedValues(){return r.a.chain(this.get("question").options).pluck("value").difference(this.getMappableResponses()).value()},getIndexesForResponseValues:function getIndexesForResponseValues(e){var t=r.a.pluck(this.getOrderedOptions(),"value");return r.a.map(e,(function(e){return r.a.indexOf(t,e)}))},getScorerClass:function getScorerClass(){return l.a},validateResponse:function validateResponse(){return this.getScorer().validateIndividualResponses()},allowsMultipleResponses:function allowsMultipleResponses(){var e=this.get("question");return e.hasOwnProperty("multiple_responses")&&e.multiple_responses}}),p=n(177),f=n(127),d=n.n(f),y=n(131),h=n(129),b=n(128),v=n.n(b),m=n(179),_=n(172),g=n(21),S=n(23),O={MCQ_SELECT_OPTION:"mcq:selectOption",MCQ_UPDATE_SELECTED_OPTIONS:"mcq:updateSelectedOptions"};var R={actionTypes:O,selectOption:function selectOption(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,o){n(S.a.clearValidationUI()),n({type:O.MCQ_SELECT_OPTION,payload:{option:e,allowsMultipleResponses:t}});var i=r.a.map(o().mcq.selectedOptions,(function(e){return e.value}));n(g.a.updateResponseValue(i))}},updateSelectedOptions:function updateSelectedOptions(e){return{type:O.MCQ_UPDATE_SELECTED_OPTIONS,payload:{options:e}}}},P=n(138);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,o=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(OptionInput,e);var t=_createSuper(OptionInput);function OptionInput(){return _classCallCheck(this,OptionInput),t.apply(this,arguments)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(OptionInput,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.shouldFocus?this.input.focus():this.input.blur()}},{key:"isAriaHidden",value:function isAriaHidden(){var e=this.props.inMaskingState,t=this.input&&-1===this.input.tabIndex;return e||t}},{key:"render",value:function render(){var e=this,t=this.props,n=t.responseId,o=t.isSelected,r=t.allowsMultipleResponses,i=t.value,a=t.index,s=t.readOnly,l=t.onChange,c=t.onKeyDown,u=t.onInputFocus,p=r?"checkbox":"radio",f="".concat(n,"_").concat(a);return d.a.createElement("input",{id:f,className:"lrn-input",type:p,value:i,disabled:s,onChange:l,checked:o,onKeyDown:c,onFocus:function onFocus(){return u(a)},ref:function ref(t){return e.input=t},"aria-hidden":this.isAriaHidden()})}}]),OptionInput}(d.a.Component),T=n(135);function optionLabel_typeof(e){return(optionLabel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function optionLabel_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function optionLabel_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function optionLabel_setPrototypeOf(e,t){return(optionLabel_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function optionLabel_createSuper(e){var t=function optionLabel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,o=optionLabel_getPrototypeOf(e);if(t){var r=optionLabel_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return optionLabel_possibleConstructorReturn(this,n)}}function optionLabel_possibleConstructorReturn(e,t){if(t&&("object"===optionLabel_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return optionLabel_assertThisInitialized(e)}function optionLabel_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function optionLabel_getPrototypeOf(e){return(optionLabel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function optionLabel_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&optionLabel_setPrototypeOf(e,t)}(OptionLabel,e);var t=optionLabel_createSuper(OptionLabel);function OptionLabel(){var e;optionLabel_classCallCheck(this,OptionLabel);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return _defineProperty(optionLabel_assertThisInitialized(e=t.call.apply(t,[this].concat(o))),"state",{screenReaderElement:null}),e}return function optionLabel_createClass(e,t,n){return t&&optionLabel_defineProperties(e.prototype,t),n&&optionLabel_defineProperties(e,n),e}(OptionLabel,[{key:"componentDidMount",value:function componentDidMount(){var e=this.getScreenReaderElement();this.setState({screenReaderElement:e})}},{key:"getScreenReaderElement",value:function getScreenReaderElement(){var e=this.props,t=T.a.getAriaLabelFromAllElements(e.label);return T.a.getText(t,!0,e.disableSpokenmathDistractors)}},{key:"render",value:function render(){var e=this,t=this.props,n=t.ariaHidden,o=t.choiceLabel,r=t.displayType,i=t.index,a=t.label,s=t.disabled,l=!!o&&"block"===r,c=!(a.indexOf("learnosity-feature")>-1);return d.a.createElement("div",{className:"lrn-possible-answer","aria-hidden":n},function buildLabel(){return l?d.a.createElement("span",{className:"lrn_choiceLabel"},Object(P.a)(o,i)):null}(),function buildContent(){var e=v()({lrn_singleRow:l,"lrn-label-disabled":s},"lrn_contentWrapper");return(d.a.createElement("div",{className:e,"aria-hidden":c,dangerouslySetInnerHTML:{__html:a}}))}(),c&&function buildSROnly(){var t=e.state.screenReaderElement;return(d.a.createElement("div",{className:"sr-only"},t))}())}}]),OptionLabel}(d.a.Component),E=n(206),q=n(14),M=n(182),k=n(133),L=n(277),I=n.n(L);function mcq_typeof(e){return(mcq_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mcq_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mcq_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mcq_setPrototypeOf(e,t){return(mcq_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function mcq_createSuper(e){var t=function mcq_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,o=mcq_getPrototypeOf(e);if(t){var r=mcq_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return mcq_possibleConstructorReturn(this,n)}}function mcq_possibleConstructorReturn(e,t){if(t&&("object"===mcq_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mcq_assertThisInitialized(e)}function mcq_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mcq_getPrototypeOf(e){return(mcq_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mcq_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getOptionValidationClassName(e,t,n,o){var i=t.CORRECT,a=t.INCORRECT,s=t.VALID,l=e.validatedResponses,c=e.suggestedResponses,u=c&&c.value,p=!r.a.isEmpty(l)&&null!==l[o],f=u&&c.value.indexOf(n)>=0;return p?l[o]?i:a:e.isShowingCorrectAnswers&&f?s:""}function getResponseAccessibilityState(e,t){var n=t.CORRECT,o=t.INCORRECT,r=t.VALID,i=T.a.STATES;return e===n?i.CORRECT:e===o?i.INCORRECT:e===r?i.VALID:void 0}function getWrapperStyle(e){var t=e.columns,n=100;return t>0&&(n=100/t),{width:"".concat(n,"%")}}var x={indexToFocus:null,isMinSelectionWarningVisible:!1,isMaxSelectionWarningVisible:!1},D=function(e){!function mcq_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mcq_setPrototypeOf(e,t)}(MCQ,e);var t=mcq_createSuper(MCQ);function MCQ(){var e,n,o;mcq_classCallCheck(this,MCQ);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return mcq_defineProperty(mcq_assertThisInitialized(e=t.call.apply(t,[this].concat(a))),"CLASSNAMES",{SELECTED:"lrn_selected",CORRECT:"lrn_correct",INCORRECT:"lrn_incorrect",VALID:"lrn_valid"}),mcq_defineProperty(mcq_assertThisInitialized(e),"state",x),mcq_defineProperty(mcq_assertThisInitialized(e),"maskedOptions",(n={},o=e.props.mcq.options,r.a.each(o,(function(e,t){return n[t]=!1})),n)),mcq_defineProperty(mcq_assertThisInitialized(e),"shouldUpdateOptionOnKeyEvent",!e.props.mcq.allowsMultipleResponses),mcq_defineProperty(mcq_assertThisInitialized(e),"focusedIndex",null),mcq_defineProperty(mcq_assertThisInitialized(e),"buildOption",(function(t,n){var o,i=e.props,a=e.CLASSNAMES,s=i.mcq,l=i.validatable,c=i.base,u=s.uiStyle,p=s.minSelection,f=s.maxSelection,y=u.inputBelowLabel,h=a.SELECTED,b=r.a.contains(s.selectedOptions,t),m=e.state,_=m.isMaxSelectionWarningVisible,g=m.isMinSelectionWarningVisible,S=getOptionValidationClassName(l,a,t,n),O=c.i18n.labels.ariaLiveText,R=c.disableSpokenmathDistractors,P=T.a.getResponseAccessibility({validationState:l.ariaGlobal.label,isMath:c.isMath,value:t.label,state:getResponseAccessibilityState(S,a),ariaLiveLabels:O,isMaxSelectionWarningVisible:_,isMinSelectionWarningVisible:g,minSelection:p,maxSelection:f,disableSpokenmathDistractors:R}),C=e.makeValidationStemNumerationLabel(t),w=e.makeInput(t,b),E=e.makeLabel(t,P,b),q=v()("lrn-mcq-option",S,(mcq_defineProperty(o={},h,!0===b),mcq_defineProperty(o,"has_stem_numeration",!r.a.isNull(C)),o));return y?d.a.createElement("li",{key:n,style:getWrapperStyle(u),className:q},C,E,w):d.a.createElement("li",{key:n,style:getWrapperStyle(u),className:q},C,w,E)})),mcq_defineProperty(mcq_assertThisInitialized(e),"onKeyDown",(function(t){var n=mcq_assertThisInitialized(e).focusedIndex,o=e.props.mcq.options,r=t.keyCode;40===r||39===r?(t.preventDefault(),n=n<o.length-1?n+1:0,e.applyFocus(n,!0)):38!==r&&37!==r||(t.preventDefault(),n=n<1?o.length-1:n-1,e.applyFocus(n,!1))})),mcq_defineProperty(mcq_assertThisInitialized(e),"onInputFocus",(function(t){e.focusedIndex=t})),e}return function mcq_createClass(e,t,n){return t&&mcq_defineProperties(e.prototype,t),n&&mcq_defineProperties(e,n),e}(MCQ,[{key:"reset",value:function reset(){this.setState(x)}},{key:"makeValidationStemNumerationLabel",value:function makeValidationStemNumerationLabel(e){var t=this.props.mcq.uiStyle,n=t.choiceLabel,o=t.type,r=this.props.validatable,i=r.responseLevelDistractorRationale,a=r.showDistractorRationale,s=r.validationState,l=r.validationStemNumeration,c=Object(q.h)(i,a.perResponse);if(n&&"block"===o||!s||0===c.length)return null;var u=Object(P.a)(l,e.defaultIndex);return(d.a.createElement("span",{className:"lrn-validation-stem-numeration"},u))}},{key:"makeInput",value:function makeInput(e,t){var n=this,o=e.defaultIndex,r=this.props,i=r.base,a=r.mcq,s=this.state.indexToFocus,l=i.inMaskingState,c=i.responseId,u=i.readOnly,p=i.disabled,f=a.uiStyle,y=a.allowsMultipleResponses,h=l||u||p||!0===this.maskedOptions[o],b=s===o;return d.a.createElement(C,{index:o,allowsMultipleResponses:y,responseId:c,readOnly:h,displayType:f.type,value:e.value,isSelected:t,onChange:function onChange(){return n.toggleOptionSelection(e,o)},shouldFocus:b,onInputFocus:this.onInputFocus,onKeyDown:this.onKeyDown,inMaskingState:l})}},{key:"makeLabel",value:function makeLabel(e,t,n){var o=this,i=e.defaultIndex,a=this.props,s=a.base,l=a.mcq,c=s.disableSpokenmathDistractors,u=s.responseId,p=s.inMaskingState,f=l.uiStyle,y=l.selectedOptions,h=l.maxSelection,b="".concat(u,"_").concat(i),v=this.makeAriaText(t),m=p||t.visible,_=r.a.findWhere(y,e),g=h===y.length&&!_;return d.a.createElement(d.a.Fragment,null,d.a.createElement("label",{className:"lrn-label",htmlFor:b},v,d.a.createElement(w,{index:i,disableSpokenmathDistractors:c,label:e.label,displayType:f.type,choiceLabel:f.choiceLabel,ariaHidden:m,disabled:g})),d.a.createElement(E.a,{hidden:n,onChange:function onChange(e){return o.maskedOptions[i]=e},ariaLabel:e.maskableAriaLabel}))}},{key:"makeAriaText",value:function makeAriaText(e){return d.a.createElement(_.a.ScreenReaderAriaText,{data:e})}},{key:"toggleOptionSelection",value:function toggleOptionSelection(e,t){var n=this.props,o=n.mcqActions,i=n.mcq,a=i.allowsMultipleResponses,s=i.minSelection,l=i.maxSelection,c=i.selectedOptions,u=r.a.findWhere(c,e);l!==c.length||u?(o.selectOption(e,a),a&&s&&this.setState({isMinSelectionWarningVisible:s>c.length}),this.setState({indexToFocus:t,isMaxSelectionWarningVisible:!1})):this.setState({indexToFocus:t,isMaxSelectionWarningVisible:!0})}},{key:"applyFocus",value:function applyFocus(e,t){var n=function getNextFocusableIndex(e,t,n){if(e[t]){var o=[];if(r.a.each(e,(function(e,r){e||(n&&r>t||!n&&r<t)&&o.push(parseInt(r,10))})),n||o.reverse(),!o.length)return!1;t=o[0]}return t}(this.maskedOptions,e,t);if(!1!==n)if(this.focusedIndex=n,this.shouldUpdateOptionOnKeyEvent){var o=this.props.mcq.options[n];this.toggleOptionSelection(o,o.defaultIndex)}else this.setState({indexToFocus:n})}},{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.mcq,n=e.base,o=t.options,i=n.isMath,a=n.disableSpokenmathDistractors;r.a.each(o,(function(e){e.maskableAriaLabel=T.a.getText(e.label,i,a)}))}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=e.base,n=e.validatable,o=e.mcq,r=t.isResumeState,i=t.isReviewState,a=t.isAttempted,s=o.minSelection,l=o.selectedOptions;n.validatedResponses&&null!==this.focusedIndex&&(this.focusedIndex=null,this.setState({indexToFocus:null})),(r||i)&&this.setState({isMinSelectionWarningVisible:a&&s>l.length})}},{key:"messageTypeHelper",value:function messageTypeHelper(){var e=this.state,t=e.isMaxSelectionWarningVisible,n=e.isMinSelectionWarningVisible;return t?this.messageType="warning":n&&(this.messageType="info"),this.messageType}},{key:"getWarningMessage",value:function getWarningMessage(){var e=this.state,t=e.isMaxSelectionWarningVisible,n=e.isMinSelectionWarningVisible,o=this.props.mcq,r=o.maxSelection,i=o.minSelection,a=this.props.base.i18n.labels,s=a.minResponseMessage,l=a.minResponsesMessage,c=a.maxResponseMessage,u=a.maxResponsesMessage;return t?r>1?Object(k.a)(u,{maxSelection:r}):c:n?i>1?Object(k.a)(l,{minSelection:i}):s:null}},{key:"render",value:function render(){var e=this.props,t=e.base,n=e.mcq,o=t.responseId,i=t.i18n,a=n.uiStyle,s=n.options,l=this.getValidatableStateClassName(),c=v()({"lds-message--horizontal-centered":"horizontal-input-bottom"===a.type}),u=this.getWarningMessage();return d.a.createElement(m.a.ValidatableQuestion,null,d.a.createElement("div",{role:"group","aria-label":i.labels.ariaLabel.mcq.responses},d.a.createElement("ul",{className:"lrn-response-validate-wrapper lrn_mcqgroup lrn_mcqgroup-".concat(a.type," ").concat(l),"aria-labelledby":"stimulus-".concat(o),role:"presentation"},r.a.map(s,this.buildOption))),d.a.createElement("span",{className:"sr-only","aria-live":"assertive"},u),d.a.createElement(I.a,{className:c,type:this.messageTypeHelper(),iconClassMapping:{info:"lrn-icon-info",warning:"lrn-icon-warning"},animation:{enter:M.a,leave:M.b},visibility:null!==u,ariaHidden:!0},u))}},{key:"getValidatableStateClassName",value:function getValidatableStateClassName(){var e=this.props,t=e.base,n=e.validatable;if(!t.isAttempted||!n.canShowGlobalValidationUI)return"";var o=n.validationState;return"correct"===o?"lrn_correct":"incorrect"===o?"lrn_incorrect":""}}]),MCQ}(d.a.Component),N=D=h.b((function(e){return{base:e.base,validatable:e.validatable,mcq:e.mcq}}),(function(e){return{mcqActions:y.b(R,e)}}),null,{forwardRef:!0})(D);function dataService_typeof(e){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dataService_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dataService_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var o=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dataService_getPrototypeOf(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function dataService_setPrototypeOf(e,t){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function dataService_createSuper(e){var t=function dataService_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,o=dataService_getPrototypeOf(e);if(t){var r=dataService_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return dataService_possibleConstructorReturn(this,n)}}function dataService_possibleConstructorReturn(e,t){if(t&&("object"===dataService_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function dataService_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dataService_getPrototypeOf(e){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V,j=function(e){!function dataService_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dataService_setPrototypeOf(e,t)}(MCQDataService,e);var t=dataService_createSuper(MCQDataService);function MCQDataService(){return dataService_classCallCheck(this,MCQDataService),t.apply(this,arguments)}return function dataService_createClass(e,t,n){return t&&dataService_defineProperties(e.prototype,t),n&&dataService_defineProperties(e,n),e}(MCQDataService,[{key:"getInitialState",value:function getInitialState(){var e=_get(dataService_getPrototypeOf(MCQDataService.prototype),"getInitialState",this).call(this),t=e.validatable;return t=r.a.extend(t,{ariaGlobal:{visible:this.isReviewState,label:this.getValidatableAriaLabel()}}),"block"===this.displayType&&this.choiceLabel&&(t.validationStemNumeration=this.choiceLabel),r.a.extend(e,{mcq:{selectedOptions:this.selectedOptions,options:this.options,allowsMultipleResponses:this.allowsMultipleResponses,uiStyle:{choiceLabel:this.choiceLabel,type:this.displayType,orientation:this.orientation,columns:this.columns,inputBelowLabel:"horizontal-input-bottom"===this.displayType},minSelection:this.minSelection,maxSelection:this.maxSelection},validatable:t})}},{key:"getValidatableAriaLabel",value:function getValidatableAriaLabel(){if(this.isReviewState){var e=this.VALIDATION_STATES,t=e.CORRECT,n=e.INCORRECT;return this.isResponseValid()?t:n}}},{key:"getValidatedResponses",value:function getValidatedResponses(){var e=this.getResponse();if(e){var t=e.value||[],n=this.validateResponse(),o=this.options;if(!n)return;return r.a.map(o,(function(e){var o=t.indexOf(e.value);return o>=0?n[o]:null}))}}},{key:"getMappedValidatedResponsesData",value:function getMappedValidatedResponsesData(e){var t=this.options;return r.a.map(e,(function(e,n){return{validatedValue:e,text:t[n].plainText}}))}},{key:"getMappedSuggestedResponsesData",value:function getMappedSuggestedResponsesData(e){var t=[];return r.a.each(e,(function(e){r.a.isUndefined(e)||t.push({text:e.plainText})})),t}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var e=_get(dataService_getPrototypeOf(MCQDataService.prototype),"getSuggestedResponses",this).call(this),t=this.options;return{value:r.a.map(e.value,(function(e){return r.a.findWhere(t,{value:e})}))}}},{key:"canShowGlobalValidationUI",get:function get(){var e=r.a.getNested(this.question,"validation.scoring_type");return(!e||"exactMatch"===e)&&_get(dataService_getPrototypeOf(MCQDataService.prototype),"canShowGlobalValidationUI",this)}},{key:"selectedOptions",get:function get(){var e=r.a.getNested(this.getResponse(),"value")||[],t=this.options;return r.a.chain(e).map((function(e){return r.a.findWhere(t,{value:e})})).compact().value()}},{key:"options",get:function get(){if(r.a.isUndefined(this.data.options)){var e=this.model.getOrderedOptions(),t=this.orientation,n=this.columns;r.a.each(e,(function(e,t){return e.defaultIndex=t})),n>1&&"vertical"===t&&(e=this._prepareLabelColumns(e,n)),this.data.options=r.a.map(e,(function(e){var t=s.a.sanitizeHTML(e.value),n=s.a.sanitizeHTML(e.label);return{value:t,label:n,plainText:T.a.getAriaLabelFromAllElements(n),defaultIndex:e.defaultIndex}}))}return this.data.options}},{key:"choiceLabel",get:function get(){if(r.a.isUndefined(this.data.choiceLabel)){var e=this.question,t=r.a.getNested(e,"ui_style.choice_label");r.a.contains(["number","lower-alpha","upper-alpha"],t)&&(this.data.choiceLabel=t)}return this.data.choiceLabel}},{key:"displayType",get:function get(){return r.a.getNested(this.question,"ui_style.type")||"vertical"}},{key:"allowsMultipleResponses",get:function get(){return!!this.question.multiple_responses}},{key:"orientation",get:function get(){if(r.a.isUndefined(this.data.orientation)){var e=r.a.getNested(this.question,"ui_style.orientation");this.data.orientation=r.a.contains(["horizontal","vertical"],e)?e:"vertical"}return this.data.orientation}},{key:"_prepareLabelColumns",value:function _prepareLabelColumns(e,t){for(var n=[],o=e.length,r=0;r<t;r++)for(var i=r;i<o;i+=t)n[i]=e.shift();return n}},{key:"columns",get:function get(){var e=r.a.getNested(this.question,"ui_style.columns");return parseInt(e,10)}},{key:"minSelection",get:function get(){var e=this.question.min_selection;return e||0}},{key:"maxSelection",get:function get(){var e=this.question.max_selection;return e||1/0}}]),MCQDataService}(n(56).a),A=n(25);function reducer_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=R.actionTypes,F=(reducer_defineProperty(V={},z.MCQ_SELECT_OPTION,(function(e,t){var n=t.option,o=t.allowsMultipleResponses,r=e.selectedOptions;if(o){var i=r.indexOf(n);i>=0?r.splice(i,1):r.push(n)}else r=[n];return{selectedOptions:r}})),reducer_defineProperty(V,z.MCQ_UPDATE_SELECTED_OPTIONS,(function(e,t){return{selectedOptions:t.options}})),V),W=Object(A.a)(F,{selectedOptions:[]}),Q=p.a.extend({maskable:!0,ViewComponent:N,DataService:j,forwardRef:!0,getReducers:function getReducers(){var e=p.a.prototype.getReducers.apply(this,arguments);return r.a.extend(e,{mcq:W})},addFacadeMethods:function addFacadeMethods(e){var t,n=this.getDataService();e.getProcessedOptions=function(){if(r.a.isUndefined(t)){var e=n.options,o=n.choiceLabel;t=r.a.map(e,(function(e,t){return{label:e.label,value:e.value,choice_label:Object(P.a)(o,t)}}))}return t},e.isValid=r.a.wrap(e.isValid,(function(t,o){var i=t.call(e,o);if(i&&o){var a=r.a.getNested(n.getResponse(),"value")||[],s=i.partial;i.partial=r.a.map(n.options,(function(e){var t=a.indexOf(e.value);return s&&t>=0?s[t]:null}))}return i}))}});t.default={View:Q,Model:u}}}]);