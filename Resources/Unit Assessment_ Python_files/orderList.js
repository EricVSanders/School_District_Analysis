(window.LearnosityAmd=window.LearnosityAmd||[]).push([[67],{132:function(t,n,r){"use strict";r.d(n,"a",(function(){return p})),r.d(n,"c",(function(){return hasBlockElement}));var i=r(1),o=r.n(i),a=r(0),c=r.n(a),u=r(7),l=r(2),p=["h1","h2","h3","h4","h5","h6","p","pre","div","blockquote","section","article","table"],f=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d=new function(){var t=/Mac|iPad|iPhone|iPod/.test(navigator.platform),n=c.a.uniqueId("lrn_capslock_listener_"),r=this,i=[];function setStatus(t){r.status!==t&&(c.a.each(i,(function(n){n(t)})),r.status=t)}this.status=!1,this.observe=function(a,u){return u&&(a=c.a.bind(a,u)),i.push(a),1===i.length&&function startListening(){var i=!1;o()(window).on("focus."+n,(function(){o()(window).one("keypress."+n,r.correctStatus)})),t?(o()(window).on("keydown."+n,(function(t){20===(t||window.event).keyCode&&setStatus(!r.status)})),o()(window).on("keyup."+n,(function(t){20===(t||window.event).keyCode&&setStatus(!1)}))):(o()(window).on("keydown."+n,(function(t){var n=t||window.event;i||20!==n.keyCode||(setStatus(!r.status),i=!0)})),o()(window).on("keyup."+n,(function(t){var n=t||window.event;i&&20===n.keyCode&&(i=!1)})))}(),a},this.unobserve=function(t){(i=c.a.without(i,t)).length||function stopListening(){o()(window).off("."+n)}()},this.correctStatus=function(n){var r=n||window.event,i=r.charCode||r.keyCode,o=r.shiftKey;i<123&&i>96?setStatus(o):!(i<91&&i>64)||t&&o||setStatus(!o)}},h=new function(){var t=c.a.uniqueId("lrn_fullscreen_listener_"),n=this,r=[],i={generic:{change:"fullscreenchange",element:"fullscreenElement"},webkit:{change:"webkitfullscreenchange",element:"webkitFullscreenElement"},ms:{change:"MSFullscreenChange",element:"msFullscreenElement"},moz:{change:"mozfullscreenchange",element:"mozFullScreenElement"}},a="ie"===u.a.browser&&11===u.a.version,l=c.a.find(i,(function(t){if("on".concat(t.change)in document.documentElement)return t}));!l&&a&&(l=i.ms);var p=!1;function setElement(){var t=document[l.element];n.element!==t&&(c.a.each(r,(function(n){n(t)})),n.element=t)}function updateElementAfterNextRender(){p||(p=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){p=!1,setElement()}))})))}this.element=null,this.observe=function(n,i){return i&&(n=c.a.bind(n,i)),l&&(r.push(n),1===r.length&&function startListening(){o()(document).on(l.change+"."+t,updateElementAfterNextRender),p||setElement()}()),n},this.unobserve=function(n){(r=c.a.without(r,n)).length||function stopListening(){o()(document).off("."+t)}()}};function isEventSupported(t){var n=document.createElement("p"),r=!1;if(n.addEventListener)n.addEventListener(t,(function(){r=!0}),!1);else{if(!n.attachEvent)return!1;n.attachEvent("on"+t,(function(){r=!0}))}return n.setAttribute("id","target"),r}function hasBlockElement(t){return c.a.some(p,(function(n){return new RegExp("<".concat(n,"[^>]*>(.*?)<\\/").concat(n,">")).test(t)}))}n.b={capsLock:d,fullScreen:h,getViewportOffset:function getViewportOffset(){var t=o()(window),n={top:t.scrollTop(),left:t.scrollLeft()};return n.right=n.left+t.width(),n.bottom=n.top+t.height(),n},getVisibleViewportDimensions:function getVisibleViewportDimensions(){var t,n=window.innerWidth,r=window.innerHeight;return c.a.contains(["firefox","opera"],u.a.browser)&&(n=(t=o()('<div style="position:fixed;right:0;bottom:0;"></div>').appendTo(o()("body"))).get(0).getBoundingClientRect().left,r=t.get(0).getBoundingClientRect().top,t.remove()),{width:n,height:r}},sidesOnScreen:function sidesOnScreen(t){var n=o()(t),r=n.offset(),i=this.getViewportOffset();return r.right=r.left+n.outerWidth(),r.bottom=r.top+n.outerHeight(),{top:i.top<r.top&&r.top<i.bottom,right:i.right>r.right&&r.right>i.left,bottom:i.bottom>r.bottom&&r.bottom>i.top,left:i.left<r.left&&r.left<i.right}},observeMutation:function observeMutation(t,n,r){n=n||{};var i,a=o()(t),u=c.a.uniqueId("lrn.mutation."),l={childList:n.childList||!1,characterData:n.characterData||!1,attributeOldValue:n.attributeOldValue||!1,charactedDataOldValue:n.charactedDataOldValue||!1,subtree:n.subtree||!1,attributes:n.attributes||!1};if(n.attributeFilter instanceof Array&&(l.attributeFilter=n.attributeFilter),f){if(!(l.childList||l.attributes||l.characterData))return console.log('NOTE: At the very least, childList, attributes, or characterData must be set to true. Otherwise, "An invalid or illegal string was specified" error is thrown.'),!1;i=new f((function(t){t.forEach(r)})),a.each((function(){try{i.observe(t,l)}catch(n){console.log(n,t,l)}}))}else a.data("lrn-mutation-ns",u),l.attributes&&(isEventSupported("DOMAttrModified")?a.on("DOMAttrModified."+u,r):"onpropertychange"in document.body&&t.attachEvent("propertychange",r)),l.childList&&(isEventSupported("DOMSubtreeModified")?a.on("DOMSubtreeModified."+u+" DOMCharacterDataModified."+u+" DOMAttributeNameChanged."+u,r):"onpropertychange"in document.body&&a.find("*").each((function(){this.attachEvent&&this.attachEvent("onpropertychange",r)})));return i},unobserveMutation:function unobserveMutation(t,n,r){if(t)t.disconnect();else{var i=o()(n),a=i.data("lrn-mutation-ns");i.removeData("lrn-mutation-ns").off("."+a),r&&!isEventSupported("DOMSubtreeModified")&&"onpropertychange"in document.body&&(n.detachEvent("onpropertychange",r),i.find("*").each((function(){this.detachEvent&&this.detachEvent("onpropertychange",r)})))}},recomputeOpacityOn:function recomputeOpacityOn(t){if(window.getComputedStyle)return window.getComputedStyle(t).opacity},updateButtonMap:function updateButtonMap(t){var n=function getButtonMap(t){return t.map((function(){var t=o()(this),n=t.offset(),r=n.left+parseInt(t.css("margin-left"),10),i=n.top+parseInt(t.css("margin-top"),10);return{top:i,right:r+t.width(),bottom:i+t.height(),left:r,el:this,links:{}}})).get()}(t);function isBetween(t,n,r){return c.a.min([n,r])<=t&&c.a.max([n,r])>=t}function closest(t,n){var r=(n.left+n.right)/2,i=(n.top+n.bottom)/2;return c.a.first(c.a.sortBy(t,(function(t){var n=(t.left+t.right)/2,o=(t.top+t.bottom)/2,a=Math.abs(n-r),c=Math.abs(o-i);return Math.sqrt(a*a+c*c)})))}function areAligned(t,n,r,i){return isBetween(r,t,n)||isBetween(i,t,n)||isBetween(t,r,i)&&isBetween(n,r,i)}return c.a.each(n,(function(t){var r,i,o,a,c=[],u=[];for(a=0;a<n.length;a++)(o=n[a])!==t&&(areAligned(t.top,t.bottom,o.top,o.bottom)&&o.left>=t.right&&c.push(o),areAligned(t.left,t.right,o.left,o.right)&&o.top>=t.bottom&&u.push(o));r=closest(c,t),i=closest(u,t),r&&(t.links.RIGHT=r,r.links.LEFT=t),i&&(t.links.DOWN=i,i.links.UP=t)})),n},toggleBackgroundClickable:function toggleBackgroundClickable(t){var n=o()("html"),r=n.map((function(){return o()(this).css("cursor")})).get();t&&!c.a.isEqual(r,["pointer"])&&(this.cachedHtmlCursorStyle=r,n.css("cursor","pointer")),!t&&this.cachedHtmlCursorStyle&&c.a.each(this.cachedHtmlCursorStyle,(function(t,r){n.eq(r).css("cursor","auto"===t?"":t)}))},isElementVisible:function isElementVisible(t){return!!t.offsetParent&&"hidden"!==getComputedStyle(t).getPropertyValue("visibility")},focusable:function focusable(t,n){var r,i,a,c=t.nodeName.toLowerCase();return"area"===c?(i=(r=t.parentNode).name,!(!t.href||!i||"map"!==r.nodeName.toLowerCase())&&(!!(a=o()('img[usemap="#'+i+'"]')[0])&&this.isElementVisible(a))):(/^(input|select|textarea|button|object)$/.test(c)?!t.disabled:"a"===c&&t.href||n)&&this.isElementVisible(t)},getNextTab:function getNextTab(t,n){var r,i,a,u,l,p=!1,f=!1,d=this,h=!0;return o()(document).find("*").each((function(v,g){return i=o()(g),a=i.attr("tabindex"),u=isNaN(a),r=(u||a>=0)&&d.focusable(g,!u),l=!1,c.a.isArray(n)&&c.a.each(n,(function(t){i.hasClass(t)&&(l=!0)})),!!l||(!f&&r&&(f=i),p&&r?(h=!1,f=i,!1):void(r&&g===t&&(p=!0)))})),!!f&&{nextTabElement:f,isFirstElement:h}},detectRenderEnd:function detectRenderEnd(t,n){var r=this,i={childList:!0,subtree:!0,attributes:!0};return new l.default((function(o){var a,c;function resolveSoon(){clearTimeout(a),a=setTimeout((function(){r.unobserveMutation(c,t,resolveSoon),o()}),n)}c=r.observeMutation(t,i,resolveSoon),resolveSoon()}))}}},135:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(17),c=r.n(a),u=r(36),l=r(133),p={CORRECT:"correct",INCORRECT:"incorrect",VALID:"valid"},f={globalText:function globalText(t,n){return t===p.CORRECT?n.correctResponse:t===p.INCORRECT?n.incorrectResponse:""},correctText:function correctText(t,n){var r="";if(!o.a.isEmpty(t)){var i=t.length;r+=i>1?Object(l.a)(n.numberOfCorrectAnswers,{number:i}):n.oneCorrectAnswer}return r+=o.a.pluck(t,"text").join(", ")},incorrectText:function incorrectText(t,n){var r="";if(!o.a.isEmpty(t)){var i=t.length;r+=i>1?Object(l.a)(n.numberOfIncorrectAnswers,{number:i}):n.oneIncorrectAnswer}return r+=o.a.pluck(t,"text").join(", ")},suggestedResponsesText:function suggestedResponsesText(t,n,r){var i="";if(t=o.a.filter(t,(function(t){return!o.a.findWhere(n,{text:t.text})})),!o.a.isEmpty(t)){var a=t.length;i+=a>1?Object(l.a)(r.numberOfExpectedAnswers,{number:a}):r.oneExpectedAnswer}return i+=o.a.pluck(t,"text").join(", ")}};function getGlobalAccessibility(t,n){var r=t===p.CORRECT?n?Object(l.a)(n.correctResponse):"response - correct":t===p.INCORRECT?n?Object(l.a)(n.incorrectResponse):"response - incorrect":void 0;return{label:r,visible:o.a.isString(r)}}function getText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=c.a.stripHTML(c.a.createImageDescriptions(t),!1);if(n&&!r){var a=i.match(/\\\(\S*?\\\)/g)||[];a=a.concat(i.match(/\\\[\S*?\\]/g)||[]),o.a.each(a,(function(t){var n=t.replace("\\(","").replace("\\)","").replace("\\[","").replace("\\]",""),r="";u.a.translateOrEmptyString(n,(function(t){return r=t})),i=i.replace(t,r)}))}return i}n.a={STATES:p,ariaContentFunctions:f,getGlobalAccessibility:getGlobalAccessibility,getResponseAccessibility:function getResponseAccessibility(t){var n=t.value,r=t.state,i=t.isMath,a=t.validationState,c=t.ariaLiveLabels,u=t.minSelection,f=t.maxSelection,d=t.isMinSelectionWarningVisible,h=void 0!==d&&d,v=t.isMaxSelectionWarningVisible,g=void 0!==v&&v,y=t.disableSpokenmathDistractors,m=void 0!==y&&y,b=h||g,_=getGlobalAccessibility(a,c).visible||b,E=o.a.isFunction(r)?r():r,O=_&&n?getText(n,i,m):null;return{label:function(){if(_){var t=p.CORRECT,n=p.INCORRECT,r=p.VALID,i=O?"".concat(O," - "):"",o=u>1?c.minResponsesMessage:c.minResponseMessage,a=f>1?c.maxResponsesMessage:c.maxResponseMessage;return E===t?Object(l.a)(c.correct,{prefix:i}):E===n?Object(l.a)(c.incorrect,{prefix:i}):E===r?Object(l.a)(c.missed,{prefix:i}):g?Object(l.a)(a,{prefix:i,maxSelection:f}):h?Object(l.a)(o,{prefix:i,minSelection:u}):Object(l.a)(c.noResponseGiven,{prefix:i})}}(),visible:_}},getResponseState:function getResponseState(t,n){return o.a.isNull(t)&&o.a.isNull(n)?null:o.a.isString(t)&&n?p.CORRECT:o.a.isString(t)&&!n?p.INCORRECT:o.a.isNull(t)&&!n?p.VALID:void 0},getText:getText,getAriaLabelFromAllElements:function getAriaLabelFromAllElements(t){var n=document.createElement("div");return n.innerHTML=t,function stripElementContent(t){return t.map((function(t){if(t.attributes&&t.attributes.alt)return"Image with alt text: ".concat(t.attributes.alt.value);if(t.attributes&&t.attributes["aria-label"])return t.attributes["aria-label"].value;if(t.children){var n=[].slice.call(t.childNodes);return stripElementContent(n).join(" ")}return t.textContent}))}([].slice.call(n.childNodes)).join(", ")}}},138:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a={"lower-alpha":"a","upper-alpha":"A",number:1};n.a=function stemNumerationHelper(t,n){if(!t)return"";var r=a[t];return n=o.a.isNumber(n)?n:parseInt(n,10),"string"==typeof r?String.fromCharCode(r.charCodeAt(0)+n):"number"==typeof r?(r+n).toString():void 0}},140:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),u=r(131),l=r(129),p=r(21);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function renderFeatures(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.features,a=r.removeOnComplete;return o.a.isEmpty(i)?null:c.a.createElement("div",{className:n},o.a.map(i,(function(t,n){var r=!!t._last;return(c.a.createElement(f,{key:n,feature:t,isLastFeature:r,removeOnComplete:a}))})))}var f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(EmbeddedFeature,t);var n=_createSuper(EmbeddedFeature);function EmbeddedFeature(){return _classCallCheck(this,EmbeddedFeature),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(EmbeddedFeature,[{key:"render",value:function render(){var t=this;return(c.a.createElement("div",{ref:function ref(n){return t.el=n}}))}},{key:"componentDidMount",value:function componentDidMount(){var t=this.props,n=t.feature,r=t.baseActions,i=t.isLastFeature,o=t.removeOnComplete;r.legacyRenderEmbeddedFeature({feature:n,isLastFeature:i,removeOnComplete:o,el:this.el})}}]),EmbeddedFeature}(c.a.Component);f=l.b(null,(function(t){return{baseActions:u.b(p.a,t)}}))(f),n.a={VerticalFeatures:function VerticalFeatures(t){return renderFeatures(t,"lrn_stimulus_features_vertical")},OverlayFeatures:function OverlayFeatures(t){return renderFeatures(t,"lrn_stimulus_features_overlay",{removeOnComplete:!0})}}},141:function(t,n,r){"use strict";var i={};function clear(t){var n=i[t];n&&(clearTimeout(n),delete i[t])}n.a={start:function start(t,n){var r=arguments,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;clear(t);var a=function repeatFn(){n(),start.apply(null,r)};i[t]=setTimeout(a,o)},clear:clear}},145:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(128),c=r.n(a),u=r(127),l=r.n(u),p=r(129),f=r(140),d=r(154),h=r(7),v=r(155);function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach((function(n){_defineProperty(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}var g={XSMALL:{className:"lrn-xs",minWidth:0},SMALL:{className:"lrn-sm",minWidth:481},MEDIUM:{className:"lrn-md",minWidth:801},LARGE:{className:"lrn-lg",minWidth:1200}};function ResponsiveWidget(t){if(!t.responsive)return t.children;return l.a.createElement(v.a.Detector,{onChange:function onSizeChange(n){var r=o.a.chain(g).filter((function(t){return t.minWidth<=n.width})).pluck("className").value().join(" ");t.onChange&&t.onChange(_objectSpread(_objectSpread({},n),{},{responsiveClassName:r}))}},t.children)}var y=function applyResponsiveWidgetLayout(t){var n;t.state=o.a.extend({},t.state,{dimensions:{width:0,height:0},layoutMode:"split"}),t.render=function(){var r=t.baseClassName,i=t.state,a=t.props.base,c=a.responseId,u=a.widgetLayout,p=function getLayoutData(t,n){if("stack"===t){return{layoutClassName:"",elements:o.a.map(n,(function(t){return{type:t.type,width:"",paddingLeft:"",paddingRight:""}}))}}return{layoutClassName:"clearfix",elements:n}}(i.layoutMode,u.elements),f=p.elements,d=p.layoutClassName;return n||(n=o.a.findWhere(u.elements,{type:"interaction"})),l.a.createElement(v.a.Detector,{onChange:function onChange(r){return function onComponentResize(t,n,r){var i,o=n.width,a=t.state.layoutMode,c=(i=r.width||50,o*i/100<400?"stack":"split");c!==a&&t.setState({layoutMode:c})}(t,r,n)}},l.a.createElement("div",{id:c,className:"".concat(r," ").concat(d)},t.getInstructorStimulus(),o.a.map(f,(function(n,r){return l.a.createElement(v.a.Column,_extends({key:r},n),function getChildComponent(n){return"stimulus"===n?t.getStimulus():t.getQuestionContent()}(n.type))}))))}};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function baseQuestion_extends(){return(baseQuestion_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function baseQuestion_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var m=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(BaseQuestion,t);var n=_createSuper(BaseQuestion);function BaseQuestion(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,BaseQuestion),baseQuestion_defineProperty(_assertThisInitialized(r=n.call(this,t)),"state",{}),baseQuestion_defineProperty(_assertThisInitialized(r),"onSizeChange",(function(t){var n=t.responsiveClassName;r.setState({responsiveClassName:n})})),o.a.getNested(t,"base.widgetLayout.enabled")&&y(_assertThisInitialized(r)),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(BaseQuestion,[{key:"render",value:function render(){var t=this.baseClassName,n=this.props.base.responseId;return l.a.createElement(ResponsiveWidget,{responsive:this.props.responsive,onChange:this.onSizeChange},l.a.createElement("div",{id:n,className:t},this.getInstructorStimulus(),this.getStimulus(),this.getQuestionContent()))}},{key:"baseClassName",get:function get(){var t=this.props.base,n=t.questionType,r=t.fontSizeClass,i=t.inMaskingState;return c()({"lrn-masking":i,"lrn-ie":"ie"===h.a.browser,"lrn-ios":h.a.isIOS},r,this.state.responsiveClassName,"lrn lrn_widget lrn_qr lrn_clearfix lrn_".concat(n," ").concat(r))}},{key:"getQuestionContent",value:function getQuestionContent(){var t=this.props,n=t.base,r=t.children,i=n.stimulus,a=n.extraClassNames||{},c={responseWrapper:"lrn_response_wrapper ",response:"lrn_response lrn_clearfix "},u=o.a.getNested(n,"__legacyAttributes.extraClassNames")||{};return u.lrn_response_wrapper&&(c.responseWrapper+=u.lrn_response_wrapper),u.lrn_response&&(c.response+=u.lrn_response),c.responseWrapper+=a.responseWrapper||"",c.response+=a.response||"",l.a.createElement("div",{className:c.responseWrapper},l.a.createElement(f.a.OverlayFeatures,{features:i.legacyOverlayFeatures}),l.a.createElement("div",{className:c.response},r))}},{key:"getStimulus",value:function getStimulus(){var t=this.props.base,n=t.stimulus,r=t.stimulusReview,i=t.isReviewState,o=t.responseId,a=i&&r.visible?r:n;return l.a.createElement(d.a.Stimulus,baseQuestion_extends({},a,{responseId:o}))}},{key:"getInstructorStimulus",value:function getInstructorStimulus(){var t=this.props.base.stimulusInstructor;return(l.a.createElement(d.a.InstructorStimulus,t))}}]),BaseQuestion}(l.a.Component);m=p.b((function(t){return{base:t.base}}),null)(m);n.a=m},146:function(t,n,r){"use strict";var i=r(1),o=r.n(i),a=r(0),c=r.n(a),u=(r(54),document),l=o()("body");function unwatch(t){u.unbindLeave&&u.unbindLeave(t)}n.a={watch:function watch(t,n){l.find(t).length&&u.leave&&u.leave(t,c.a.debounce((function(){l.find(t).length||(n(),unwatch(t))}),10))},unwatch:unwatch}},147:function(t,n,r){"use strict";r.d(n,"a",(function(){return o}));var i=r(127);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Wrapper,t);var n=_createSuper(Wrapper);function Wrapper(){return _classCallCheck(this,Wrapper),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Wrapper,[{key:"render",value:function render(){return this.props.children}}]),Wrapper}(r.n(i).a.PureComponent)},148:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(5),c=r.n(a),u=r(127),l=r.n(u),p=r(130),f=r.n(p),d=r(131),h=r(129),v=r(192),g=r(55),y=r(21),m=r(57),b=r(31),_=r(37),E=r(38),O=r(146),S=r(150),C=r(147);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}var T=c.a.View.extend({initialize:function initialize(){var t=this;this._responseId=this.model.get("response_id"),this.activity=this.options.activity,this.remove=this.remove.bind(this),this.initialisationCompleted=this.initialisationCompleted.bind(this);var n=this.getDataService();this.addFacadeMethods(this.getFacade()),n.prepare((function(){t.setLegacyAttributes(),t.render(),t.initialisationCompleted(),O.a.watch('[id="'.concat(t._responseId,'"]'),t.remove)}))},update:function update(){var t=this,n=this.getDataService(),r=this.getStore(),i=o.a.extend({},n.getInitialState()),a=this.widgetInstance;a&&o.a.isFunction(a.reset)&&a.reset(),r.dispatch({type:"UPDATE_ALL",payload:{data:i}}),this.prepareStoreState(),this.setLegacyAttributes();var c=y.a.renderMathIfRequired({success:function success(){t.onMathRendered()}});r.dispatch(c)},getDataService:function getDataService(){if(!this._dataService){var t=this.DataService;this._dataService=new t(this.model,this.getFacade())}return this._dataService},getStore:function getStore(){if(!this._store){var t=this.getDataService(),n=this.getReducers(),r=this.getMiddleware();o.a.each(n,(function(t,n){var r=t.setName;r&&r(n)})),this._store=Object(d.d)(Object(d.c)(n),t.getInitialState(),Object(S.a)(d.a.apply(void 0,_toConsumableArray(r)))),this.prepareStoreState()}return this._store},getMiddleware:function getMiddleware(){var t=this;return[v.a.withExtraArgument(this.getThunkServices()),function legacyMiddleWare(n){return function(n){return function(r){return r.type===y.a.actionTypes.QUESTION_LEGACY_BEGIN_RESPONSE&&t.beginResponse(),n(r)}}}]},getThunkServices:function getThunkServices(){var t=this;return{dataService:this.getDataService().getFacade(),mathService:this.getMathService(),simplefeatureService:{render:function renderViewSimpleFeatures(){return t.options.services.renderViewSimpleFeatures(t)}}}},getReducers:function getReducers(){return{base:g.a}},render:function render(){if(this.component)try{this.el&&f.a.unmountComponentAtNode(this.el)}catch(t){}else{var t=document.createElement("div");this.$el.replaceWith(t),this.setElement(t),this.$el.attr("data-lrn-widget-container",this._responseId).attr("data-lrn-widget-type","question")}return this.renderComponent()},renderComponent:function renderComponent(){var t=this,n=this.getStore(),r=this.ViewComponent,i=!0===this.forwardRef?l.a.createElement(r,{ref:function ref(n){return t.widgetInstance=n}}):l.a.createElement(r,null);return new Promise((function(r){f.a.render(l.a.createElement(C.a,{ref:function ref(n){return t.component=n}},l.a.createElement(h.a,{store:n},i)),t.el,r)}))},remove:function remove(){if(!this._removed){try{var t=f.a.findDOMNode(this.component);t&&!this.$el.find(t).length&&this.$el.append(t),this.el&&(this._unmounted=f.a.unmountComponentAtNode(this.el))}catch(t){}c.a.View.prototype.remove.call(this),O.a.unwatch('[id="'.concat(this._responseId,'"]')),this._removed=!0}},renderSimpleFeatures:function renderSimpleFeatures(t){return _.a.renderSimpleFeatures.call(this,this.$el,this.activity,t)},initialisationCompleted:function initialisationCompleted(){var t=this.getMathService(),n=this.options.mathRenderPromise;t.mathquillRendering()&&(n=t.renderMathquill()),n&&n.then(this.onMathRendered.bind(this)),this.imageLoader=new E.a({element:this.el}),this.imageLoader.loadImages(),this.options.initialisationCallback&&o.a.defer(this.options.initialisationCallback)},prepareStoreState:function prepareStoreState(){},getFacade:function getFacade(){if(o.a.isUndefined(this.questionFacade)){var t=new m.a(this).facade;this.questionFacade=t}return this.questionFacade},addFacadeMethods:function addFacadeMethods(t){},getMathService:function getMathService(){return o.a.isUndefined(this._mathService)&&(this._mathService=new b.a(this,"question")),this._mathService},setLegacyAttributes:function setLegacyAttributes(){var t=this.__legacyAttributes,n=y.a.setLegacyAttributes(t);this.getStore().dispatch(n)},onMathRendered:function onMathRendered(){var t=this.cacheRenderedMath.bind(this);this.getStore().dispatch(y.a.notifyMathRendered({cacheRenderedMath:t}))},cacheRenderedMath:function cacheRenderedMath(t){t&&this.getStore().dispatch(y.a.cacheRenderedMath({mathInResponse:t}))},setDisabled:function setDisabled(t){var n=this.activity.get("state"),r=this.activity.STATE,i=[r.INITIAL,r.RESUME],a=this.getStore().getState().base.disabled;return!(!o.a.contains(i,n)||a===t)&&(t?this.undelegateEvents():this.delegateEvents(),this.getStore().dispatch(y.a.setDisabled(t)),!0)},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},masking:function masking(t,n){this.getStore().dispatch(y.a.setMaskingState(t,n))},reset:function reset(){this.getFacade().trigger("reset")}});n.a=T},150:function(t,n,r){"use strict";var i;i=function composeWithDevTools(t){return t},n.a=i},154:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(140),c=r(127),u=r.n(c);n.a={Stimulus:function Stimulus(t){if(!t.visible)return null;var n=t.responseId;return u.a.createElement("div",{className:"lrn_question"},u.a.createElement("div",{className:"lrn_stimulus lrn_clearfix"},u.a.createElement("div",{className:"lrn_stimulus_content lrn_clearfix",dangerouslySetInnerHTML:{__html:t.content},id:"stimulus-".concat(n)}),function renderLegacyVerticalFeatures(){var n=t.legacyVerticalFeatures,r=t.legacyEvents,i=t.i18n;if(!o.a.isEmpty(n))return u.a.createElement(a.a.VerticalFeatures,{features:n,i18n:i,events:r})}()))},InstructorStimulus:function InstructorStimulus(t){return t.visible?u.a.createElement("div",{className:"lrn_question"},u.a.createElement("div",{className:"lrn-instructor-stimulus"},u.a.createElement("div",{className:"lrn_clearfix"},u.a.createElement("div",{className:"lrn-instructor-stimulus-content",dangerouslySetInnerHTML:{__html:t.content}})))):null}}},155:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(40),c=r.n(a),u=r(127),l=r.n(u),p=r(130),f=r.n(p),d=r(24);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Detector,t);var n=_createSuper(Detector);function Detector(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,Detector),function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(_assertThisInitialized(r=n.call(this,t)),"onWrapperSizeChange",o.a.debounce((function(){var t=_assertThisInitialized(r),n=t.onChange,i=t.el;n&&i&&!r._unmounted&&n({width:i.offsetWidth,height:i.offsetHeight})}),400)),o.a.isFunction(t.onChange)&&(r.onChange=t.onChange),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Detector,[{key:"componentDidMount",value:function componentDidMount(){var t=this;this.el=f.a.findDOMNode(this),this.resizeSensor=Object(d.a)(this.el,(function(){return new c.a(t.el,t.onWrapperSizeChange)})),this.onWrapperSizeChange()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,this.resizeSensor.detach(this.onWrapperSizeChange),this.el=null}},{key:"render",value:function render(){var t=this.props.children;return l.a.Children.only(t)}}]),Detector}(l.a.PureComponent);n.a={Detector:h,Column:function Column(t){var n=function(t){var n=function formatValue(t){return t?"".concat(t,"%"):""},r=t.width,i=t.paddingLeft,o=t.paddingRight;return{width:n(r),paddingLeft:n(i),paddingRight:n(o),float:r?"left":""}}(t);return(l.a.createElement("div",{style:n},t.children))}}},156:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(175);function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function ShuffleService(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ShuffleService),this.model=t,this.options=r,t.ready?this.initialize(t,r):t.once(t.EVENT.READY,(function(){n.initialize(t,r)}))}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ShuffleService,[{key:"initialize",value:function initialize(t,n){var r=this;if(delete this.optionOrder,delete this._canShuffleOnDemand,this._getQuestion().shuffle_options){var i=n.key,a=n.shuffleOptions,c=n.mapValueRequired;if(o.a.isUndefined(i))return void(this._canShuffleOnDemand=!0);t.get("isDynamicContent")&&t.on("dynamicContent:changed",(function(){r._setShuffledOrder(i,a)})),this._setShuffledOrder(i,a),c&&this._attachShuffledOptionsMapHandler()}}},{key:"reInitialize",value:function reInitialize(){this.initialize(this.model,this.options)}},{key:"get",value:function get(t){return t=t||this.options.key,this.optionOrder?this._reOrderOptions(t,this.optionOrder):o.a.clone(o.a.getNested(this._getQuestion(),t))}},{key:"getDynamicSeed",value:function getDynamicSeed(){var t=this.model,n=t.get("response_id");return t.get("isDynamicContent")?"".concat(n,"_dynamic_").concat(t.get("dynamicContentRowId")):n}},{key:"getOrderedData",value:function getOrderedData(t){return this._canShuffleOnDemand&&!o.a.isEmpty(t)?this._shuffleArrayOnDemand(t):t}},{key:"mapShuffledOptionsValue",value:function mapShuffledOptionsValue(t,n){return o.a.isArray(t)&&o.a.isArray(n)&&n.length===t.length?o.a.map(n,(function(r,i){var o=t.indexOf(i);return n[o]})):n}},{key:"mapValueBasedOnOptionOrder",value:function mapValueBasedOnOptionOrder(t){var n=this.optionOrder;if(o.a.isArray(n)&&o.a.isArray(t)){var r=t&&t.length,i=n&&n.length;if(r<i)for(var a=0;a<i-r;a++)t.push(void 0);else t.slice(0,i);return o.a.map(n,(function(n){return t[n]}))}return t}},{key:"_getQuestion",value:function _getQuestion(){return this.model.get("question")}},{key:"_attachShuffledOptionsMapHandler",value:function _attachShuffledOptionsMapHandler(){var t=this,n=this.question,r=this.options,i=this.model,a=r.key,c=r.mapShuffledOptionsValue||this.mapShuffledOptionsValue,u=o.a.getNested(n,a),l="review"===o.a.getNested(i,"activityOptions.state");i.updateResponseValue=o.a.wrap(i.updateResponseValue,(function(n,r,o){l||(r=c(t.optionOrder,r,u)),n.call(i,r,o)})),i.getResponseValue=o.a.wrap(i.getResponseValue,(function(n){return t.mapValueBasedOnOptionOrder(n.call(i))})),i.mapValidationMetadataToResponseState=o.a.wrap(i.mapValidationMetadataToResponseState,(function(n,r){return r.metadata=t.mapValueBasedOnOptionOrder(r.metadata),n.call(i,r)}));var p=i.getScorer();p&&(p.suggestedResponse=o.a.wrap(p.suggestedResponse,(function(n){var r=n.call(p);return r&&r.value?o.a.extend({},r,{value:t.mapValueBasedOnOptionOrder(r.value)}):r})),p.validateIndividualResponses=o.a.wrap(p.validateIndividualResponses,(function(n){return t.mapValueBasedOnOptionOrder(n.call(p))})))}},{key:"_setShuffledOrder",value:function _setShuffledOrder(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.model;r.hasResponse()&&r.get("response").order?this.optionOrder=this.get("response").order:this.optionOrder=this._getShuffleOrder(this._getOptionsToShuffle(t),n)}},{key:"_shuffleArrayOnDemand",value:function _shuffleArrayOnDemand(t){var n=this._getShuffleOrder(t),r=o.a.clone(t);return o.a.map(n,(function(t){return r[t]}))}},{key:"_getShuffleOrder",value:function _getShuffleOrder(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.a.range(t.length);return Object(a.a)({exclusions:n.exclude,questionMetadata:this.model.getMetadata(),originalOrder:r,seed:this.getDynamicSeed()})}},{key:"_getOptionsToShuffle",value:function _getOptionsToShuffle(t){return o.a.getNested(this._getQuestion(),t)}},{key:"_reOrderOptions",value:function _reOrderOptions(t,n){var r=this;return o.a.map(n,(function(n){return r._getOptionsToShuffle(t)[n]}))}}]),ShuffleService}();n.a=c},172:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),u=r(131),l=r(129),p=r(135),f=r(23);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(AriaLiveRegion,t);var n=_createSuper(AriaLiveRegion);function AriaLiveRegion(t){var r;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,AriaLiveRegion),function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(_assertThisInitialized(r=n.call(this,t)),"reset",(function(){r.props.validatableActions.clearValidationAriaLive(),document.removeEventListener("focusin",r.reset),r._focusEventAdded=!1}));var i=t.contentFunctions;return r.contentFunctions=o.a.extend({},p.a.ariaContentFunctions,i),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(AriaLiveRegion,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){this.shouldBeVisible(t)&&!this._focusEventAdded&&(document.addEventListener("focusin",this.reset),this._focusEventAdded=!0)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._focusEventAdded=!1,document.removeEventListener("focusin",this.reset)}},{key:"render",value:function render(){var t=this.shouldBeVisible(this.props);return(c.a.createElement("div",{className:"lrn-accessibility-arialive","aria-live":"assertive","aria-atomic":"true"},t&&this.buildContent()))}},{key:"shouldBeVisible",value:function shouldBeVisible(t){var n=t.base,r=t.validatable,i=n.isReviewState,o=r.ariaLive;return!i&&o.visible}},{key:"buildContent",value:function buildContent(){var t=this.props.validatable,n=this.props.base.i18n.labels.ariaLiveText,r=t.ariaLive,i=this.contentFunctions,o=i.globalText,a=i.correctText,c=i.incorrectText,u=i.suggestedResponsesText,l=[],p=function appendText(t){t&&l.push(t)};return p(o(t.validationState,n)),r.message?p(r.message):(p(a(r.correct,n)),p(c(r.incorrect,n)),p(n.selected),p(u(r.suggestedResponses,r.correct,n))),l.join(". ")}}]),AriaLiveRegion}(c.a.Component);d=l.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{validatableActions:{clearValidationAriaLive:u.b(f.a.clearValidationAriaLive,t)}}}))(d),n.a={AriaLiveRegion:d,ScreenReaderAriaText:function ScreenReaderAriaText(t){var n=t.data;return n.visible?c.a.createElement("span",{className:"lrn-accessibility-label"},n.label):null},GlobalValidationLabel:function GlobalValidationLabel(t){var n=t.label;return(c.a.createElement("div",{className:"sr-only"},n))}}},175:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(176),c=r.n(a),u=r(18),l=function ShuffledArray(t,n){this.unshuffled=t,this.seed=n||ShuffledArray.generateSeed(),this.value=ShuffledArray.shuffle(this.unshuffled,this.seed)};l.create=function(t,n){return new l(t,n)},l.generateSeed=function(){return u.a.v4()},l.shuffle=function(t,n){var r,i,o,a,u;for(l.validate(t,n),r=t.slice(0),i=t.length,u=new c.a(n);i;)a=Math.floor(u()*i),o=r[i-=1],r[i]=r[a],r[a]=o;return r},l.validate=function(t,n){if(!o.a.isArray(t))throw new Error("ShuffledArray: must have an array as a first argument, but was: "+JSON.stringify(t));if(!o.a.isString(n))throw new Error("ShuffledArray: seed must be a string, but was: "+JSON.stringify(n));if(!n.length)throw new Error("ShuffledArray: seed must have a length, but was: "+JSON.stringify(n))};var p=l;function shuffleOrder(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.exclusions||[],r=p.shuffle(t.originalOrder,t.seed),i=o.a.range(20).map((function(t){return t.toString()})),a=r,c=t.seed,u=1,l=0;u<=20&&orderIsAnExclusion(a,n);)c+=i[l],a=p.shuffle(t.originalOrder,c),u++,l++;return orderIsAnExclusion(a,n)&&(a=r),a}function orderIsAnExclusion(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.a.any(n,(function(n){return o.a.isEqual(t,n)}))}n.a=function shuffleOrderWithQuestionSeed(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.exclusions,r=t.questionMetadata,i=void 0===r?{}:r,o=t.originalOrder,a=i.response_shuffle_seed||t.seed;return shuffleOrder({exclusions:n,originalOrder:o,seed:a})}},176:function(t,n,r){var i;void 0===(i=function(){"use strict";return function(t){var n=window,r=Math.pow(256,6),i=Math.pow(2,52),o=2*i;function ARC4(t){var n,r=t.length,i=this,o=0,a=i.i=i.j=0,c=i.S=[];for(r||(t=[r++]);o<256;)c[o]=o++;for(o=0;o<256;o++)c[o]=c[a=255&a+t[o%r]+(n=c[o])],c[a]=n;(i.g=function(t){for(var n,r=0,o=i.i,a=i.j,c=i.S;t--;)n=c[o=255&o+1],r=256*r+c[255&(c[o]=c[a=255&a+n])+(c[a]=n)];return i.i=o,i.j=a,r})(256)}function copy(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function mixkey(t,n){for(var r,i=t+"",o=0;o<i.length;)n[255&o]=255&(r^=19*n[255&o])+i.charCodeAt(o++);return tostring(n)}function tostring(t){return String.fromCharCode.apply(0,t)}return mixkey(Math.random(),t),function seedrandom(a,c,u){var l,p,f,d=[];return l=mixkey(function flatten(t,n){var r,i=[],o=typeof t;if(n&&"object"==o)for(r in t)try{i.push(flatten(t[r],n-1))}catch(t){}return i.length?i:"string"==o?t:t+"\0"}((c=1==c?{entropy:!0}:c||{}).entropy?[a,tostring(t)]:null==a?function autoseed(){var r,i,o;try{return r=new Uint8Array(256),(n.crypto||n.msCrypto).getRandomValues(r),tostring(r)}catch(r){return i=n.navigator,o=i&&i.plugins,[+new Date,n,o,n.screen,tostring(t)]}}():a,3),d),p=new ARC4(d),(f=function(){for(var t=p.g(6),n=r,a=0;t<i;)t=256*(t+a),n*=256,a=p.g(1);for(;t>=o;)t/=2,n/=2,a>>>=1;return(t+a)/n}).int32=function(){return 0|p.g(4)},f.quick=function(){return p.g(4)/4294967296},f.double=f,mixkey(tostring(p.S),t),(c.pass||u||function(t,n,r,i){if(!i)return t;i.S&&copy(i,p),t.state=function(){return copy(p,{})}})(f,l,"global"in c?c.global:this==Math,c.state)}}([])}.call(n,r,n,t))||(t.exports=i)},177:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(148),c=r(23),u=r(58),l=r(14);n.a=a.a.extend({initialize:function initialize(){var t=this,n=this.model;this.listenTo(n,n.EVENT.CALLVALIDATE,(function(n){t.callValidate(n)})),a.a.prototype.initialize.apply(this,arguments)},getReducers:function getReducers(){var t=a.a.prototype.getReducers.apply(this,arguments);return o.a.extend(t,{validatable:u.a})},callValidate:function callValidate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.model.canValidateResponse()){var n=this.getDataService(),r=!(!t.showCorrectAnswer&&!t.showCorrectAnswers),i=n.canShowGlobalValidationUI,a=o.a.isBoolean(t.feedbackAttempts)?t.feedbackAttempts:!!t.feedback_attempts,u=o.a.isUndefined(t.showDistractorRationale)?n.showDistractorRationale:Object(l.g)(t.showDistractorRationale);this.getStore().dispatch(c.a.checkAnswer({canShowCorrectAnswers:r,canShowGlobalValidationUI:i,showDistractorRationale:u,shouldValidateUnattempedResponse:r,skipAttemptCountLimit:!a}))}},setLegacyAttributes:function setLegacyAttributes(){var t=this.__legacyAttributes,n=c.a.setLegacyAttributes(t);a.a.prototype.setLegacyAttributes.call(this),this.getStore().dispatch(n)}})},179:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),u=r(131),l=r(129),p=r(21),f=r(23),d=r(145),h=r(172),v=r(188),g=r(128),y=r.n(g),m=r(17),b=r.n(m),_=r(138),E=r(14),O=r(3);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function shouldBeVisible(t,n,r,i){if(o.a.isNull(r)){if("review"===i&&t!==E.e&&t!==E.d&&o.a.isEmpty(n))return!0;if(!o.a.isNull(n)&&!o.a.isEmpty(n)){var a=o.a.filter(n,(function(t){return!1===t})).length;if(t===E.e)return 0===a;if(t===E.f)return a>0}}return t===E.c||t===r}var S=function(t){_inherits(DistractorRationalePerQuestion,t);var n=_createSuper(DistractorRationalePerQuestion);function DistractorRationalePerQuestion(){return _classCallCheck(this,DistractorRationalePerQuestion),n.apply(this,arguments)}return _createClass(DistractorRationalePerQuestion,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var t=this.props,n=t.html,r=t.perQuestionlabel;return this.visible()?c.a.createElement("div",{className:"lrn_distractor_rationale_per_question",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(n)},"aria-label":r}):null}},{key:"visible",value:function visible(){var t=this.props,n=t.html,r=t.showDistractorRationalePerQuestion,i=t.validatedResponses,o=t.validationState,a=t.viewState;return n&&shouldBeVisible(r,i,o,a)}}]),DistractorRationalePerQuestion}(c.a.Component),C=function(t){_inherits(DistractorRationalePerResponseList,t);var n=_createSuper(DistractorRationalePerResponseList);function DistractorRationalePerResponseList(){return _classCallCheck(this,DistractorRationalePerResponseList),n.apply(this,arguments)}return _createClass(DistractorRationalePerResponseList,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var t=y()("lrn_distractor_rationale_list",this.props.className),n=this.props,r=n.items,i=n.title,o=n.ariaLabel,a=n.validationStemNumeration;return this.visible()?c.a.createElement("div",{className:t,"aria-label":o},c.a.createElement("div",{className:"lrn_distractor_rationale_list_title"},i),r.map((function(t){return c.a.createElement("div",{key:t.index,className:"lrn_distractor_rationale"},c.a.createElement("div",{className:"lrn_validation_stem_numeration"},Object(_.a)(a,t.index)),c.a.createElement("div",{className:"lrn_distractor_rationale_content",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(t.metadata)}}))}))):null}},{key:"visible",value:function visible(){var t=this.props,n=t.items,r=t.showDistractorRationalePerResponse,i=t.validatedResponses,o=t.validationState;return n.length&&shouldBeVisible(r,i,o)}}]),DistractorRationalePerResponseList}(c.a.Component),T=function(t){_inherits(DistractorRationale,t);var n=_createSuper(DistractorRationale);function DistractorRationale(){var t;_classCallCheck(this,DistractorRationale);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"onDistractorComponentsVisible",o.a.debounce((function(){t.props.baseActions.renderMathIfRequired()}),100)),t}return _createClass(DistractorRationale,[{key:"render",value:function render(){var t=this.props,n=t.validatable,r=t.base,i=n.questionLevelDistractorRationale,a=n.responseLevelDistractorRationale,u=n.showDistractorRationale,l=n.validationState,p=n.validatedResponses,f=n.validationStemNumeration,d=[O.QUESTION_TYPES.MCQ,O.QUESTION_TYPES.CLOZEASSOCIATION,O.QUESTION_TYPES.CLOZEDROPDOWN,O.QUESTION_TYPES.CLOZETEXT];if(!("review"===r.state||p&&o.a.contains(d,r.questionType)))return null;var h=Object(E.h)(a,E.f),v=Object(E.h)(a,E.e),g=r.i18n.labels,y=g.distractorRationale,m=g.ariaLabel;return c.a.createElement("div",{className:"lrn_distractor_rationale_wrapper",role:"region","aria-label":m.distractorRationale.distractorRationale},c.a.createElement(S,{html:i,showDistractorRationalePerQuestion:u.perQuestion,validatedResponses:p,validationState:l,viewState:r.state,perQuestionlabel:m.distractorRationale.perQuestion,onVisible:this.onDistractorComponentsVisible}),c.a.createElement(C,{className:"lrn_distractor_rationale_incorrect",items:h,showDistractorRationalePerResponse:u.perResponse,title:y.incorrectTitle,validatedResponses:p,validationState:"incorrect",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseIncorrect,onVisible:this.onDistractorComponentsVisible}),c.a.createElement(C,{className:"lrn_distractor_rationale_correct",items:v,showDistractorRationalePerResponse:u.perResponse,title:y.correctTitle,validatedResponses:p,validationState:"correct",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseCorrect,onVisible:this.onDistractorComponentsVisible}))}}]),DistractorRationale}(c.a.Component),R=r(181),A=r(135);var w={validation:function validation(t){return o.a.contains(["correct","incorrect"],t)?"lrn_".concat(t):""}};function validatable_typeof(t){return(validatable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function validatable_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function validatable_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function validatable_setPrototypeOf(t,n){return(validatable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function validatable_createSuper(t){var n=function validatable_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=validatable_getPrototypeOf(t);if(n){var o=validatable_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return validatable_possibleConstructorReturn(this,r)}}function validatable_possibleConstructorReturn(t,n){if(n&&("object"===validatable_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return validatable_assertThisInitialized(t)}function validatable_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function validatable_getPrototypeOf(t){return(validatable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function validatable_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var I=l.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{validatableActions:u.b({checkAnswer:f.a.checkAnswer},t)}}))(v.a),D=l.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:u.b(p.a,t)}}))(T),P=l.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:u.b(p.a,t)}}))(R.b),N={responseInput:{className:"lrn_response_input"},hasSuggestedAnswersList:!1},L=function(t){!function validatable_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&validatable_setPrototypeOf(t,n)}(ValidatableQuestion,t);var n=validatable_createSuper(ValidatableQuestion);function ValidatableQuestion(){var t;validatable_classCallCheck(this,ValidatableQuestion);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return validatable_defineProperty(validatable_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"validatedEventCount",0),t}return function validatable_createClass(t,n,r){return n&&validatable_defineProperties(t.prototype,n),r&&validatable_defineProperties(t,r),t}(ValidatableQuestion,[{key:"render",value:function render(){var t=this.props,n=t.children,r=t.validatable,i=t.base.i18n.labels.ariaLiveText,o=r.validationState,a=A.a.getGlobalAccessibility(o,i);return c.a.createElement(d.a,null,c.a.createElement(h.a.AriaLiveRegion,null),c.a.createElement(h.a.GlobalValidationLabel,{label:a.label}),n,c.a.createElement(I,null),c.a.createElement(D,null))}},{key:"componentDidUpdate",value:function componentDidUpdate(){var t=this.props,n=t.baseActions,r=t.validatable,i=r.validatedEventRequestCount,a=r.validatedResponses;o.a.isEmpty(a)||i===this.validatedEventCount||n.triggerEvent("validated"),this.validatedEventCount=i}}]),ValidatableQuestion}(c.a.Component);function ResponseInput(t){var n=t.validatable.validationState,r=o.a.extend({},N,t.options),i=r.className,a=r.style,u=w.validation(n);return c.a.createElement("div",{className:"".concat(i," ").concat(u),style:a},t.children)}L=l.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:u.b(p.a,t)}}))(L);n.a={ResponseInput:ResponseInput,CheckAnswerButton:I,SuggestedAnswersList:P,DistractorRationale:D,ValidatableQuestion:L,ValidatableQuestionWithOptionalResponseInput:function ValidatableQuestionWithOptionalResponseInput(t){var n=o.a.extend({},N,t.options),r=o.a.getNested(t,"validatable.__legacyAttributes.willRenderOwnResponseInput");return c.a.createElement(L,t,c.a.createElement("div",{className:"lrn-response-validation-wrapper"},r&&t.children||c.a.createElement(ResponseInput,_extends({},t,{options:n.responseInput}),t.children)),n.hasSuggestedAnswersList&&c.a.createElement(P,null))}}},181:function(t,n,r){"use strict";r.d(n,"a",(function(){return ResponseIndex}));var i=r(0),o=r.n(i),a=r(127),c=r.n(a),u=r(138);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function ResponseIndex(t){var n=t.index,r=t.validationStemNumeration,i=t.domProps,o=void 0===i?{}:i;return(c.a.createElement("span",_extends({className:"lrn_responseIndex"},o),Object(u.a)(r,n)))}var l=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(SuggestedAnswersList,t);var n=_createSuper(SuggestedAnswersList);function SuggestedAnswersList(){return _classCallCheck(this,SuggestedAnswersList),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(SuggestedAnswersList,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.shouldBeVisible()&&this.props.baseActions.renderMathIfRequired()}},{key:"render",value:function render(){var t=this.props,n=t.base,r=t.customListItems,i=n.i18n.labels;if(this.shouldBeVisible()){var a=this.isSingleAnswer,u=this.buildListItems,l=a?i.correctAnswer:i.correctAnswers,p=a?"lrn_single_correct_answer":"",f=(r||u).call(this);return o.a.isEmpty(f)?null:c.a.createElement("div",{className:"lrn_correctAnswers"},c.a.createElement("span",null,l,":"),c.a.createElement("ul",{className:"lrn_correctAnswerList ".concat(p)},f))}return null}},{key:"isSingleAnswer",get:function get(){var t=this.props.validatable.suggestedResponses;return!o.a.isArray(t.value)}},{key:"buildNestedResponseItem",value:function buildNestedResponseItem(t){var n=this,r=t.value,i=t.index;return o.a.isEmpty(r)?null:c.a.createElement("li",{key:i},this.getResponseIndex(i),r.length>1&&c.a.createElement("ul",{className:"lrn_nestedCorrectAnswers"},o.a.map(r,(function(t,r){return c.a.createElement("li",{key:r},n.getResponseText(t,r))}))),1===r.length&&this.getResponseText(r[0]))}},{key:"buildListItems",value:function buildListItems(){var t=this,n=this.props.validatable.suggestedResponses;return this.isSingleAnswer?this.buildResponseItem({label:n.value},0):o.a.map(n.value,(function(n,r){if(o.a.isArray(n.value))return t.buildNestedResponseItem(n);var i=o.a.isNumber(n.index)?n.index:r;return t.buildResponseItem(n,i)}))}},{key:"buildResponseItem",value:function buildResponseItem(t,n){return c.a.createElement("li",{key:n},this.getResponseIndex(n),this.getResponseText(t))}},{key:"getResponseIndex",value:function getResponseIndex(t){var n=this.props.validatable.validationStemNumeration;return(c.a.createElement(ResponseIndex,{index:t,validationStemNumeration:n}))}},{key:"getResponseText",value:function getResponseText(t,n){return c.a.createElement("div",{key:n,className:"lrn_responseText",dangerouslySetInnerHTML:{__html:t.label}})}},{key:"shouldBeVisible",value:function shouldBeVisible(){var t=this.props.validatable,n=t.isShowingCorrectAnswers,r=t.suggestedResponses,i=t.validationState;return!(!n||"correct"===i||!r)}}]),SuggestedAnswersList}(c.a.Component);n.b=l},187:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(1),c=r.n(a),u=r(5),l=r.n(u),p=r(51);function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=p.a.isPointerEventsSupported(),d=p.a.isTouchDevice(),h=!!p.a.isPassiveEventListenersSupported()&&{passive:!0},v=function(){function TouchClickObserver(t){var n=this;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,TouchClickObserver),_defineProperty(this,"ignoreClickEventsBeforeTime",0),_defineProperty(this,"initialX",-10),_defineProperty(this,"initialY",-10),_defineProperty(this,"listeners",new Set),_defineProperty(this,"touchMoveThreshold",10),_defineProperty(this,"treatTouchEndAsClick",!0),_defineProperty(this,"onClick",(function(t){0===t.button&&((0===t.clientX&&0===t.clientY||t.timeStamp>=n.ignoreClickEventsBeforeTime)&&n.dispatchEvent(t),n.ignoreClickEventsBeforeTime=0)})),_defineProperty(this,"onPointerUp",(function(t){0===t.button&&(n.ignoreClickEventsBeforeTime=t.timeStamp+100,n.dispatchEvent(t))})),_defineProperty(this,"onTouchStart",(function(t){if(1===t.touches.length){var r=t.touches[0];n.initialX=r.clientX,n.initialY=r.clientY,n.touchMoveThreshold=function getTouchMoveThreshold(){return 10/function estimateZoomFactor(){return document.documentElement.clientWidth/window.innerWidth||1}()}(),n.treatTouchEndAsClick=!0}else n.treatTouchEndAsClick=!1})),_defineProperty(this,"onTouchMove",(function(t){if(n.treatTouchEndAsClick&&1===t.touches.length){var r=t.touches[0],i=Math.abs(n.initialX-r.clientX),o=Math.abs(n.initialY-r.clientY);(i>=n.touchMoveThreshold||o>=n.touchMoveThreshold)&&(n.treatTouchEndAsClick=!1)}})),_defineProperty(this,"onTouchEnd",(function(t){0===t.touches.length&&(n.treatTouchEndAsClick&&(n.ignoreClickEventsBeforeTime=t.timeStamp+2500,n.dispatchEvent(t)),n.initialX=-10,n.initialY=-10,n.treatTouchEndAsClick=!0)})),this.eventTarget=t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(TouchClickObserver,[{key:"addListener",value:function addListener(t){0===this.listeners.size&&this.startListening(),this.listeners.add(t)}},{key:"removeListener",value:function removeListener(t){this.listeners.delete(t),0===this.listeners.size&&this.stopListening()}},{key:"removeAllListeners",value:function removeAllListeners(){this.listeners.clear(),this.stopListening()}},{key:"dispatchEvent",value:function dispatchEvent(t){var n=this;this.listeners.forEach((function(r){return r.call(n.eventTarget,t)}))}},{key:"startListening",value:function startListening(){f?this.eventTarget.addEventListener("pointerup",this.onPointerUp):d&&(this.eventTarget.addEventListener("touchstart",this.onTouchStart,h),this.eventTarget.addEventListener("touchmove",this.onTouchMove,h),this.eventTarget.addEventListener("touchend",this.onTouchEnd,h)),this.eventTarget.addEventListener("click",this.onClick)}},{key:"stopListening",value:function stopListening(){f?this.eventTarget.removeEventListener("pointerup",this.onPointerUp):d&&(this.eventTarget.removeEventListener("touchstart",this.onTouchStart),this.eventTarget.removeEventListener("touchmove",this.onTouchMove),this.eventTarget.removeEventListener("touchend",this.onTouchEnd)),this.eventTarget.removeEventListener("click",this.onClick)}}]),TouchClickObserver}();var g=o.a.extend({EVENTS:{CLICK_OR_TAP:"click:element",FOCUS_VIA_KEYBOARD:"focus:element"},documentTouchClick:new v(document),isListening:!1,startListening:function startListening(){return this.isListening||(this.isListening=!0,this.addClickOrTapEventHandler(),this.addFocusViaKeyboardEventHandler()),this},stopListening:function stopListening(){return this.isListening&&(this.isListening=!1,this.removeClickOrTapEventHandler(),this.removeFocusViaKeyboardEventHandler()),this},addClickOrTapEventHandler:function addClickOrTapEventHandler(){var t=this;this.documentTouchClick.addListener((function(n){t.trigger(t.EVENTS.CLICK_OR_TAP,n.target)}))},removeClickOrTapEventHandler:function removeClickOrTapEventHandler(){this.documentTouchClick.removeAllListeners()},addFocusViaKeyboardEventHandler:function addFocusViaKeyboardEventHandler(){var t=this;c()(document).on("keydown.lrn.domEvents",(function(n){9===n.keyCode&&o.a.defer((function(){t.trigger(t.EVENTS.FOCUS_VIA_KEYBOARD,document.activeElement)}))}))},removeFocusViaKeyboardEventHandler:function removeFocusViaKeyboardEventHandler(){c()(document).off("keydown.lrn.domEvents")}},l.a.Events);n.a=g},188:function(t,n,r){"use strict";var i=r(127),o=r.n(i);n.a=function CheckAnswerButton(t){var n=t.base,r=t.validatable,i=t.validatableActions;if(r.canCheckAnswer){var a=n.i18n,c=n.readOnly,u=n.disabled,l=r.canShowCorrectAnswers,p=r.canShowGlobalValidationUI,f=r.feedbackAttemptsCount,d=r.feedbackAttemptsLimit,h=a.labels.checkAnswer,v=!(!c&&!u)||0!==d&&f>=d;return o.a.createElement("button",{type:"button",className:"lrn_btn lrn_validate",disabled:v,onClick:function onClick(){i.checkAnswer({canShowCorrectAnswers:l,canShowGlobalValidationUI:p,skipAttemptCountLimit:!1})}},o.a.createElement("span",null,h))}return null}},193:function(t,n,r){"use strict";r.d(n,"c",(function(){return getClasses})),r.d(n,"b",(function(){return getAttrs})),r.d(n,"a",(function(){return DragButton}));var i=r(0),o=r.n(i),a=r(127),c=r.n(a),u=r(128),l=r.n(u),p=r(7),f=r(135);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function getClasses(t){var n=t.showDragHandler,r=t.transparent,i=t.isMath,o=t.validated;return l()({lrn_draggable:!0,lrn_btn_no_handle:!n,lrn_transparent:r,lrn_correct:!0===o,lrn_incorrect:!1===o,lrn_math_response:i})}function getAttrs(t){var n=t.disabled,r=t.isReviewState,i=t.isPreviewState,o=t.inMaskingState,a=t.response,c=n||r||i||o;return{"data-key":a.key,"data-response-index":a.index,"data-lrn-response-group":a.groupIndex,disabled:c,"aria-disabled":c,"aria-label":responseAriaLabel(a),"aria-pressed":!1,role:"button"}}function responseAriaLabel(t){var n=t.plainText,r=t.validated,i=t.spokenMath||n;return i=f.a.getAriaLabelFromAllElements(i),o.a.isBoolean(r)&&(i+=r?", correct":", incorrect"),i}function DragButton(t){var n=t.children,r=t.canDuplicateResponses,i=t.hasSiblings,o=t.mathItemRef,a=t.response;return(c.a.createElement(DragButtonWrapper,t,c.a.createElement("span",{className:"lrn_icon","aria-hidden":"true"}),c.a.createElement(h,{cacheable:!r,innerHTML:a.value,mathItemRef:o}),n,i&&c.a.createElement("span",{className:"sr-only"}," ")))}function DragButtonWrapper(t){var n=t.response,r=(t.children,t.isInPossibilityList),i=n.index,o=(n.value,"lrn_btn_drag ".concat(getClasses(n))),a=getAttrs(t);return r?c.a.createElement("div",_extends({className:o,"data-index":i},a),t.children):c.a.createElement("span",_extends({className:o,"data-index":i},a),t.children)}var d=[],h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(DragButtonContent,t);var n=_createSuper(DragButtonContent);function DragButtonContent(){var t;_classCallCheck(this,DragButtonContent);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"containerElement",null),_defineProperty(_assertThisInitialized(t),"setContainerElement",(function(n){t.containerElement=n,t.props.mathItemRef&&t.props.mathItemRef(n)})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(DragButtonContent,[{key:"render",value:function render(){return c.a.createElement("span",{className:"lrn_item",dangerouslySetInnerHTML:{__html:this.props.innerHTML},ref:this.setContainerElement})}},{key:"componentDidMount",value:function componentDidMount(){"ie"!==p.a.browser&&this.applyContentFromCache()}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(t){var n=this.containerElement.querySelector(".learnosity-feature");return!(t.innerHTML===this.props.innerHTML&&!n)&&("ie"!==p.a.browser&&this.cacheContentForPendingUpdate(),!0)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.applyContentFromCache()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.cacheContentForPendingUpdate()}},{key:"applyContentFromCache",value:function applyContentFromCache(){var t=this;if(this.props.cacheable&&this.containerElement){var n=o.a.findWhere(d,{innerHTML:this.props.innerHTML});n&&(o.a.toArray(this.containerElement.childNodes).forEach((function(t){return t.parentNode.removeChild(t)})),n.childNodes.forEach((function(n){return t.containerElement.appendChild(n)})),d=o.a.without(d,n))}}},{key:"cacheContentForPendingUpdate",value:function cacheContentForPendingUpdate(){if(this.containerElement){var t={innerHTML:this.props.innerHTML,childNodes:o.a.toArray(this.containerElement.childNodes)};d.push(t),o.a.defer((function(){d=o.a.without(d,t)}))}}}]),DragButtonContent}(c.a.Component)},200:function(t,n,r){(function(n){t.exports=function e(t,n,r){function s(o,a){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(n){var r=t[o][1][n];return s(r||n)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,n,r){"use strict";var i={};function lookupClass(t){var n=i[t];return n?n.lastIndex=0:i[t]=n=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),n}n.exports={add:function addClass(t,n){var r=t.className;r.length?lookupClass(n).test(r)||(t.className+=" "+n):t.className=n},rm:function rmClass(t,n){t.className=t.className.replace(lookupClass(n)," ").trim()}}},{}],2:[function(t,r,i){(function(n){"use strict";var i=t("contra/emitter"),o=t("crossvent"),a=t("./classes"),c=document,u=c.documentElement,l=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,p="onpropertychange"in document&&!!window.matchMedia,f=!!window.MSInputMethodContext&&!!document.documentMode;function touchy(t,r,i,a){n.navigator.pointerEnabled?o[r](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],a):n.navigator.msPointerEnabled?o[r](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],a):(o[r](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],a),o[r](t,i,a))}function whichMouseButton(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var n=t.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function getOffset(t){var n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left}}function getElementBehindPoint(t,n,r){return c.elementFromPoint(n,r)}function never(){return!1}function always(){return!0}function getRectWidth(t){return t.width||t.right-t.left}function getRectHeight(t){return t.height||t.bottom-t.top}function getParent(t){return t.parentNode===c?null:t.parentNode}function isInput(t){return t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function isEditable(t){return!!t&&"false"!==t.contentEditable&&("true"===t.contentEditable||isEditable(getParent(t)))}(t))}function nextEl(t){return t.nextElementSibling||function manually(){var n=t;do{n=n.nextSibling}while(n&&1!==n.nodeType);return n}()}function getCoord(t,n){var r=function getEventHost(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(n),i={pageX:"clientX",pageY:"clientY"};return t in i&&!(t in r)&&i[t]in r&&(t=i[t]),r[t]}p&&(getElementBehindPoint=function(t,n,r){var i,o=t||{},a=o.className;return o.className+=" gu-hide",i=c.elementFromPoint(n,r),o.className=a,i}),r.exports=function dragula(t,n){var r,p,d,h,v,g,y,m,b,_,E,O=arguments.length;1===O&&!1===Array.isArray(t)&&(n=t,t=[]);var S,C=null,T=null,R=null,A=n||{};void 0===A.moves&&(A.moves=always),void 0===A.accepts&&(A.accepts=always),void 0===A.invalid&&(A.invalid=invalidTarget),void 0===A.containers&&(A.containers=t||[]),void 0===A.isContainer&&(A.isContainer=never),void 0===A.copy&&(A.copy=!1),void 0===A.copySortSource&&(A.copySortSource=!1),void 0===A.revertOnSpill&&(A.revertOnSpill=!1),void 0===A.removeOnSpill&&(A.removeOnSpill=!1),void 0===A.direction&&(A.direction="vertical"),void 0===A.ignoreInputTextSelection&&(A.ignoreInputTextSelection=!0),void 0===A.mirrorContainer&&(A.mirrorContainer=c.body);var w=i({containers:A.containers,start:manualStart,end:end,cancel:cancel,remove:remove,destroy:destroy,canMove:canMove,dragging:!1});return!0===A.removeOnSpill&&w.on("over",spillOver).on("out",spillOut),events(),w;function isContainer(t){return-1!==w.containers.indexOf(t)||A.isContainer(t)}function events(t){var n=t?"remove":"add";touchy(A.mirrorContainer,n,"mousedown",grab),touchy(window,n,"mouseup",release)}function eventualMovements(t){touchy(u,t?"remove":"add","mousemove",startBecauseMouseMoved)}function movements(t){var n=t?"remove":"add";o[n](u,"selectstart",preventGrabbed),o[n](u,"click",preventGrabbed)}function destroy(){events(!0),release({})}function preventGrabbed(t){S&&t.preventDefault()}function grab(t){if(g=t.clientX,y=t.clientY,1===whichMouseButton(t)&&!t.metaKey&&!t.ctrlKey){var n=t.target,r=canStart(n);if(r){S=r;var i=getOffset(r.item);h=getCoord("pageX",t)-i.left,v=getCoord("pageY",t)-i.top,eventualMovements(),"mousedown"===t.type&&(isInput(n)?n.focus():t.preventDefault()),t.stopPropagation(),"touchstart"===t.type&&t.preventDefault()}}}function startBecauseMouseMoved(t){if(S)if(0!==whichMouseButton(t)){if(void 0===t.clientX||t.clientX!==g||void 0===t.clientY||t.clientY!==y){if(A.ignoreInputTextSelection){var n=getCoord("clientX",t),r=getCoord("clientY",t);if(isInput(c.elementFromPoint(n,r)))return}var i=S;for(eventualMovements(!0),movements(),end(),start(i),T=d;T&&"none"===window.getComputedStyle(T).getPropertyValue("transform");)T=T.parentElement;T&&(R=A.transformMatrix.getInverseMatrix(T,{removeTranslation:!0})),a.add(_||d,"gu-transit"),renderMirrorImage(),drag(t)}}else release({})}function canStart(t){if(!(w.dragging&&r||isContainer(t))){for(var n=t;getParent(t)&&!1===isContainer(getParent(t));){if(A.invalid(t,n))return;if(!(t=getParent(t)))return}var i=getParent(t);if(i&&!A.invalid(t,n)&&A.moves(t,i,n,nextEl(t)))return{item:t,source:i}}}function canMove(t){return!!canStart(t)}function manualStart(t){var n=canStart(t);n&&start(n)}function start(t){isCopy(t.item,t.source)&&(_=t.item.cloneNode(!0),w.emit("cloned",_,t.item,"copy")),p=t.source,d=t.item,m=b=nextEl(t.item),w.dragging=!0,w.emit("drag",d,p)}function invalidTarget(){return!1}function end(){if(w.dragging){var t=_||d;drop(t,getParent(t))}}function ungrab(){S=!1,eventualMovements(!0),movements(!0)}function release(t){if(ungrab(),w.dragging){var n=_||d,i=getCoord("clientX",t),o=getCoord("clientY",t),a=findDropTarget(getElementBehindPoint(r,i,o),i,o);a&&(_&&A.copySortSource||!_||a!==p)?drop(n,a):A.removeOnSpill?remove():cancel()}}function drop(t,n){var r=getParent(t);_&&A.copySortSource&&n===p&&r.removeChild(d),isInitialPlacement(n)?w.emit("cancel",t,p,p):w.emit("drop",t,n,p,b),cleanup()}function remove(){if(w.dragging){var t=_||d,n=getParent(t);n&&n.removeChild(t),w.emit(_?"cancel":"remove",t,n,p),cleanup()}}function cancel(t){if(w.dragging){var n=arguments.length>0?t:A.revertOnSpill,r=_||d,i=getParent(d),o=isInitialPlacement(i);!1===o&&n&&(_?_.parentNode&&_.parentNode.removeChild(_):p.insertBefore(r,p.contains(m)?m:null)),o||n?w.emit("cancel",r,p,p):w.emit("drop",r,i,p,b),cleanup()}}function cleanup(){var t=_||d;ungrab(),removeMirrorImage(),t&&a.rm(t,"gu-transit"),E&&clearTimeout(E),w.dragging=!1,C&&w.emit("out",t,C,p),w.emit("dragend",t),p=d=_=m=b=E=C=null,T=null,R=null}function isInitialPlacement(t,n){var i;return i=void 0!==n?n:r?b:nextEl(_||d),t===p&&i===m}function findDropTarget(t,n,r){for(var i=t;i&&!accepted();)i=getParent(i);return i;function accepted(){if(!1===isContainer(i))return!1;var o=getImmediateChild(i,t),a=getReference(i,o,n,r);return!!isInitialPlacement(i,a)||A.accepts(d,i,p,a)}}function drag(t){if(r){t.preventDefault();var n=getCoord("clientX",t),i=getCoord("clientY",t),o=n-h,a=i-v;if(T&&!f){var c=T.getBoundingClientRect();o=o-c.left-c.width/2,a=a-c.top-c.height/2;var u=A.transformMatrix.transformPoint({x:o,y:a},R);o=u.x+T.scrollLeft+T.offsetWidth/2,a=u.y+T.scrollTop+T.offsetHeight/2}requestAnimationFrame((function(){if(r&&(r.style.left=o+"px",r.style.top=a+"px",l&&!T)){var t=r.getBoundingClientRect();(t.top<a-2||t.top>a+2||t.left<o-2||t.left>o+2)&&(o+=o-t.left,a+=a-t.top,r.style.left=o+"px",r.style.top=a+"px")}}));var g=_||d,y=getElementBehindPoint(r,n,i),E=findDropTarget(y,n,i);w.emit("move",g,{clientX:n,clientY:i,pageX:getCoord("pageX",t),pageY:getCoord("pageY",t)},y);var O=null!==E&&E!==C;(O||null===E)&&(function out(){C&&moved("out")}(),C=E,function over(){O&&moved("over")}());var S=getParent(g);if(E!==p||!_||A.copySortSource){var I;if(null!==getImmediateChild(E,y))I=getShadowReference(E,g,O,n,i);else{if(!0!==A.revertOnSpill||_)return void(_&&S&&S.removeChild(g));I=m,E=p}(null===I&&O||I!==g&&I!==nextEl(g))&&(b=I,E.insertBefore(g,I),w.emit("shadow",g,E,p))}else S&&S.removeChild(g)}function moved(t){w.emit(t,g,C,p)}}function spillOver(t){a.rm(t,"gu-hide")}function spillOut(t){w.dragging&&a.add(t,"gu-hide")}function renderMirrorImage(){r||(d.getBoundingClientRect(),(r=d.cloneNode(!0)).style.width=d.offsetWidth+"px",r.style.height=d.offsetHeight+"px",a.rm(r,"gu-transit"),a.add(r,"gu-mirror"),A.mirrorContainer.appendChild(r),touchy(u,"add","mousemove",drag),a.add(A.mirrorContainer,"gu-unselectable"),w.emit("cloned",r,d,"mirror"))}function removeMirrorImage(){r&&(a.rm(A.mirrorContainer,"gu-unselectable"),touchy(u,"remove","mousemove",drag),getParent(r).removeChild(r),r=null)}function getImmediateChild(t,n){for(var r=n;r!==t&&getParent(r)!==t;)r=getParent(r);return r===u?null:r}function getShadowReference(t,n,r,i,o){var a,c,u,l,p,f,d,h,v,g=t.children.length;for(a=0;a<g;a++)if(l=(u=t.children[a]).getBoundingClientRect(),p=u.getClientRects(),v=u,f=n.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_FOLLOWING,inRect(i,o,l)&&(d=p[0],h=void 0,h=n.getBoundingClientRect(),i<d.left+h.width&&o<d.top+h.height))for(c=0;c<p.length;c++)if(inRect(i,o,p[c]))return resolve(u,f);return r?null:nextEl(n);function resolve(t,n){return n?nextEl(t):t}function inRect(t,n,r){return t>r.left&&t<r.right&&n>r.top&&n<r.bottom}}function getReference(t,n,r,i){var o="horizontal"===A.direction;return n!==t?function inside(){var t=n.getBoundingClientRect();return resolve(o?r>t.left+getRectWidth(t)/2:i>t.top+getRectHeight(t)/2)}():function outside(){var n,a,c,u=t.children.length;for(n=0;n<u;n++){if(a=t.children[n],c=a.getBoundingClientRect(),o&&c.left+c.width/2>r)return a;if(!o&&c.top+c.height/2>i)return a}return null}();function resolve(t){return t?nextEl(n):n}}function isCopy(t,n){return"boolean"==typeof A.copy?A.copy:A.copy(t,n)}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":4,crossvent:8}],3:[function(t,n,r){"use strict";var i=t("ticky");n.exports=function debounce(t,n,r){t&&i((function run(){t.apply(r||null,n||[])}))}},{ticky:6}],4:[function(t,n,r){"use strict";var i=t("atoa"),o=t("./debounce");n.exports=function emitter(t,n){var r=n||{},a={};return void 0===t&&(t={}),t.on=function(n,r){return a[n]?a[n].push(r):a[n]=[r],t},t.once=function(n,r){return r._once=!0,t.on(n,r),t},t.off=function(n,r){var i=arguments.length;if(1===i)delete a[n];else if(0===i)a={};else{var o=a[n];if(!o)return t;o.splice(o.indexOf(r),1)}return t},t.emit=function(){var n=i(arguments);return t.emitterSnapshot(n.shift()).apply(this,n)},t.emitterSnapshot=function(n){var c=(a[n]||[]).slice(0);return function(){var a=i(arguments),u=this||t;if("error"===n&&!1!==r.throws&&!c.length)throw 1===a.length?a[0]:a;return c.forEach((function emitter(i){r.async?o(i,a,u):i.apply(u,a),i._once&&t.off(n,i)})),t}},t}},{"./debounce":3,atoa:5}],5:[function(t,n,r){n.exports=function atoa(t,n){return Array.prototype.slice.call(t,n)}},{}],6:[function(t,n,r){var i;i="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},n.exports=i},{}],7:[function(t,r,i){(function(t){var n=t.CustomEvent;r.exports=function useNative(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"function"==typeof document.createEvent?function CustomEvent(t,n){var r=document.createEvent("CustomEvent");return n?r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail):r.initCustomEvent(t,!1,!1,void 0),r}:function CustomEvent(t,n){var r=document.createEventObject();return r.type=t,n?(r.bubbles=Boolean(n.bubbles),r.cancelable=Boolean(n.cancelable),r.detail=n.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,r,i){(function(n){"use strict";var i=t("custom-event"),o=t("./eventmap"),a=n.document,c=function addEventEasy(t,n,r,i){return t.addEventListener(n,r,i)},u=function removeEventEasy(t,n,r,i){return t.removeEventListener(n,r,i)},l=[];function unwrap(t,n,r){var i=function find(t,n,r){var i,o;for(i=0;i<l.length;i++)if((o=l[i]).element===t&&o.type===n&&o.fn===r)return i}(t,n,r);if(i){var o=l[i].wrapper;return l.splice(i,1),o}}n.addEventListener||(c=function addEventHard(t,r,i){return t.attachEvent("on"+r,function wrap(t,r,i){var o=unwrap(t,r,i)||function wrapperFactory(t,r,i){return function wrapper(r){var o=r||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function preventDefault(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function stopPropagation(){o.cancelBubble=!0},o.which=o.which||o.keyCode,i.call(t,o)}}(t,0,i);return l.push({wrapper:o,element:t,type:r,fn:i}),o}(t,r,i))},u=function removeEventHard(t,n,r){var i=unwrap(t,n,r);if(i)return t.detachEvent("on"+n,i)}),r.exports={add:c,remove:u,fabricate:function fabricateEvent(t,n,r){var c=-1===o.indexOf(n)?function makeCustomEvent(){return new i(n,{detail:r})}():function makeClassicEvent(){var t;return a.createEvent?(t=a.createEvent("Event")).initEvent(n,!0,!0):a.createEventObject&&(t=a.createEventObject()),t}();t.dispatchEvent?t.dispatchEvent(c):t.fireEvent("on"+n,c)}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":9,"custom-event":7}],9:[function(t,r,i){(function(t){"use strict";var n=[],i="",o=/^on/;for(i in t)o.test(i)&&n.push(i.slice(2));r.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)}).call(this,r(39))},204:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(5),c=r.n(a),u=r(1),l=r.n(u),p=r(200),f=r.n(p);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function Behaviour(t){o()(this).extend(t),this.initialize()}o.a.extend(Behaviour.prototype,c.a.Events,{remove:function remove(){this.stopListening()}}),Behaviour.extend=c.a.Model.extend,Behaviour.Collection=function(t,n){var r=this;this._behaviours={},o.a.each(t,(function(t,i){t.prototype.active.call(n)&&(r._behaviours[i]=new t(n))}))},o.a.extend(Behaviour.Collection.prototype,c.a.Events,{aggregate:function aggregate(t){var n={},r=Array.prototype.slice.call(arguments,1);return o.a.each(this._behaviours,(function(i){o.a.isFunction(i[t])&&o.a.extend(n,i[t].apply(i,r))})),n},prioritise:function prioritise(t,n){var r=this,i=Array.prototype.slice.call(arguments,2),a=this._behaviours[o.a.find(n,(function(n){return r._behaviours[n]&&r._behaviours[n][t]}))];return a&&a[t].apply(a,i)},callAll:function callAll(t){var n,r=Array.prototype.slice.call(arguments,1);(n=o()(this._behaviours)).invoke.apply(n,[t].concat(_toConsumableArray(r)))},callIfActive:function callIfActive(t,n){var r=this._behaviours[t],i=Array.prototype.slice.call(arguments,2);if(r&&o.a.isFunction(r[n]))return r[n].apply(r,i)},has:function has(t){return!!this._behaviours[t]}});var d=Behaviour,h=d.extend({active:function active(){var t=this.opts;return o.a.isNumber(t.maxItems)&&t.maxItems>0},initialize:function initialize(){this.handleMaxItems()},handleMaxItems:function handleMaxItems(){var t=this,n=this.pub;this.listenTo(n,n.EVENT.CHANGED,(function(n,r,i){t.shouldRemoveItems(r)&&t.removeOtherItems(n,r,i)}))},draggablesInZone:function draggablesInZone(t){return l()(t).find(this.prv.$draggables).get()},shouldRemoveItems:function shouldRemoveItems(t){var n=this.opts;return this.spacesLeft(t)<0&&(n.enforceMaxItemsInOrigin||!this.isOriginalDragZone(t))},isOriginalDragZone:function isOriginalDragZone(t){return!this.prv.$dropzones.is(t)},spacesLeft:function spacesLeft(t){return this.opts.maxItems-this.draggablesInZone(t).length},removeOtherItems:function removeOtherItems(t,n,r){var i=this,a=this.draggablesInZone(n);o.a.each(a,(function(n,o){n!==t&&a.length>i.opts.maxItems&&(i.moveItemAway(n,r),a.splice(o,1))}))},moveItemAway:function moveItemAway(t,n){var r=this.prv,i=this.prv.behaviours.prioritise("returnItemTo",["duplicateItems","groupingResponses","maxItems"],t,n),o=t.parentElement;i?i.appendChild(t):(this.prv.$draggables=this.prv.$draggables.not(t),o.removeChild(t)),r.trigger(r.EVENT.MOVED_ITEM_AWAY,t,o)},returnItemTo:function returnItemTo(t,n){var r=this.opts;return r.enforceMaxItemsInOrigin?n:r.origin||!1}}),v=d.extend({active:function active(){return this.opts.copy&&this.opts.origin},initialize:function initialize(){this.listenTo(this.prv,this.prv.EVENT.APPENDED_ITEM,this.onAppend)},isInOrigin:function isInOrigin(t){return this.opts.origin.contains(t)},onAppend:function onAppend(t,n){var r=this.prv;n&&(this.removeIfReturnedToOrigin(t,n),r.$draggables=r.$draggables.not(t),n.contains(t)&&(r.$draggables=r.$draggables.add(t)))},removeIfReturnedToOrigin:function removeIfReturnedToOrigin(t,n){this.isInOrigin(n)&&(this.prv.$draggables=this.prv.$draggables.not(t),l()(t).remove())},returnItemTo:function returnItemTo(){return!1}}),g=r(11),y=d.extend({active:function active(){return this.opts.preventMathjaxDuplication},initialize:function initialize(){var t=this.pub;this.listenTo(t,t.EVENT.CLONED,this.onClone)},onClone:function onClone(t){g.a.isInitalised()&&t.querySelector(".MathJax")&&g.a.preventReRender(t)}}),m=r(187);function getDraggableAttributes(t){if(!o.a.exists(t))return{};var n=o.a.chain(t.attributes).pick("aria-disabled","aria-label","aria-pressed","data-index","data-key","data-response-index").mapObject((function(t,n){return o.a.exists(t.value)?t.value:null})).mapObject((function(t,n){return"true"===t||"false"!==t&&t})).mapObject((function(t,n){return"data-index"===n||"data-response-index"===n?parseInt(t):t})).value();return{ariaDisabled:n["aria-disabled"],ariaLabel:n["aria-label"],ariaPressed:n["aria-pressed"],index:n["data-index"],key:n["data-key"],responseIndex:n["data-response-index"]}}function getContainerIndex(t){var n=l()(t).closest(".lrn_dropzone");return n.length?parseInt(n.data("index")):-1}var b=d.extend({EVENT:{MOVE_FOCUS_WITH_ARROW_KEY:"move-focus-with-arrow-key"},NAMESPACES:{INTERACTION:".interaction",ACTIVE:".active"},KEYS:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},IGNORE_SELECTORS:".lrn_widget.lrn_feature:not(.lrn_scrollablepassage)",DRAG_ABORT_WINDOW:200,activeItem:null,active:function active(){return this.opts.keyboardAndClickInteraction},initialize:function initialize(){var t=this.prv;this.draggableClass=o.a.uniqueId("lrn-dragdrop-group-"),this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.setupDraggables(),this.setupInteraction(),this.activateAfterShortDrag(),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,this.onItemActivation),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,this.onItemDeactivation),this.listenTo(t,t.EVENT.SET_DISABLED,this.onSetDisabled),this.listenTo(t,t.EVENT.CHANGED,this.onChange),this.listenTo(t,t.EVENT.CLEAR,this.deactivateActiveItem),this.listenTo(t,t.EVENT.CLONED,this.onClone),this.listenTo(t,t.EVENT.AUTO_MOVE,this.autoMove),this.listenTo(t,t.EVENT.CHANGE_DRAGGABLES,this.setupDraggables),this.on(this.EVENT.MOVE_FOCUS_WITH_ARROW_KEY,this.onMoveFocusWithArrowKey)},onChange:function onChange(t){var n=this.prv;this.isKeyboard&&(n.$origin.find(n.$draggables.get()).get(0)||t).focus()},onClone:function onClone(t,n,r){"copy"===r&&l()(n).data("clone",t)},namespace:function namespace(t,n){return t.replace(/\s/g,"."+n+" ")},activateAfterShortDrag:function activateAfterShortDrag(){var t,n=this.pub,r={};function isShortAbortedDrag(t,n,i){return n===i&&r.source===i&&r.start+this.DRAG_ABORT_WINDOW>Date.now()}this.listenTo(n,n.EVENT.DRAG_START,(function(n,i){r.activeItem=this.activeItem,r.start=Date.now(),r.source=i,r.el=n,t=!1})),this.listenTo(n,n.EVENT.DRAG_CANCEL,(function(){isShortAbortedDrag.apply(this,arguments)&&(t=!0)})),this.listenTo(n,n.EVENT.DRAG_END,(function(){t&&(r.activeItem&&r.activeItem!==this.activeItem&&this.activateItem(r.activeItem),this.hitItem(r.el))}))},setupDraggables:function setupDraggables(){this.prv.$draggables.addClass(this.draggableClass).attr("tabindex",0)},autoMove:function autoMove(t,n,r){var i=this.prv,o=t&&t.parentNode;i.canAccept(t,n,o)&&(this.activateItem(t),this.appendActiveToZone(n),r&&this.activateItem(t))},setupInteraction:function setupInteraction(){var t=this.prv,n=this.pub,r=n.uid+this.NAMESPACES.INTERACTION,i=this.namespace("keydown ",r),o=this.namespace("keyup ",r),a=this.namespace("focus ",r);t.$container.on(i,this.onContainerKeyDown.bind(this)).on(o,this.onContainerKeyUp.bind(this)).on(a,".".concat(n.CLASS.ACTIVE),this.onContainerFocus.bind(this)),t.$draggables.addClass(this.draggableClass),m.a.startListening(),this.listenTo(m.a,m.a.EVENTS.CLICK_OR_TAP,this.onActivateElement)},onContainerFocus:function onContainerFocus(){this.keyFocusDirection&&(this.moveFocus(this.keyFocusDirection),this.keyFocusDirection=!1)},onContainerKeyDown:function onContainerKeyDown(t){var n=this.isArrowKeyEvent(t);n&&(this.keyFocusDirection=this.getKeyFocusDirection(t)),(n||this.isSpacebarKeyEvent(t))&&t.preventDefault()},onContainerKeyUp:function onContainerKeyUp(t){this.isToggleKeyEvent(t)?(this.isKeyboard=!0,this.onActivateElement(t.target),this.isKeyboard=!1):this.isArrowKeyEvent(t)?(t.stopPropagation(),this.trigger(this.EVENT.MOVE_FOCUS_WITH_ARROW_KEY,this.getKeyFocusDirection(t))):this.isEscapeKeyEvent(t)&&this.deactivateActiveItem()},onActivateElement:function onActivateElement(t){var n=this.prv,r=l()(t);if(!(n.isDragging()||r.closest(this.IGNORE_SELECTORS).length>0)){var i=r.closest(n.$draggables);i.length>0?this.hitItem(i.get(0)):n.$zones.is(t)&&this.hitZone(t),n.$origin.is(t)&&this.hitOrigin(t)}},onMoveFocusWithArrowKey:function onMoveFocusWithArrowKey(t){var n=this.prv.behaviours,r=this.activeItem;n.has("list")&&document.activeElement===r?(this.keyFocusDirection=!1,n.callIfActive("list","moveActive",r,this.getNextByDir(t,r)[0])):this.moveFocus(t)},remove:function remove(){var t=this.prv;this.deactivateActiveItem(),this.stopListening(),this.off(),t.$container.add(t.$origin).off("."+this.pub.uid).find("."+this.draggableClass).removeClass(this.draggableClass),this.lastHitItem=null},onItemActivation:function onItemActivation(t){this.deactivateActiveItem(),t.focus(),this.applyTabindex(t),this.listenForDomEvents()},onItemDeactivation:function onItemDeactivation(t){var n=this.prv,r=this.pub,i=l()(t);n.$zones.removeAttr("tabindex"),n.$origin.removeAttr("tabindex"),i.data("clone")&&(i=i.add(i.data("clone")).removeData("clone")),i.removeClass(r.CLASS.ACTIVE),l()(document).add(this.opts.zones).add(this.opts.origin).off("."+r.uid+this.NAMESPACES.ACTIVE)},onSetDisabled:function onSetDisabled(t,n){t&&(n?this.deactivateItem(n):this.deactivateActiveItem())},applyTabindex:function applyTabindex(t){var n=this.prv,r=this.opts,i=n.$origin;i.is(r.zones)||n.behaviours.has("groupingResponses")?(n.$dropzones.filter(":empty, .lrn-dragdrop-empty").attr("tabindex",0),i.find(t).length||i.attr("tabindex",0)):n.$zones.filter(":empty, .lrn-dragdrop-empty").attr("tabindex",0)},listenForDomEvents:function listenForDomEvents(){var t=this,n=this.prv,r=this.pub,i=r.uid+this.NAMESPACES.ACTIVE,o=n.$container.find("."+r.CLASS.IGNORE_TAP);function contains(t,n){return t.is(n)||t.find(n).length>0}n.$zones.add(n.$origin).on(this.namespace("mouseenter ",i),(function(t){n.isDragging()||r.trigger(r.EVENT.OVER_DROP_ZONE,t.currentTarget)})).on(this.namespace("mouseleave ",i),(function(t){n.isDragging()||r.trigger(r.EVENT.LEFT_DROP_ZONE,t.currentTarget)})),n.$origin.on("focus."+i,(function(t){t.currentTarget.classList.add(r.CLASS.OVER)})).on("blur."+i,(function(t){t.currentTarget.classList.remove(r.CLASS.OVER)})),m.a.startListening(),this.listenToOnce(m.a,m.a.EVENTS.CLICK_OR_TAP,(function(r){contains(l()(t.lastHitItem),r)||contains(o,r)||contains(n.$zones,r)||t.deactivateActiveItem()}))},hitOrigin:function hitOrigin(){this.prv.trigger(this.prv.EVENT.HIT_ORIGIN,this.activeItem)},hitZone:function hitZone(t){this.appendActiveToZone(t)},appendActiveToZone:function appendActiveToZone(t){var n,r=this.prv,i=this.activeItem,o=i&&i.parentNode;i&&r.canAccept(i,t,o)&&(n=l()(i).data("clone")||i,this.deactivateItem(i,{isBeingAppendedToNewZone:t!==o}),t.contains(i)||(t.appendChild(n),r.triggerAppendEvents(n,t,o)))},hitItem:function hitItem(t){var n=this.prv;this.activeItem?(this.activeItem!==t&&n.behaviours.prioritise("hitSecondItem",["list","keyboardMouseInteraction"],t,this.activeItem),this.deactivateActiveItem()):(this.activateItem(t),this.lastHitItem=t)},hitSecondItem:function hitSecondItem(t){this.appendActiveToZone(t.parentNode)},getKeyFocusDirection:function getKeyFocusDirection(t){var n=this.KEYS;return t.which===n.DOWN||t.which===n.RIGHT?1:t.which===n.UP||t.which===n.LEFT?-1:void 0},moveFocus:function moveFocus(t){this.getNextByDir(t,document.activeElement).focus()},getNextByDir:function getNextByDir(t,n){var r=this.prv.$container.find("[tabindex=0]"),i=r.index(n)+t;return r.eq(i%r.length)},isArrowKeyEvent:function isArrowKeyEvent(t){var n=this.KEYS;return[n.LEFT,n.UP,n.RIGHT,n.DOWN].indexOf(t.which)>=0},isEscapeKeyEvent:function isEscapeKeyEvent(t){return t.which===this.KEYS.ESC},isSpacebarKeyEvent:function isSpacebarKeyEvent(t){return t.which===this.KEYS.SPACE},isToggleKeyEvent:function isToggleKeyEvent(t){return t.which===this.KEYS.ENTER||t.which===this.KEYS.SPACE},isActive:function isActive(t){return t===this.activeItem},activateItem:function activateItem(t){var n=this.pub,r=this.prv;if(this.deactivateActiveItem(),r.drake.canMove(t)){var i=o()(getDraggableAttributes(t)).assign({containerIndex:getContainerIndex(t),isActive:!0});t.classList.add(n.CLASS.ACTIVE),n.trigger(n.EVENT.ACTIVATED_ITEM,t,i),n.trigger(n.EVENT.CLONED,t.cloneNode(!0),t,r.canCopy(t,t.parentNode)?"copy":"invisible"),this.activeItem=t}},deactivateActiveItem:function deactivateActiveItem(){this.activeItem&&this.deactivateItem(this.activeItem)},deactivateItem:function deactivateItem(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isBeingAppendedToNewZone:!1};if(this.activeItem){var r=this.pub,i=o()(getDraggableAttributes(t)).assign({dropzoneIndex:getContainerIndex(t),isActive:!1});i.isBeingAppendedToNewZone=n.isBeingAppendedToNewZone,t.classList.remove(r.CLASS.ACTIVE),r.trigger(r.EVENT.DEACTIVATED_ITEM,t,i),this.activeItem=null}}}),_=d.extend({active:function active(){return this.opts.applyAriaAttributes},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.prv.$zones;this.setupDraggables(),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,(function(t){t.setAttribute("aria-pressed",!0)})),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,(function(t){t.setAttribute("aria-pressed",!1)}))},setupDraggables:function setupDraggables(){this.prv.$draggables.attr("aria-pressed",!1)},disabledProps:function disabledProps(t){return{"aria-disabled":t}}}),E=d.extend({active:function active(){return this.opts.applyOverHighlightDropzoneClasses},initialize:function initialize(){var t=this.prv;this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized),this.opts.origin&&this.listenTo(t,t.EVENT.NOTIFY_CUSTOM_DROP,this.setOriginOver)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub,n=this.prv,r=n.$dropzones,i=t.CLASS;r.addClass(i.DROPZONE),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,(function(){r.filter((function(t,n){return!n.hasAttribute("disabled")})).addClass(i.HIGHLIGHT)})),this.listenTo(t,t.EVENT.CLONED,(function(t){this.mirror=t})),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,(function(){n.$zones.removeClass(i.HIGHLIGHT+" "+i.OVER),this.mirror=null})),this.listenTo(t,t.EVENT.OVER_DROP_ZONE,(function(t){t.classList.add(i.OVER)})),this.listenTo(t,t.EVENT.LEFT_DROP_ZONE,(function(t){t.classList.remove(i.OVER)}))},setOriginOver:function setOriginOver(t){this.opts.origin.classList[t?"add":"remove"](this.pub.CLASS.OVER)}}),O=r(141),S={maxItems:h,duplicateItems:v,preventMathjaxDuplication:y,keyboardMouseInteraction:b,ariaAttribute:_,styleHandler:E,scrollable:d.extend({REPEATER_ID:"dragDropScroll",CONSTS:{BUFFER:50,PERIOD:10,DELTA:10},POSSIBLE_OVERFLOWS:["overflow","overflowY"],active:function active(){return this.opts.scrollable},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.listenTo(t,t.EVENT.ACTIVATED_ITEM,this.onActivatedItem),this.listenTo(t,t.EVENT.MOVED,this.onMoved),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,this.clearScroll)},isScrollableOverflow:function isScrollableOverflow(t){var n=l()(t),r=!1;return o.a.some(this.POSSIBLE_OVERFLOWS,(function(t){var i=n.css(t);if("scroll"===i||"auto"===i)return r=!0,!0})),r},onActivatedItem:function onActivatedItem(t){var n=this,r=window,i=document.documentElement,o=l()(t).parents().filter((function(t,r){return n.isScrollableOverflow(r)})),a=document.scrollingElement||i;this.scrollableContainers=l.a.merge(o,l()(a)).map((function(t,n){var o=l()(n),c=o.offset(),u={el:n,top:c.top,left:c.left,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight};return n===a?(u.isDocumentScrollingElement=!0,u.width=Math.max(i.clientWidth,r.innerWidth||0),u.height=Math.max(i.clientHeight,r.innerHeight||0)):(u.width=o.outerWidth(),u.height=o.outerHeight()),u})).toArray()},onMoved:function onMoved(t,n){var r,i,a=this,c={top:n.pageY,left:n.pageX};o.a.some(this.scrollableContainers,(function(t){if(r=a.getScrollingDirection(t,c,t.isDocumentScrollingElement),!o.a.isNull(r))return i=t.el,!0})),r&&i?this.scroll(i,r):O.a.clear(this.REPEATER_ID)},getScrollingDirection:function getScrollingDirection(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.CONSTS.BUFFER,o=t.height,a=t.scrollHeight,c=t.el,u=c.scrollTop,l=r?u:t.top;return n.top<=l+i&&u>0?"top":n.top>=l+o-i&&u<a-o&&o<a?"bottom":null},scroll:function scroll(t,n){var r=this.CONSTS,i=r.DELTA,o=r.PERIOD;O.a.start(this.REPEATER_ID,(function(){"top"===n?t.scrollTop-=i:"bottom"===n&&(t.scrollTop+=i)}),o)},clearScroll:function clearScroll(){this.scrollableContainers=null,O.a.clear(this.REPEATER_ID)},remove:function remove(){this.stopListening(),this.clearScroll()}}),groupingResponses:d.extend({ATTR:{RESPONSE_GROUP:"data-lrn-response-group"},active:function active(){return this.opts.groupingResponses},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){this.setupDragOverOrigin(),this.listenTo(this.prv,this.prv.EVENT.HIT_ORIGIN,this.hitOrigin)},setupDragOverOrigin:function setupDragOverOrigin(){var t=this.prv,n=this.pub,r=this.opts.origin,i=!1,o=null;this.listenTo(n,n.EVENT.ACTIVATED_ITEM,(function(t){i=r.contains(t),o=t.parentElement})),this.listenTo(n,n.EVENT.MOVED,(function(n,o,a){var c=r.contains(a);c!==i&&(i=c,t.trigger(t.EVENT.NOTIFY_CUSTOM_DROP,i))})),this.listenTo(n,n.EVENT.DEACTIVATED_ITEM,(function(n){i&&this.moveToCorrespondingGroup(n,o),i=!1,o=null,t.trigger(t.EVENT.NOTIFY_CUSTOM_DROP,!1)}))},moveToCorrespondingGroup:function moveToCorrespondingGroup(t,n){var r=this.prv,i=r.$origin,o=this.getResponseGroup(i,t),a=r.behaviours;o&&!o.contains(t)&&(o.appendChild(t),r.triggerAppendEvents(t,o,n),a.prioritise("deactivateItem",["keyboardMouseInteraction","groupingResponses"],t))},deactivateItem:function deactivateItem(t){this.pub.trigger(this.pub.EVENT.DEACTIVATED_ITEM,t)},getResponseGroup:function getResponseGroup(t,n){var r=n.getAttribute(this.ATTR.RESPONSE_GROUP);if(!o.a.isUndefined(r))return t.find("["+this.ATTR.RESPONSE_GROUP+'="'+r+'"]')[0]},returnItemTo:function returnItemTo(t){return this.getResponseGroup(this.prv.$origin,t)},isDroppable:function isDroppable(t,n,r){var i=this.prv.$dropzones,o=this.ATTR.RESPONSE_GROUP;return{allowed:n===r||(!!i.is(n)||l()(t).attr(o)===l()(n).attr(o))}},hitOrigin:function hitOrigin(t){t&&this.moveToCorrespondingGroup(t,t.parentElement)}}),list:d.extend({active:function active(){return this.opts.list},initialize:function initialize(){var t=this.pub;this.listenTo(t,t.EVENT.CLONED,this.onClone)},onClone:function onClone(t,n,r){var i,o=this;"mirror"===r&&(t.classList.remove(this.pub.CLASS.ACTIVE),(i=this.horizontalOffset(n,t))&&requestAnimationFrame((function(){o.replicateOffset(t,i)})))},horizontalOffset:function horizontalOffset(t,n){return l()(t.firstChild).innerHeight()>l()(n.firstChild).innerHeight()&&this.getHorizontalOffset(t)},hitSecondItem:function hitSecondItem(t,n){this.moveActive(n,t)},getHorizontalOffset:function getHorizontalOffset(t){var n=t.offsetParent.getBoundingClientRect();return t.getClientRects()[0].left-n.left},replicateOffset:function replicateOffset(t,n){var r=l()(t),i=r.clone().removeClass("gu-mirror"),o=l()("<span>").css({display:"inline-block",width:n});t.className="gu-mirror",r.empty().removeAttr("data-original-index aria-label aria-pressed tabindex").append(o).append(i)},moveActive:function moveActive(t,n){var r=t.parentNode;this.moveItemBeyondTarget(t,n,r)&&(t.focus(),this.prv.triggerAppendEvents(t,r,r))},moveItemBeyondTarget:function moveItemBeyondTarget(t,n,r){var i=this.getDomOrder(t,n);if(0!==i)return r.insertBefore(t,1===i?n.nextSibling:n),!0},getDomOrder:function getDomOrder(t,n){var r=t.compareDocumentPosition(n),i=0;return r&Node.DOCUMENT_POSITION_FOLLOWING&&(i=1),r&Node.DOCUMENT_POSITION_PRECEDING&&(i=-1),i}}),swapInlineAndBlock:d.extend({active:function active(){return this.opts.swapInlineAndBlock},initialize:function initialize(){var t=this.prv;this.$container=l()(this.opts.container),this.onChanged=o.a.debounce(this.onChanged.bind(this),10),this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.listenTo(t,t.EVENT.CHANGED,this.onChanged)},onChanged:function onChanged(t,n){var r,i=this.pub,o=this.opts,a=l()(t);if(n===o.origin&&a.is("span")?r="div":a.is("div")&&(r="span"),r){this.changeElementType(t,r);var c=this.$container.find(".".concat(i.CLASS.ZONE," .").concat(i.CLASS.DRAGGABLE)).get();this.pub.changeDraggables(c)}},changeElementType:function changeElementType(t,n){var r={},i=l()(t);l.a.each(t.attributes,(function(t,n){r[n.nodeName]=n.nodeValue})),i.replaceWith((function(){return l()("<".concat(n,"/>"),r).append(i.contents())}))}})},C=r(226),T=r.n(C),R=r(233),A=r.n(R),w=r(237),I=r.n(w),D=r(189),P=r.n(D),N=T.a.create();function getTransformMatrixString(t){return window.getComputedStyle(t).getPropertyValue("transform")}function strToMatrixArray(t){for(var n=t.replace(/(matrix\()|(\))/,"").split(","),r=0;r<n.length;r++)n[r]=parseFloat(n[r]);return[[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]]}N.import(A.a),N.import(I.a),N.import(P.a);var L={getInverseMatrix:function getInverseMatrix(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=getTransformMatrixString(t),i=strToMatrixArray(r);return n.removeTranslation&&(i[0][2]=i[1][2]=0),N.inv(N.matrix(i))},transformPoint:function transformPoint(t,n){var r=function pointToVector(t){var n=t.x,r=t.y;return N.matrix([[n],[r],[1]])}(t),i=N.multiply(n,r);return{x:i.get([0,0]),y:i.get([1,0])}}};function DragDropPrivate(t,n){this.pub=t,this.opts=n}o.a.extend(DragDropPrivate.prototype,c.a.Events,{EVENT:{APPENDED_ITEM:"appended-item",NOTIFY_CUSTOM_DROP:"notify-custom-drop",HIT_ORIGIN:"hit-origin",INITIALIZED:"initialized",MOVED_ITEM_AWAY:"moved-item-away"},MOVE_THROTTLE_TIME:100,initialize:function initialize(){o.a.defaults(this.opts,this.pub.defaults),this.applyBehaviours(),this.jqueryize(),this.applyClasses(),this.dragulize(),this.listenToDragula(),this.listenToInterface(),this.on(this.EVENT.MOVED_ITEM_AWAY,this.onMovedAway),this.trigger(this.EVENT.INITIALIZED)},applyBehaviours:function applyBehaviours(){this.behaviours=new d.Collection(S,{prv:this,pub:this.pub,opts:this.opts})},applyClasses:function applyClasses(){var t=this.pub,n=this.opts;this.$zones.addClass(t.CLASS.ZONE),n.list||n.container.classList.add(this.pub.CLASS.NON_LIST)},jqueryize:function jqueryize(){var t=this.pub;this.$origin=l()(this.opts.origin),this.$zones=l()(this.opts.zones),this.$draggables=l()(this.opts.draggables),this.$dropzones=this.$zones.not(this.$origin).not(this.$origin.find(this.opts.zones)),this.$container=t.$container=l()(this.opts.container)},dragulize:function dragulize(){var t=this,n=this.opts;this.drake=f()(n.zones,{mirrorContainer:n.container,copy:this.canCopy.bind(this),accepts:this.canAccept.bind(this),transformMatrix:L,invalid:function invalid(n){return!t.$draggables.is(n)&&!t.$draggables.find(n).length||n.hasAttribute("disabled")}})},canAccept:function canAccept(t,n,r){return(!n||!n.hasAttribute("disabled"))&&o.a.every(this.behaviours.aggregate("isDroppable",t,n,r))},canCopy:function canCopy(t,n){return!!this.behaviours.callIfActive("duplicateItems","isInOrigin",n)},listenToDragula:function listenToDragula(){var t=this,n=this.pub,r=this.drake,i=!1;r.on("drag",(function(t,r){var i=o()(getDraggableAttributes(t)).assign({isActive:!0,isPointerDragAction:!0,isBeingAppendedToNewZone:!1});n.trigger(n.EVENT.DRAG_START,t,r),n.trigger(n.EVENT.ACTIVATED_ITEM,t,i)})).on("move",o.a.throttle((function handleMove(r,i,o){t.isDragging()&&n.trigger(n.EVENT.MOVED,r,i,o)}),this.MOVE_THROTTLE_TIME)).on("dragend",(function(t){var r=o()(getDraggableAttributes(t)).assign({isActive:!1,isPointerDragAction:!0,isBeingAppendedToNewZone:!1});t&&(t.classList.remove(n.CLASS.DRAG_SHADOW,n.CLASS.DRAG_MIRROR),n.trigger(n.EVENT.DEACTIVATED_ITEM,t,r)),n.trigger(n.EVENT.DRAG_END,t),i=!1})).on("over",(function(t,r){n.trigger(n.EVENT.OVER_DROP_ZONE,r)})).on("out",(function(t,r){n.trigger(n.EVENT.LEFT_DROP_ZONE,r)})).on("drop",(function(n,o,a){i?r.cancel(!0):t.triggerAppendEvents(n,o,a)})).on("cloned",(function(t,r,i){t.classList.add(n.CLASS.DRAG_MIRROR),n.trigger(n.EVENT.CLONED,t,r,i)})).on("cancel",(function(t,r,o){i||n.trigger(n.EVENT.DRAG_CANCEL,t,r,o)})).on("shadow",(function(t,r){t.classList.add(n.CLASS.DRAG_SHADOW),n.trigger(n.EVENT.SHADOW,t,r)})),this.on(this.EVENT.NOTIFY_CUSTOM_DROP,(function(t){i=t}))},listenToInterface:function listenToInterface(){var t=this,n=this.drake,r=this.pub;r.on(r.EVENT.SET_DISABLED,this.setDisabled,this),r.on(r.EVENT.REMOVE,this.remove,this),r.on(r.EVENT.CLEAR,(function(){n.cancel()})),r.on(r.EVENT.CHANGE_DRAGGABLES,(function(n){t.$draggables=l()(n)}))},isDragging:function isDragging(){return this.drake&&this.drake.dragging},triggerAppendEvents:function triggerAppendEvents(t,n,r){var i=this,a=this.pub;this.opts;if(n){this.trigger(this.EVENT.APPENDED_ITEM,t,n);var c=o()(n.childNodes).filter((function(t){return i.$draggables.is(t)})),u={containerIndex:this.$dropzones.index(n),sourceIndex:this.$dropzones.index(r),keys:o()(c).map((function(t){return t.dataset.key}))};a.trigger(a.EVENT.CHANGED,t,n,r,u)}},onMovedAway:function onMovedAway(t,n){var r=this.pub,i=this.$dropzones.index(n);r.trigger(r.EVENT.MOVED_AWAY,t,n,i)},setDisabled:function setDisabled(t,n){var r=!!t||null,i=this.behaviours.aggregate("disabledProps",r),o=n?l()(n):this.$zones.add(this.$draggables);i.disabled=r,o.attr(i)},remove:function remove(){this.behaviours.callAll("remove"),this.drake.destroy(),this.off(),this.pub.off(),this.$container=this.$origin=this.$zones=this.$draggables=this.pub=this.opts=null}});var x=DragDropPrivate;function DragDrop(t){var n=new x(this,t);this.uid=o.a.uniqueId("lrn-dragdrop-"),n.initialize()}o.a.extend(DragDrop.prototype,c.a.Events,{EVENT:{ACTIVATED_ITEM:"activated-item",AUTO_MOVE:"auto-move",CHANGED:"changed",CHANGE_DRAGGABLES:"change-draggables",CLEAR:"clear",CLONING:"cloning",CLONED:"cloned",DEACTIVATED_ITEM:"deactivated-item",DRAG_START:"drag-start",DRAG_CANCEL:"drag-cancel",DRAG_END:"drag-end",OVER_DROP_ZONE:"over-drop-zone",LEFT_DROP_ZONE:"left-drop-zone",MOVED:"moved",MOVED_AWAY:"moved-away",SET_DISABLED:"set-disabled",SHADOW:"shadow",REMOVE:"remove"},CLASS:{ACTIVE:"lrn_active",DRAGGABLE:"lrn_draggable",DRAG_SHADOW:"lrn_drag_shadow",DRAG_MIRROR:"lrn_drag_mirror",DROPPABLE:"lrn_droppable",DROPZONE:"lrn_dropzone",HIGHLIGHT:"lrn_highlight",IGNORE_TAP:"lrn_dragdrop_ignore_tap",NON_LIST:"lrn_non_list",OVER:"lrn_over",ZONE:"lrn_dragdrop"},defaults:{preventMathjaxDuplication:!0,copy:!1,keyboardAndClickInteraction:!0,applyAriaAttributes:!0,applyOverHighlightDropzoneClasses:!0,maxItems:null,enforceMaxItemsInOrigin:!1,scrollable:!0,groupingResponses:!1,list:!1,swapInlineAndBlock:!1},changeDraggables:function changeDraggables(t){this.trigger(this.EVENT.CHANGE_DRAGGABLES,t)},clear:function clear(){this.trigger(this.EVENT.CLEAR)},disable:function disable(t){this.trigger(this.EVENT.SET_DISABLED,!0,t)},enable:function enable(t){this.trigger(this.EVENT.SET_DISABLED,!1,t)},move:function move(t,n,r){this.trigger(this.EVENT.AUTO_MOVE,t,n,r)},remove:function remove(){this.trigger(this.EVENT.REMOVE)}});n.a=DragDrop},231:function(t,n,r){"use strict";r.d(n,"a",(function(){return withMathCachingResponse}));var i=r(127),o=r.n(i),a=r(17),c=r.n(a);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function withMathCachingResponse(t){return function(n){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ResponseWithMathCaching,n);var r=_createSuper(ResponseWithMathCaching);function ResponseWithMathCaching(){var t;_classCallCheck(this,ResponseWithMathCaching);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(i))),"MATH_SELECTOR",".lrn_math_renderer_processed, .MathJax[id^=MathJax-Element-]"),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ResponseWithMathCaching,[{key:"componentDidMount",value:function componentDidMount(){if(!this.item)throw new Error("withMathCachingResponse HoC expects the wrapped component to implement mathItemRef")}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){var n=t.cacheRenderedMath;n&&n!==this.props.cacheRenderedMath&&n(this.getMathForCache())}},{key:"hasMath",value:function hasMath(){return!!this.item.querySelectorAll(this.MATH_SELECTOR).length}},{key:"getSanitisedHtml",value:function getSanitisedHtml(){var t=this.item.innerHTML.replace(/<script(.+?)\/script>/g,"");return c.a.sanitizeHTML(t)}},{key:"getMathForCache",value:function getMathForCache(){var t=this.props.response,n=t.index,r=t.plainText;if(this.hasMath())return{html:this.getSanitisedHtml(),latex:r,index:n}}},{key:"render",value:function render(){var n=this;return(o.a.createElement(t,_extends({mathItemRef:function mathItemRef(t){return n.item=t}},this.props)))}}]),ResponseWithMathCaching}(o.a.Component)}},232:function(t,n,r){"use strict";r.d(n,"a",(function(){return withDragDropWrapper}));var i=r(0),o=r.n(i),a=r(1),c=r.n(a),u=r(127),l=r.n(u),p=r(204);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=function(t){_inherits(DragDropWrapper,t);var n=_createSuper(DragDropWrapper);function DragDropWrapper(){var t;_classCallCheck(this,DragDropWrapper);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"classes",o.a.extend({DRAGGABLE:"lrn_draggable",ORIGIN:"lrn_possibilityList"},p.a.prototype.CLASS)),t}return _createClass(DragDropWrapper,[{key:"componentDidMount",value:function componentDidMount(){var t=this;o.a.isFunction(this.props.onDragDropMount)?this.props.onDragDropMount((function(){return t.initDragDrop()})):this.initDragDrop()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.dragDrop&&(this.dragDrop.off().remove(),delete this.dragDrop)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.dragDrop&&this.updateDraggables()}},{key:"initDragDrop",value:function initDragDrop(){if(!this.props.disabled){var t=this.props,n=this.classes,r=this.refs,i=c()(r.container);this.dragDrop=new p.a({container:i[0],draggables:i.find(".".concat(n.DRAGGABLE)).get(),zones:i.find(".".concat(n.ZONE)).get(),origin:i.find(".".concat(n.ORIGIN))[0],copy:t.copy,maxItems:t.maxItems,groupingResponses:t.groupingResponses,list:t.list,applyOverHighlightDropzoneClasses:t.applyOverHighlightDropzoneClasses}),this.listenForChanges(),this.listenForInteraction(),this.listenForClones()}}},{key:"listenForChanges",value:function listenForChanges(){var t=this.props,n=this.classes,r=t.handlers,i=this.refs.container.querySelector(".".concat(n.ORIGIN)),o=null;this.dragDrop.on(p.a.prototype.EVENT.CHANGED,(function(n,a,c,u){var l=i&&i.contains(c),p=i&&i.contains(a),f=n.dataset.key,d={responseIndex:parseInt(n.dataset.responseIndex),elIndex:u.keys.indexOf(f),containerIndex:u.containerIndex,sourceIndex:u.sourceIndex,keys:u.keys,removedItemKey:o,key:f};t.copy&&l&&!p?n.parentNode&&n.parentNode.removeChild(n):a!==c&&c.appendChild(n),r.onChange(d),o=null})),this.dragDrop.on(p.a.prototype.EVENT.MOVED_AWAY,(function(t,n,r){o=t.dataset.key,n.appendChild(t)})),r.onToggle&&(this.dragDrop.on(p.a.prototype.EVENT.ACTIVATED_ITEM,r.onToggle),this.dragDrop.on(p.a.prototype.EVENT.DEACTIVATED_ITEM,r.onToggle))}},{key:"listenForClones",value:function listenForClones(){this.dragDrop.on(p.a.prototype.EVENT.CLONED,(function(t,n,r){"copy"===r&&delete t.dataset.key}))}},{key:"listenForInteraction",value:function listenForInteraction(){var t=this.props.handlers;this.dragDrop.on(p.a.prototype.EVENT.ACTIVATED_ITEM,(function(){t.onInteraction()}))}},{key:"updateDraggables",value:function updateDraggables(){var t=this.classes,n=this.refs,r=c()(n.container).find(".".concat(t.ZONE," .").concat(t.DRAGGABLE)).get();this.dragDrop.changeDraggables(r)}},{key:"render",value:function render(){return l.a.createElement("div",{className:"lrn-dragdrop-container",ref:"container"},this.props.children)}}]),DragDropWrapper}(l.a.Component);function withDragDropWrapper(t){return function(n){_inherits(ComponentWrappedWithDragDrop,n);var r=_createSuper(ComponentWrappedWithDragDrop);function ComponentWrappedWithDragDrop(){return _classCallCheck(this,ComponentWrappedWithDragDrop),r.apply(this,arguments)}return _createClass(ComponentWrappedWithDragDrop,[{key:"wrapperProps",get:function get(){var t=this.props;return{copy:t.canDuplicateResponses,disabled:t.disabled,maxItems:t.maxResponsePerCell,groupingResponses:t.usingPossibleGroupingResponses,handlers:t.dragDropHandlers,list:!!t.list,applyOverHighlightDropzoneClasses:!t.list,onDragDropMount:t.onDragDropMount}}},{key:"render",value:function render(){var n=this.props,r=this.wrapperProps;return(l.a.createElement(f,r,l.a.createElement(t,n)))}}]),ComponentWrappedWithDragDrop}(l.a.Component)}},81:function(t,n,r){"use strict";r.r(n);var i=r(0),o=r.n(i),a=r(52),c=r(156),u=r(10),l=r(35);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=["exactMatch","partialMatch","partialMatchPairwise","partialMatchV2"],f=function isDefaultValidResponseValue(t){if(t)return 0===o.a.filter(t,(function(t){return t||o.a.isNumber(t)})).length},d=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(OrderListScorer,t);var n=_createSuper(OrderListScorer);function OrderListScorer(){return _classCallCheck(this,OrderListScorer),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(OrderListScorer,[{key:"reset",value:function reset(t){var n=JSON.stringify(t);if(this.serializedData!==n){try{this.scoringData=function getScoringData(t){var n=t.question.validation,r=[];if(!function canValidateResponse(t){if(!1===o.a.getNested(t,"validation.automarkable"))return!1;var n=t.validation||t||{};return!(!n||!(o.a.isArray(n.valid_response)&&!f(n.valid_response)||o.a.isObject(n.valid_response)&&!f(n.valid_response.value)))}(t.question))return{automarkable:!1};if(t.response=t.response||{},n&&n.scoring_type){if(!o.a.contains(p,n.scoring_type))throw new u.a.InvalidScoringTypeException(t.question.type,n.scoring_type);return n.valid_response&&r.push(n.valid_response),n.alt_responses&&(r=r.concat(n.alt_responses)),function processResponsesCurrentScoringFormat(t,n){if("partialMatchPairwise"===t.question.validation.scoring_type)return function processResponsesPairwise(t,n){var r,i,a=t.question.validation,c=t.response.value||[],u=Math.abs(o.a.isNumber(a.penalty)?a.penalty:0),l=[];return o.a.each(n,(function(t){var n,i,a,p,f=o.a.isNumber(t.score)?t.score:1,d=t.value,h=f*t.value.length,v=0,g=0,y={};if(d){for((o.a.isUndefined(r)||h>r)&&(r=h),y.responsesValid=[],i=o.a.map(c,(function(t){return o.a.indexOf(d,t)})),a=0;a<i.length;a++)for(p=a+1;p<i.length;p++)g++,i[a]<i[p]&&v++;for(n=f*d.length*v/g,y.score=parseFloat((n-u*(d.length-d.length*v/g)).toFixed(5)),g&&(y.isValid=v>0),a=0;a<c.length;a++)y.responsesValid.push(d[a]==c[a]);l.push(y)}})),(i=o.a.max(l,(function(t){return t.score||0}))).maxScore=r,i}(t,n);var r={score:1,penaltyScore:0,rounding:"floor"};return u.a.scoreArray(t,n,r)}(t,r)}return function processLegacyResponsesPre2140(t){var n={score:1};return u.a.scoreList(t,n)}(t=u.a.normalizeParameters(t))}(JSON.parse(JSON.stringify(t))),u.a.normalizeScores(this.scoringData,t)}catch(t){this.scoringData={error:t}}this.serializedData=n}return this}}]),OrderListScorer}(l.a);var h=a.a.extend({initialize:function initialize(){a.a.prototype.initialize.apply(this,arguments),this.shuffleService=new c.a(this,{key:"list",shuffleOptions:{exclude:this.getAllValidResponseOrders()}})},getList:function getList(){return this.shuffleService.get("list")},processResponseValue:function processResponseValue(t){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").value=t},getAllValidResponseOrders:function getAllValidResponseOrders(){var t=this.get("question"),n=[];return o.a.getNested(t,"validation.valid_response.value")&&n.push(t.validation.valid_response.value),o.a.getNested(t,"validation.alt_responses")&&t.validation.alt_responses.forEach((function(t){n.push(t.value)})),n},getScorerClass:function getScorerClass(){return d},validateResponse:function validateResponse(){return this.getScorer().validateIndividualResponses()},getCorrectByIndex:function getCorrectByIndex(t){if(this.canValidateResponse())return this.get("question").list[this.getValidResponse().value[t]]}}),v=r(177),g=r(127),y=r.n(g),m=r(131),b=r(129),_=r(23),E=r(21),O={ORDERLIST_CHANGE_RESPONSE:"orderList:changeResponse"};var S={actionTypes:O,changeResponse:function changeResponse(t){return function(n,r,i){var o=i.dataService,a=pluckList(r,"key");n(_.a.clearValidationUI()),n({type:O.ORDERLIST_CHANGE_RESPONSE,payload:t}),n(_.a.updateAriaLiveData({message:o.getAriaLiveMessageForChange({startIndex:a.indexOf(t.key),endIndex:t.elIndex})}));var c=pluckList(r,"index");n(E.a.updateResponseValue(c))}}};function pluckList(t,n){var r=t().orderList.list;return o()(r).pluck(n)}var C=r(128),T=r.n(C),R=r(231),A=r(193),w=r(181);function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}var I=Object(R.a)((function Response(t){var n=t.response,r=t.displayType,i=t.isInline,a=t.validated,c=t.validationState,u=t.validationStemNumeration,l=t.domIndex,p=t.listLength,f=t.isShowingCorrectAnswers,d=t.i18n,h=n.value,v=n.plainText,g=n.showDragHandler,m=n.hasBlockElement,b=T()(function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}({lrn_correct:!0===a,lrn_incorrect:!1===a,lrn_sort_inline:i,lrn_sort_block:!i,lrn_inline_block:m&&"inline"===r},"lrn_".concat(r),!(m&&"inline"===r)),"lrn_btn_sort lrn_sortable",Object(A.c)(n)),_=T()({lrn_inline:i&&!m,lrn_inline_block:i&&m},"lrn_item"),E=g&&!i,O=c&&f,S=d.labels.itemPositionTemplate.replace("{num}",l+1).replace("{length}",p),C="";return o.a.isBoolean(a)&&(C=a?", correct":", incorrect"),y.a.createElement("div",_extends({className:b,"data-lrn-response-area":!0,"data-lrn-access-review-dest":!0},Object(A.b)(t),{"aria-label":"".concat(v,". ").concat(S).concat(C)}),O&&y.a.createElement(w.a,{index:l,validationStemNumeration:u}),E&&y.a.createElement("span",{className:"lrn_sort_gripper","aria-hidden":"true"},""),y.a.createElement("span",{ref:t.mathItemRef,className:_,"aria-hidden":"true",dangerouslySetInnerHTML:{__html:h}}))})),D=r(133);function standaloneSuggestions(){var t=this,n=this.props.validatable,r=n.suggestedResponses,i=n.validatedResponses,a=[];return o()(r.value).each((function(t,n){i&&!0!==i[n]&&a.push({response:t,index:n})})),o()(a).map((function(n){var r=n.response,i=n.index,o=r.value;return""===o&&(o="&nbsp;"),y.a.createElement("li",{key:i},t.getResponseIndex(i),y.a.createElement("span",{className:"lrn_responseText",dangerouslySetInnerHTML:{__html:o}}))}))}function EmbeddedSuggestion(t){var n=t.response,r=t.displayType,i=t.validationStemNumeration,o=t.i18n,a=t.domIndex;if(!n)return null;var c={validationStemNumeration:i,index:a,domProps:{"aria-hidden":!0}};return y.a.createElement("div",{className:"lrn_suggested_answer_item lrn_clearfix"},y.a.createElement("span",{className:"".concat("lrn_suggested lrn_btn_sort lrn_btn_no_handle lrn_disabled lrn_sort_block"," lrn_").concat(r)},y.a.createElement("span",{className:"sr-only"},Object(D.a)(o.labels.ariaLabel.stemEnumerationItem,{index:a+1})),y.a.createElement(w.a,c),y.a.createElement("span",{className:"lrn_item"},y.a.createElement("span",{className:"lrn_correct_answer_heading"},o.labels.correctAnswer,":"),y.a.createElement("span",{dangerouslySetInnerHTML:{__html:n.value}}))))}var P=r(224),N=r(232);function responseArea_typeof(t){return(responseArea_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function responseArea_extends(){return(responseArea_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function responseArea_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function responseArea_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function responseArea_setPrototypeOf(t,n){return(responseArea_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function responseArea_createSuper(t){var n=function responseArea_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=responseArea_getPrototypeOf(t);if(n){var o=responseArea_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return responseArea_possibleConstructorReturn(this,r)}}function responseArea_possibleConstructorReturn(t,n){if(n&&("object"===responseArea_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function responseArea_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function responseArea_getPrototypeOf(t){return(responseArea_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(t){!function responseArea_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&responseArea_setPrototypeOf(t,n)}(OrderListResponseAreaPlain,t);var n=responseArea_createSuper(OrderListResponseAreaPlain);function OrderListResponseAreaPlain(){return responseArea_classCallCheck(this,OrderListResponseAreaPlain),n.apply(this,arguments)}return function responseArea_createClass(t,n,r){return n&&responseArea_defineProperties(t.prototype,n),r&&responseArea_defineProperties(t,r),t}(OrderListResponseAreaPlain,[{key:"responses",value:function responses(){var t=this.props,n=t.list,r=t.isInline,i=t.isShowingCorrectAnswers,a=t.suggestedResponses,c=!r&&i,u=[];return o()(n).each((function(r,i){var l=function getResponseProps(t,n,r,i){var a=t.validatedResponses;return o()({}).extend(t,{validated:a&&a[n],domIndex:n,listLength:i,response:r})}(t,i,r,n.length);u.push(y.a.createElement(I,responseArea_extends({key:r.key},l))),c&&a&&!0!==l.validated&&(l.response=a.value[i],u.push(y.a.createElement(EmbeddedSuggestion,responseArea_extends({key:i},l))))})),u}},{key:"render",value:function render(){var t=this.props.isShowingCorrectAnswers?"lrn_display_correct_answer_enabled":"";return y.a.createElement("div",{className:"lrn_dragdrop ".concat(t)},this.responses())}}]),OrderListResponseAreaPlain}(y.a.Component);var x=Object(N.a)(L),k=Object(P.b)((function(t){var n=t.orderList,r=t.base,i=t.validatable,a=t.dragDropHandlers,c=t.isInline;return o.a.extend(o()(r).pick("readOnly","isReviewState","isPreviewState","disabled","inMaskingState","cacheRenderedMath","i18n"),o()(i).pick("isShowingCorrectAnswers","validationState","validatedResponses","suggestedResponses","validationStemNumeration"),n,{dragDropHandlers:a,isInline:c})}))(x),M=r(179);function orderList_typeof(t){return(orderList_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function orderList_extends(){return(orderList_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function orderList_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function orderList_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function orderList_setPrototypeOf(t,n){return(orderList_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function orderList_createSuper(t){var n=function orderList_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=orderList_getPrototypeOf(t);if(n){var o=orderList_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return orderList_possibleConstructorReturn(this,r)}}function orderList_possibleConstructorReturn(t,n){if(n&&("object"===orderList_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return orderList_assertThisInitialized(t)}function orderList_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function orderList_getPrototypeOf(t){return(orderList_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function orderList_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var V=M.a.ValidatableQuestion,j=M.a.SuggestedAnswersList,z=M.a.ResponseInput,B=function(t){!function orderList_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&orderList_setPrototypeOf(t,n)}(OrderListDumb,t);var n=orderList_createSuper(OrderListDumb);function OrderListDumb(){var t;orderList_classCallCheck(this,OrderListDumb);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return orderList_defineProperty(orderList_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"dragDropHandlers",{onChange:function onChange(n){t.props.orderListActions.changeResponse(n)},onInteraction:function onInteraction(){t.props.validatableActions.clearValidationUI()}}),t}return function orderList_createClass(t,n,r){return n&&orderList_defineProperties(t.prototype,n),r&&orderList_defineProperties(t,r),t}(OrderListDumb,[{key:"isInline",get:function get(){return"inline"===this.props.orderList.displayType}},{key:"render",value:function render(){var t=this.props,n=this.dragDropHandlers,r=this.isInline,i=t.validatable,o=t.base.i18n.labels.ariaLabel;return y.a.createElement(V,{validatable:i},y.a.createElement("div",{className:"sr-only"},o.orderList.instructions),y.a.createElement(z,{options:{className:"lrn-response-validate-wrapper lrn_response_input"},validatable:i},y.a.createElement(k,orderList_extends({dragDropHandlers:n,isInline:r},t))),r&&y.a.createElement(j,{customListItems:standaloneSuggestions}))}}]),OrderListDumb}(y.a.Component),F=b.b((function(t){return{base:t.base,validatable:t.validatable,orderList:t.orderList}}),(function(t){return{orderListActions:m.b(S,t),validatableActions:m.b(_.a,t)}}))(B),H=r(56),W=r(17),G=r.n(W),U=r(135),$=r(132);function dataService_typeof(t){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dataService_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _get(t,n,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,n,r){var i=function _superPropBase(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=dataService_getPrototypeOf(t)););return t}(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(t,n,r||t)}function dataService_setPrototypeOf(t,n){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function dataService_createSuper(t){var n=function dataService_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=dataService_getPrototypeOf(t);if(n){var o=dataService_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return dataService_possibleConstructorReturn(this,r)}}function dataService_possibleConstructorReturn(t,n){if(n&&("object"===dataService_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return dataService_assertThisInitialized(t)}function dataService_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dataService_getPrototypeOf(t){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=function(t){!function dataService_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&dataService_setPrototypeOf(t,n)}(OrderListDataService,t);var n=dataService_createSuper(OrderListDataService);function OrderListDataService(t,r){var i;!function dataService_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,OrderListDataService);var a=t.get("question");return o.a.isString(a.ui_style)&&(a.ui_style={type:a.ui_style}),t.set("question",a),function dataService_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(dataService_assertThisInitialized(i=n.call(this,t,r)),"UI_TYPES",["button","list","inline"]),i}return function dataService_createClass(t,n,r){return n&&dataService_defineProperties(t.prototype,n),r&&dataService_defineProperties(t,r),t}(OrderListDataService,[{key:"getInitialState",value:function getInitialState(){var t=_get(dataService_getPrototypeOf(OrderListDataService.prototype),"getInitialState",this).call(this);return o.a.extend(t,{orderList:{list:this.list,displayType:this.displayType,responseValue:this.getResponseValue()}})}},{key:"getValidatedResponses",value:function getValidatedResponses(){return this.model.validateResponse()}},{key:"getAriaLiveMessage",value:function getAriaLiveMessage(t){var n=this.getValidatedResponses(),r=this.getSuggestedResponses(),i=this.activity.get("i18n").labels.ariaLiveText.orderList,a=this.VALIDATION_STATES,c=a.CORRECT,u=a.INCORRECT,l="";return o.a.all(n)||o()(this.list).each((function(o,a){var p=(a+1).toString(),f=n[a],d=f?c:u;if(l+=Object(D.a)(i.itemValidity,{index:p,response:o.plainText,validity:d}),t&&!f){var h=r.value[a];l+=Object(D.a)(i.correctAnswer,{index:p,text:h.plainText})}})),l}},{key:"getAriaLiveMessageForChange",value:function getAriaLiveMessageForChange(t){var n=t.startIndex,r=t.endIndex;return this.activity.get("i18n").labels.orderListChangeTemplate.replace("{start}",n+1).replace("{end}",r+1)}},{key:"getResponseValue",value:function getResponseValue(){return this.model.getResponseValue()}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var t=this.list,n=o.a.deepClone(_get(dataService_getPrototypeOf(OrderListDataService.prototype),"getSuggestedResponses",this).call(this));return n.value=o()(n.value).map((function(n){return o.a.findWhere(t,{index:n})})),n}},{key:"list",get:function get(){var t=this;if(o.a.isUndefined(this.data.list)){var n=this.question.list||[],r=this.getResponseValue();if(!r){var i=this.model.getList(),a=o.a.clone(n),c=a.join("");r=o()(i).map((function(t){var n=a.indexOf(t);return a[n]=o.a.uniqueId(c),n}))}this.data.list=o()(r).map((function(r){var i=n[r]||"",a=G.a.sanitizeHTML(i),c=t.activity.get("disable_spokenmath_distractors"),u=Object($.c)(i);return{index:r,defaultValue:i,value:a,label:a,plainText:U.a.getText(i,t.isMath,c),showDragHandler:t.showDragHandle,key:o.a.uniqueId("k"),hasBlockElement:u}}))}return this.data.list}},{key:"displayType",get:function get(){if(o.a.isUndefined(this.data.displayType)){var t=o.a.getNested(this.question,"ui_style.type");"bulletlist"!==t&&"plainlist"!==t||(t="list"),this.data.displayType=o()(this.UI_TYPES).contains(t)?t:"button"}return this.data.displayType}},{key:"showDragHandle",get:function get(){if(o.a.isUndefined(this.data.showDragHandle)){var t=o.a.getNested(this.question,"ui_style.show_drag_handle");this.data.showDragHandle=!o.a.isBoolean(t)||t}return this.data.showDragHandle}},{key:"extraClassNames",get:function get(){return{response:"lrn_style_".concat(this.displayType)}}}]),OrderListDataService}(H.a);q.prototype.EXPOSED_METHODS=H.a.prototype.EXPOSED_METHODS.concat(["getAriaLiveMessageForChange"]);var K,Y=q,Q=r(25);function reducer_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var Z=(reducer_defineProperty(K={},S.actionTypes.ORDERLIST_CHANGE_RESPONSE,(function(t,n){var r=t.list,i=n.keys;return r.sort((function(t,n){return i.indexOf(t.key)-i.indexOf(n.key)})),{list:r}})),reducer_defineProperty(K,E.a.actionTypes.QUESTION_CACHE_RENDERED_MATH,(function(t,n){var r=t.list,i=n.mathInResponse,a=i.index,c=i.html,u=o()(r).findWhere({index:a});return u.value=u.label=c,{list:r}})),K),X=Object(Q.a)(Z,{responseValue:[]}),J=v.a.extend({maskable:!1,ViewComponent:F,DataService:Y,getReducers:function getReducers(){var t=v.a.prototype.getReducers.apply(this,arguments);return o.a.extend(t,{orderList:X})}});n.default={View:J,Model:h}}}]);