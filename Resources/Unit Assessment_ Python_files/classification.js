(window.LearnosityAmd=window.LearnosityAmd||[]).push([[57],{135:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(17),c=r.n(a),l=r(36),u=r(133),p={CORRECT:"correct",INCORRECT:"incorrect",VALID:"valid"},f={globalText:function globalText(t,n){return t===p.CORRECT?n.correctResponse:t===p.INCORRECT?n.incorrectResponse:""},correctText:function correctText(t,n){var r="";if(!o.a.isEmpty(t)){var i=t.length;r+=i>1?Object(u.a)(n.numberOfCorrectAnswers,{number:i}):n.oneCorrectAnswer}return r+=o.a.pluck(t,"text").join(", ")},incorrectText:function incorrectText(t,n){var r="";if(!o.a.isEmpty(t)){var i=t.length;r+=i>1?Object(u.a)(n.numberOfIncorrectAnswers,{number:i}):n.oneIncorrectAnswer}return r+=o.a.pluck(t,"text").join(", ")},suggestedResponsesText:function suggestedResponsesText(t,n,r){var i="";if(t=o.a.filter(t,(function(t){return!o.a.findWhere(n,{text:t.text})})),!o.a.isEmpty(t)){var a=t.length;i+=a>1?Object(u.a)(r.numberOfExpectedAnswers,{number:a}):r.oneExpectedAnswer}return i+=o.a.pluck(t,"text").join(", ")}};function getGlobalAccessibility(t,n){var r=t===p.CORRECT?n?Object(u.a)(n.correctResponse):"response - correct":t===p.INCORRECT?n?Object(u.a)(n.incorrectResponse):"response - incorrect":void 0;return{label:r,visible:o.a.isString(r)}}function getText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=c.a.stripHTML(c.a.createImageDescriptions(t),!1);if(n&&!r){var a=i.match(/\\\(\S*?\\\)/g)||[];a=a.concat(i.match(/\\\[\S*?\\]/g)||[]),o.a.each(a,(function(t){var n=t.replace("\\(","").replace("\\)","").replace("\\[","").replace("\\]",""),r="";l.a.translateOrEmptyString(n,(function(t){return r=t})),i=i.replace(t,r)}))}return i}n.a={STATES:p,ariaContentFunctions:f,getGlobalAccessibility:getGlobalAccessibility,getResponseAccessibility:function getResponseAccessibility(t){var n=t.value,r=t.state,i=t.isMath,a=t.validationState,c=t.ariaLiveLabels,l=t.minSelection,f=t.maxSelection,d=t.isMinSelectionWarningVisible,h=void 0!==d&&d,v=t.isMaxSelectionWarningVisible,y=void 0!==v&&v,g=t.disableSpokenmathDistractors,m=void 0!==g&&g,b=h||y,_=getGlobalAccessibility(a,c).visible||b,E=o.a.isFunction(r)?r():r,O=_&&n?getText(n,i,m):null;return{label:function(){if(_){var t=p.CORRECT,n=p.INCORRECT,r=p.VALID,i=O?"".concat(O," - "):"",o=l>1?c.minResponsesMessage:c.minResponseMessage,a=f>1?c.maxResponsesMessage:c.maxResponseMessage;return E===t?Object(u.a)(c.correct,{prefix:i}):E===n?Object(u.a)(c.incorrect,{prefix:i}):E===r?Object(u.a)(c.missed,{prefix:i}):y?Object(u.a)(a,{prefix:i,maxSelection:f}):h?Object(u.a)(o,{prefix:i,minSelection:l}):Object(u.a)(c.noResponseGiven,{prefix:i})}}(),visible:_}},getResponseState:function getResponseState(t,n){return o.a.isNull(t)&&o.a.isNull(n)?null:o.a.isString(t)&&n?p.CORRECT:o.a.isString(t)&&!n?p.INCORRECT:o.a.isNull(t)&&!n?p.VALID:void 0},getText:getText,getAriaLabelFromAllElements:function getAriaLabelFromAllElements(t){var n=document.createElement("div");return n.innerHTML=t,function stripElementContent(t){return t.map((function(t){if(t.attributes&&t.attributes.alt)return"Image with alt text: ".concat(t.attributes.alt.value);if(t.attributes&&t.attributes["aria-label"])return t.attributes["aria-label"].value;if(t.children){var n=[].slice.call(t.childNodes);return stripElementContent(n).join(" ")}return t.textContent}))}([].slice.call(n.childNodes)).join(", ")}}},138:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a={"lower-alpha":"a","upper-alpha":"A",number:1};n.a=function stemNumerationHelper(t,n){if(!t)return"";var r=a[t];return n=o.a.isNumber(n)?n:parseInt(n,10),"string"==typeof r?String.fromCharCode(r.charCodeAt(0)+n):"number"==typeof r?(r+n).toString():void 0}},140:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(131),u=r(129),p=r(21);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function renderFeatures(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.features,a=r.removeOnComplete;return o.a.isEmpty(i)?null:c.a.createElement("div",{className:n},o.a.map(i,(function(t,n){var r=!!t._last;return(c.a.createElement(f,{key:n,feature:t,isLastFeature:r,removeOnComplete:a}))})))}var f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(EmbeddedFeature,t);var n=_createSuper(EmbeddedFeature);function EmbeddedFeature(){return _classCallCheck(this,EmbeddedFeature),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(EmbeddedFeature,[{key:"render",value:function render(){var t=this;return(c.a.createElement("div",{ref:function ref(n){return t.el=n}}))}},{key:"componentDidMount",value:function componentDidMount(){var t=this.props,n=t.feature,r=t.baseActions,i=t.isLastFeature,o=t.removeOnComplete;r.legacyRenderEmbeddedFeature({feature:n,isLastFeature:i,removeOnComplete:o,el:this.el})}}]),EmbeddedFeature}(c.a.Component);f=u.b(null,(function(t){return{baseActions:l.b(p.a,t)}}))(f),n.a={VerticalFeatures:function VerticalFeatures(t){return renderFeatures(t,"lrn_stimulus_features_vertical")},OverlayFeatures:function OverlayFeatures(t){return renderFeatures(t,"lrn_stimulus_features_overlay",{removeOnComplete:!0})}}},141:function(t,n,r){"use strict";var i={};function clear(t){var n=i[t];n&&(clearTimeout(n),delete i[t])}n.a={start:function start(t,n){var r=arguments,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;clear(t);var a=function repeatFn(){n(),start.apply(null,r)};i[t]=setTimeout(a,o)},clear:clear}},145:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(128),c=r.n(a),l=r(127),u=r.n(l),p=r(129),f=r(140),d=r(154),h=r(7),v=r(155);function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach((function(n){_defineProperty(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}var y={XSMALL:{className:"lrn-xs",minWidth:0},SMALL:{className:"lrn-sm",minWidth:481},MEDIUM:{className:"lrn-md",minWidth:801},LARGE:{className:"lrn-lg",minWidth:1200}};function ResponsiveWidget(t){if(!t.responsive)return t.children;return u.a.createElement(v.a.Detector,{onChange:function onSizeChange(n){var r=o.a.chain(y).filter((function(t){return t.minWidth<=n.width})).pluck("className").value().join(" ");t.onChange&&t.onChange(_objectSpread(_objectSpread({},n),{},{responsiveClassName:r}))}},t.children)}var g=function applyResponsiveWidgetLayout(t){var n;t.state=o.a.extend({},t.state,{dimensions:{width:0,height:0},layoutMode:"split"}),t.render=function(){var r=t.baseClassName,i=t.state,a=t.props.base,c=a.responseId,l=a.widgetLayout,p=function getLayoutData(t,n){if("stack"===t){return{layoutClassName:"",elements:o.a.map(n,(function(t){return{type:t.type,width:"",paddingLeft:"",paddingRight:""}}))}}return{layoutClassName:"clearfix",elements:n}}(i.layoutMode,l.elements),f=p.elements,d=p.layoutClassName;return n||(n=o.a.findWhere(l.elements,{type:"interaction"})),u.a.createElement(v.a.Detector,{onChange:function onChange(r){return function onComponentResize(t,n,r){var i,o=n.width,a=t.state.layoutMode,c=(i=r.width||50,o*i/100<400?"stack":"split");c!==a&&t.setState({layoutMode:c})}(t,r,n)}},u.a.createElement("div",{id:c,className:"".concat(r," ").concat(d)},t.getInstructorStimulus(),o.a.map(f,(function(n,r){return u.a.createElement(v.a.Column,_extends({key:r},n),function getChildComponent(n){return"stimulus"===n?t.getStimulus():t.getQuestionContent()}(n.type))}))))}};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function baseQuestion_extends(){return(baseQuestion_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function baseQuestion_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var m=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(BaseQuestion,t);var n=_createSuper(BaseQuestion);function BaseQuestion(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,BaseQuestion),baseQuestion_defineProperty(_assertThisInitialized(r=n.call(this,t)),"state",{}),baseQuestion_defineProperty(_assertThisInitialized(r),"onSizeChange",(function(t){var n=t.responsiveClassName;r.setState({responsiveClassName:n})})),o.a.getNested(t,"base.widgetLayout.enabled")&&g(_assertThisInitialized(r)),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(BaseQuestion,[{key:"render",value:function render(){var t=this.baseClassName,n=this.props.base.responseId;return u.a.createElement(ResponsiveWidget,{responsive:this.props.responsive,onChange:this.onSizeChange},u.a.createElement("div",{id:n,className:t},this.getInstructorStimulus(),this.getStimulus(),this.getQuestionContent()))}},{key:"baseClassName",get:function get(){var t=this.props.base,n=t.questionType,r=t.fontSizeClass,i=t.inMaskingState;return c()({"lrn-masking":i,"lrn-ie":"ie"===h.a.browser,"lrn-ios":h.a.isIOS},r,this.state.responsiveClassName,"lrn lrn_widget lrn_qr lrn_clearfix lrn_".concat(n," ").concat(r))}},{key:"getQuestionContent",value:function getQuestionContent(){var t=this.props,n=t.base,r=t.children,i=n.stimulus,a=n.extraClassNames||{},c={responseWrapper:"lrn_response_wrapper ",response:"lrn_response lrn_clearfix "},l=o.a.getNested(n,"__legacyAttributes.extraClassNames")||{};return l.lrn_response_wrapper&&(c.responseWrapper+=l.lrn_response_wrapper),l.lrn_response&&(c.response+=l.lrn_response),c.responseWrapper+=a.responseWrapper||"",c.response+=a.response||"",u.a.createElement("div",{className:c.responseWrapper},u.a.createElement(f.a.OverlayFeatures,{features:i.legacyOverlayFeatures}),u.a.createElement("div",{className:c.response},r))}},{key:"getStimulus",value:function getStimulus(){var t=this.props.base,n=t.stimulus,r=t.stimulusReview,i=t.isReviewState,o=t.responseId,a=i&&r.visible?r:n;return u.a.createElement(d.a.Stimulus,baseQuestion_extends({},a,{responseId:o}))}},{key:"getInstructorStimulus",value:function getInstructorStimulus(){var t=this.props.base.stimulusInstructor;return(u.a.createElement(d.a.InstructorStimulus,t))}}]),BaseQuestion}(u.a.Component);m=p.b((function(t){return{base:t.base}}),null)(m);n.a=m},146:function(t,n,r){"use strict";var i=r(1),o=r.n(i),a=r(0),c=r.n(a),l=(r(54),document),u=o()("body");function unwatch(t){l.unbindLeave&&l.unbindLeave(t)}n.a={watch:function watch(t,n){u.find(t).length&&l.leave&&l.leave(t,c.a.debounce((function(){u.find(t).length||(n(),unwatch(t))}),10))},unwatch:unwatch}},147:function(t,n,r){"use strict";r.d(n,"a",(function(){return o}));var i=r(127);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Wrapper,t);var n=_createSuper(Wrapper);function Wrapper(){return _classCallCheck(this,Wrapper),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Wrapper,[{key:"render",value:function render(){return this.props.children}}]),Wrapper}(r.n(i).a.PureComponent)},148:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(5),c=r.n(a),l=r(127),u=r.n(l),p=r(130),f=r.n(p),d=r(131),h=r(129),v=r(192),y=r(55),g=r(21),m=r(57),b=r(31),_=r(37),E=r(38),O=r(146),C=r(150),S=r(147);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}var R=c.a.View.extend({initialize:function initialize(){var t=this;this._responseId=this.model.get("response_id"),this.activity=this.options.activity,this.remove=this.remove.bind(this),this.initialisationCompleted=this.initialisationCompleted.bind(this);var n=this.getDataService();this.addFacadeMethods(this.getFacade()),n.prepare((function(){t.setLegacyAttributes(),t.render(),t.initialisationCompleted(),O.a.watch('[id="'.concat(t._responseId,'"]'),t.remove)}))},update:function update(){var t=this,n=this.getDataService(),r=this.getStore(),i=o.a.extend({},n.getInitialState()),a=this.widgetInstance;a&&o.a.isFunction(a.reset)&&a.reset(),r.dispatch({type:"UPDATE_ALL",payload:{data:i}}),this.prepareStoreState(),this.setLegacyAttributes();var c=g.a.renderMathIfRequired({success:function success(){t.onMathRendered()}});r.dispatch(c)},getDataService:function getDataService(){if(!this._dataService){var t=this.DataService;this._dataService=new t(this.model,this.getFacade())}return this._dataService},getStore:function getStore(){if(!this._store){var t=this.getDataService(),n=this.getReducers(),r=this.getMiddleware();o.a.each(n,(function(t,n){var r=t.setName;r&&r(n)})),this._store=Object(d.d)(Object(d.c)(n),t.getInitialState(),Object(C.a)(d.a.apply(void 0,_toConsumableArray(r)))),this.prepareStoreState()}return this._store},getMiddleware:function getMiddleware(){var t=this;return[v.a.withExtraArgument(this.getThunkServices()),function legacyMiddleWare(n){return function(n){return function(r){return r.type===g.a.actionTypes.QUESTION_LEGACY_BEGIN_RESPONSE&&t.beginResponse(),n(r)}}}]},getThunkServices:function getThunkServices(){var t=this;return{dataService:this.getDataService().getFacade(),mathService:this.getMathService(),simplefeatureService:{render:function renderViewSimpleFeatures(){return t.options.services.renderViewSimpleFeatures(t)}}}},getReducers:function getReducers(){return{base:y.a}},render:function render(){if(this.component)try{this.el&&f.a.unmountComponentAtNode(this.el)}catch(t){}else{var t=document.createElement("div");this.$el.replaceWith(t),this.setElement(t),this.$el.attr("data-lrn-widget-container",this._responseId).attr("data-lrn-widget-type","question")}return this.renderComponent()},renderComponent:function renderComponent(){var t=this,n=this.getStore(),r=this.ViewComponent,i=!0===this.forwardRef?u.a.createElement(r,{ref:function ref(n){return t.widgetInstance=n}}):u.a.createElement(r,null);return new Promise((function(r){f.a.render(u.a.createElement(S.a,{ref:function ref(n){return t.component=n}},u.a.createElement(h.a,{store:n},i)),t.el,r)}))},remove:function remove(){if(!this._removed){try{var t=f.a.findDOMNode(this.component);t&&!this.$el.find(t).length&&this.$el.append(t),this.el&&(this._unmounted=f.a.unmountComponentAtNode(this.el))}catch(t){}c.a.View.prototype.remove.call(this),O.a.unwatch('[id="'.concat(this._responseId,'"]')),this._removed=!0}},renderSimpleFeatures:function renderSimpleFeatures(t){return _.a.renderSimpleFeatures.call(this,this.$el,this.activity,t)},initialisationCompleted:function initialisationCompleted(){var t=this.getMathService(),n=this.options.mathRenderPromise;t.mathquillRendering()&&(n=t.renderMathquill()),n&&n.then(this.onMathRendered.bind(this)),this.imageLoader=new E.a({element:this.el}),this.imageLoader.loadImages(),this.options.initialisationCallback&&o.a.defer(this.options.initialisationCallback)},prepareStoreState:function prepareStoreState(){},getFacade:function getFacade(){if(o.a.isUndefined(this.questionFacade)){var t=new m.a(this).facade;this.questionFacade=t}return this.questionFacade},addFacadeMethods:function addFacadeMethods(t){},getMathService:function getMathService(){return o.a.isUndefined(this._mathService)&&(this._mathService=new b.a(this,"question")),this._mathService},setLegacyAttributes:function setLegacyAttributes(){var t=this.__legacyAttributes,n=g.a.setLegacyAttributes(t);this.getStore().dispatch(n)},onMathRendered:function onMathRendered(){var t=this.cacheRenderedMath.bind(this);this.getStore().dispatch(g.a.notifyMathRendered({cacheRenderedMath:t}))},cacheRenderedMath:function cacheRenderedMath(t){t&&this.getStore().dispatch(g.a.cacheRenderedMath({mathInResponse:t}))},setDisabled:function setDisabled(t){var n=this.activity.get("state"),r=this.activity.STATE,i=[r.INITIAL,r.RESUME],a=this.getStore().getState().base.disabled;return!(!o.a.contains(i,n)||a===t)&&(t?this.undelegateEvents():this.delegateEvents(),this.getStore().dispatch(g.a.setDisabled(t)),!0)},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},masking:function masking(t,n){this.getStore().dispatch(g.a.setMaskingState(t,n))},reset:function reset(){this.getFacade().trigger("reset")}});n.a=R},150:function(t,n,r){"use strict";var i;i=function composeWithDevTools(t){return t},n.a=i},154:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(140),c=r(127),l=r.n(c);n.a={Stimulus:function Stimulus(t){if(!t.visible)return null;var n=t.responseId;return l.a.createElement("div",{className:"lrn_question"},l.a.createElement("div",{className:"lrn_stimulus lrn_clearfix"},l.a.createElement("div",{className:"lrn_stimulus_content lrn_clearfix",dangerouslySetInnerHTML:{__html:t.content},id:"stimulus-".concat(n)}),function renderLegacyVerticalFeatures(){var n=t.legacyVerticalFeatures,r=t.legacyEvents,i=t.i18n;if(!o.a.isEmpty(n))return l.a.createElement(a.a.VerticalFeatures,{features:n,i18n:i,events:r})}()))},InstructorStimulus:function InstructorStimulus(t){return t.visible?l.a.createElement("div",{className:"lrn_question"},l.a.createElement("div",{className:"lrn-instructor-stimulus"},l.a.createElement("div",{className:"lrn_clearfix"},l.a.createElement("div",{className:"lrn-instructor-stimulus-content",dangerouslySetInnerHTML:{__html:t.content}})))):null}}},155:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(40),c=r.n(a),l=r(127),u=r.n(l),p=r(130),f=r.n(p),d=r(24);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Detector,t);var n=_createSuper(Detector);function Detector(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,Detector),function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(_assertThisInitialized(r=n.call(this,t)),"onWrapperSizeChange",o.a.debounce((function(){var t=_assertThisInitialized(r),n=t.onChange,i=t.el;n&&i&&!r._unmounted&&n({width:i.offsetWidth,height:i.offsetHeight})}),400)),o.a.isFunction(t.onChange)&&(r.onChange=t.onChange),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Detector,[{key:"componentDidMount",value:function componentDidMount(){var t=this;this.el=f.a.findDOMNode(this),this.resizeSensor=Object(d.a)(this.el,(function(){return new c.a(t.el,t.onWrapperSizeChange)})),this.onWrapperSizeChange()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,this.resizeSensor.detach(this.onWrapperSizeChange),this.el=null}},{key:"render",value:function render(){var t=this.props.children;return u.a.Children.only(t)}}]),Detector}(u.a.PureComponent);n.a={Detector:h,Column:function Column(t){var n=function(t){var n=function formatValue(t){return t?"".concat(t,"%"):""},r=t.width,i=t.paddingLeft,o=t.paddingRight;return{width:n(r),paddingLeft:n(i),paddingRight:n(o),float:r?"left":""}}(t);return(u.a.createElement("div",{style:n},t.children))}}},156:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(175);function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function ShuffleService(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ShuffleService),this.model=t,this.options=r,t.ready?this.initialize(t,r):t.once(t.EVENT.READY,(function(){n.initialize(t,r)}))}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ShuffleService,[{key:"initialize",value:function initialize(t,n){var r=this;if(delete this.optionOrder,delete this._canShuffleOnDemand,this._getQuestion().shuffle_options){var i=n.key,a=n.shuffleOptions,c=n.mapValueRequired;if(o.a.isUndefined(i))return void(this._canShuffleOnDemand=!0);t.get("isDynamicContent")&&t.on("dynamicContent:changed",(function(){r._setShuffledOrder(i,a)})),this._setShuffledOrder(i,a),c&&this._attachShuffledOptionsMapHandler()}}},{key:"reInitialize",value:function reInitialize(){this.initialize(this.model,this.options)}},{key:"get",value:function get(t){return t=t||this.options.key,this.optionOrder?this._reOrderOptions(t,this.optionOrder):o.a.clone(o.a.getNested(this._getQuestion(),t))}},{key:"getDynamicSeed",value:function getDynamicSeed(){var t=this.model,n=t.get("response_id");return t.get("isDynamicContent")?"".concat(n,"_dynamic_").concat(t.get("dynamicContentRowId")):n}},{key:"getOrderedData",value:function getOrderedData(t){return this._canShuffleOnDemand&&!o.a.isEmpty(t)?this._shuffleArrayOnDemand(t):t}},{key:"mapShuffledOptionsValue",value:function mapShuffledOptionsValue(t,n){return o.a.isArray(t)&&o.a.isArray(n)&&n.length===t.length?o.a.map(n,(function(r,i){var o=t.indexOf(i);return n[o]})):n}},{key:"mapValueBasedOnOptionOrder",value:function mapValueBasedOnOptionOrder(t){var n=this.optionOrder;if(o.a.isArray(n)&&o.a.isArray(t)){var r=t&&t.length,i=n&&n.length;if(r<i)for(var a=0;a<i-r;a++)t.push(void 0);else t.slice(0,i);return o.a.map(n,(function(n){return t[n]}))}return t}},{key:"_getQuestion",value:function _getQuestion(){return this.model.get("question")}},{key:"_attachShuffledOptionsMapHandler",value:function _attachShuffledOptionsMapHandler(){var t=this,n=this.question,r=this.options,i=this.model,a=r.key,c=r.mapShuffledOptionsValue||this.mapShuffledOptionsValue,l=o.a.getNested(n,a),u="review"===o.a.getNested(i,"activityOptions.state");i.updateResponseValue=o.a.wrap(i.updateResponseValue,(function(n,r,o){u||(r=c(t.optionOrder,r,l)),n.call(i,r,o)})),i.getResponseValue=o.a.wrap(i.getResponseValue,(function(n){return t.mapValueBasedOnOptionOrder(n.call(i))})),i.mapValidationMetadataToResponseState=o.a.wrap(i.mapValidationMetadataToResponseState,(function(n,r){return r.metadata=t.mapValueBasedOnOptionOrder(r.metadata),n.call(i,r)}));var p=i.getScorer();p&&(p.suggestedResponse=o.a.wrap(p.suggestedResponse,(function(n){var r=n.call(p);return r&&r.value?o.a.extend({},r,{value:t.mapValueBasedOnOptionOrder(r.value)}):r})),p.validateIndividualResponses=o.a.wrap(p.validateIndividualResponses,(function(n){return t.mapValueBasedOnOptionOrder(n.call(p))})))}},{key:"_setShuffledOrder",value:function _setShuffledOrder(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.model;r.hasResponse()&&r.get("response").order?this.optionOrder=this.get("response").order:this.optionOrder=this._getShuffleOrder(this._getOptionsToShuffle(t),n)}},{key:"_shuffleArrayOnDemand",value:function _shuffleArrayOnDemand(t){var n=this._getShuffleOrder(t),r=o.a.clone(t);return o.a.map(n,(function(t){return r[t]}))}},{key:"_getShuffleOrder",value:function _getShuffleOrder(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.a.range(t.length);return Object(a.a)({exclusions:n.exclude,questionMetadata:this.model.getMetadata(),originalOrder:r,seed:this.getDynamicSeed()})}},{key:"_getOptionsToShuffle",value:function _getOptionsToShuffle(t){return o.a.getNested(this._getQuestion(),t)}},{key:"_reOrderOptions",value:function _reOrderOptions(t,n){var r=this;return o.a.map(n,(function(n){return r._getOptionsToShuffle(t)[n]}))}}]),ShuffleService}();n.a=c},158:function(t,n,r){"use strict";r.d(n,"a",(function(){return defineGetters}));var i=r(0),o=r.n(i);function defineGetters(t,n){o.a.each(n,(function(n,r){n=n.bind(t),Object.defineProperty(t,r,{get:n})}))}},172:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(131),u=r(129),p=r(135),f=r(23);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(AriaLiveRegion,t);var n=_createSuper(AriaLiveRegion);function AriaLiveRegion(t){var r;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,AriaLiveRegion),function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(_assertThisInitialized(r=n.call(this,t)),"reset",(function(){r.props.validatableActions.clearValidationAriaLive(),document.removeEventListener("focusin",r.reset),r._focusEventAdded=!1}));var i=t.contentFunctions;return r.contentFunctions=o.a.extend({},p.a.ariaContentFunctions,i),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(AriaLiveRegion,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){this.shouldBeVisible(t)&&!this._focusEventAdded&&(document.addEventListener("focusin",this.reset),this._focusEventAdded=!0)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._focusEventAdded=!1,document.removeEventListener("focusin",this.reset)}},{key:"render",value:function render(){var t=this.shouldBeVisible(this.props);return(c.a.createElement("div",{className:"lrn-accessibility-arialive","aria-live":"assertive","aria-atomic":"true"},t&&this.buildContent()))}},{key:"shouldBeVisible",value:function shouldBeVisible(t){var n=t.base,r=t.validatable,i=n.isReviewState,o=r.ariaLive;return!i&&o.visible}},{key:"buildContent",value:function buildContent(){var t=this.props.validatable,n=this.props.base.i18n.labels.ariaLiveText,r=t.ariaLive,i=this.contentFunctions,o=i.globalText,a=i.correctText,c=i.incorrectText,l=i.suggestedResponsesText,u=[],p=function appendText(t){t&&u.push(t)};return p(o(t.validationState,n)),r.message?p(r.message):(p(a(r.correct,n)),p(c(r.incorrect,n)),p(n.selected),p(l(r.suggestedResponses,r.correct,n))),u.join(". ")}}]),AriaLiveRegion}(c.a.Component);d=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{validatableActions:{clearValidationAriaLive:l.b(f.a.clearValidationAriaLive,t)}}}))(d),n.a={AriaLiveRegion:d,ScreenReaderAriaText:function ScreenReaderAriaText(t){var n=t.data;return n.visible?c.a.createElement("span",{className:"lrn-accessibility-label"},n.label):null},GlobalValidationLabel:function GlobalValidationLabel(t){var n=t.label;return(c.a.createElement("div",{className:"sr-only"},n))}}},175:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(176),c=r.n(a),l=r(18),u=function ShuffledArray(t,n){this.unshuffled=t,this.seed=n||ShuffledArray.generateSeed(),this.value=ShuffledArray.shuffle(this.unshuffled,this.seed)};u.create=function(t,n){return new u(t,n)},u.generateSeed=function(){return l.a.v4()},u.shuffle=function(t,n){var r,i,o,a,l;for(u.validate(t,n),r=t.slice(0),i=t.length,l=new c.a(n);i;)a=Math.floor(l()*i),o=r[i-=1],r[i]=r[a],r[a]=o;return r},u.validate=function(t,n){if(!o.a.isArray(t))throw new Error("ShuffledArray: must have an array as a first argument, but was: "+JSON.stringify(t));if(!o.a.isString(n))throw new Error("ShuffledArray: seed must be a string, but was: "+JSON.stringify(n));if(!n.length)throw new Error("ShuffledArray: seed must have a length, but was: "+JSON.stringify(n))};var p=u;function shuffleOrder(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.exclusions||[],r=p.shuffle(t.originalOrder,t.seed),i=o.a.range(20).map((function(t){return t.toString()})),a=r,c=t.seed,l=1,u=0;l<=20&&orderIsAnExclusion(a,n);)c+=i[u],a=p.shuffle(t.originalOrder,c),l++,u++;return orderIsAnExclusion(a,n)&&(a=r),a}function orderIsAnExclusion(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.a.any(n,(function(n){return o.a.isEqual(t,n)}))}n.a=function shuffleOrderWithQuestionSeed(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.exclusions,r=t.questionMetadata,i=void 0===r?{}:r,o=t.originalOrder,a=i.response_shuffle_seed||t.seed;return shuffleOrder({exclusions:n,originalOrder:o,seed:a})}},176:function(t,n,r){var i;void 0===(i=function(){"use strict";return function(t){var n=window,r=Math.pow(256,6),i=Math.pow(2,52),o=2*i;function ARC4(t){var n,r=t.length,i=this,o=0,a=i.i=i.j=0,c=i.S=[];for(r||(t=[r++]);o<256;)c[o]=o++;for(o=0;o<256;o++)c[o]=c[a=255&a+t[o%r]+(n=c[o])],c[a]=n;(i.g=function(t){for(var n,r=0,o=i.i,a=i.j,c=i.S;t--;)n=c[o=255&o+1],r=256*r+c[255&(c[o]=c[a=255&a+n])+(c[a]=n)];return i.i=o,i.j=a,r})(256)}function copy(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function mixkey(t,n){for(var r,i=t+"",o=0;o<i.length;)n[255&o]=255&(r^=19*n[255&o])+i.charCodeAt(o++);return tostring(n)}function tostring(t){return String.fromCharCode.apply(0,t)}return mixkey(Math.random(),t),function seedrandom(a,c,l){var u,p,f,d=[];return u=mixkey(function flatten(t,n){var r,i=[],o=typeof t;if(n&&"object"==o)for(r in t)try{i.push(flatten(t[r],n-1))}catch(t){}return i.length?i:"string"==o?t:t+"\0"}((c=1==c?{entropy:!0}:c||{}).entropy?[a,tostring(t)]:null==a?function autoseed(){var r,i,o;try{return r=new Uint8Array(256),(n.crypto||n.msCrypto).getRandomValues(r),tostring(r)}catch(r){return i=n.navigator,o=i&&i.plugins,[+new Date,n,o,n.screen,tostring(t)]}}():a,3),d),p=new ARC4(d),(f=function(){for(var t=p.g(6),n=r,a=0;t<i;)t=256*(t+a),n*=256,a=p.g(1);for(;t>=o;)t/=2,n/=2,a>>>=1;return(t+a)/n}).int32=function(){return 0|p.g(4)},f.quick=function(){return p.g(4)/4294967296},f.double=f,mixkey(tostring(p.S),t),(c.pass||l||function(t,n,r,i){if(!i)return t;i.S&&copy(i,p),t.state=function(){return copy(p,{})}})(f,u,"global"in c?c.global:this==Math,c.state)}}([])}.call(n,r,n,t))||(t.exports=i)},177:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(148),c=r(23),l=r(58),u=r(14);n.a=a.a.extend({initialize:function initialize(){var t=this,n=this.model;this.listenTo(n,n.EVENT.CALLVALIDATE,(function(n){t.callValidate(n)})),a.a.prototype.initialize.apply(this,arguments)},getReducers:function getReducers(){var t=a.a.prototype.getReducers.apply(this,arguments);return o.a.extend(t,{validatable:l.a})},callValidate:function callValidate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.model.canValidateResponse()){var n=this.getDataService(),r=!(!t.showCorrectAnswer&&!t.showCorrectAnswers),i=n.canShowGlobalValidationUI,a=o.a.isBoolean(t.feedbackAttempts)?t.feedbackAttempts:!!t.feedback_attempts,l=o.a.isUndefined(t.showDistractorRationale)?n.showDistractorRationale:Object(u.g)(t.showDistractorRationale);this.getStore().dispatch(c.a.checkAnswer({canShowCorrectAnswers:r,canShowGlobalValidationUI:i,showDistractorRationale:l,shouldValidateUnattempedResponse:r,skipAttemptCountLimit:!a}))}},setLegacyAttributes:function setLegacyAttributes(){var t=this.__legacyAttributes,n=c.a.setLegacyAttributes(t);a.a.prototype.setLegacyAttributes.call(this),this.getStore().dispatch(n)}})},179:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(131),u=r(129),p=r(21),f=r(23),d=r(145),h=r(172),v=r(188),y=r(128),g=r.n(y),m=r(17),b=r.n(m),_=r(138),E=r(14),O=r(3);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function shouldBeVisible(t,n,r,i){if(o.a.isNull(r)){if("review"===i&&t!==E.e&&t!==E.d&&o.a.isEmpty(n))return!0;if(!o.a.isNull(n)&&!o.a.isEmpty(n)){var a=o.a.filter(n,(function(t){return!1===t})).length;if(t===E.e)return 0===a;if(t===E.f)return a>0}}return t===E.c||t===r}var C=function(t){_inherits(DistractorRationalePerQuestion,t);var n=_createSuper(DistractorRationalePerQuestion);function DistractorRationalePerQuestion(){return _classCallCheck(this,DistractorRationalePerQuestion),n.apply(this,arguments)}return _createClass(DistractorRationalePerQuestion,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var t=this.props,n=t.html,r=t.perQuestionlabel;return this.visible()?c.a.createElement("div",{className:"lrn_distractor_rationale_per_question",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(n)},"aria-label":r}):null}},{key:"visible",value:function visible(){var t=this.props,n=t.html,r=t.showDistractorRationalePerQuestion,i=t.validatedResponses,o=t.validationState,a=t.viewState;return n&&shouldBeVisible(r,i,o,a)}}]),DistractorRationalePerQuestion}(c.a.Component),S=function(t){_inherits(DistractorRationalePerResponseList,t);var n=_createSuper(DistractorRationalePerResponseList);function DistractorRationalePerResponseList(){return _classCallCheck(this,DistractorRationalePerResponseList),n.apply(this,arguments)}return _createClass(DistractorRationalePerResponseList,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var t=g()("lrn_distractor_rationale_list",this.props.className),n=this.props,r=n.items,i=n.title,o=n.ariaLabel,a=n.validationStemNumeration;return this.visible()?c.a.createElement("div",{className:t,"aria-label":o},c.a.createElement("div",{className:"lrn_distractor_rationale_list_title"},i),r.map((function(t){return c.a.createElement("div",{key:t.index,className:"lrn_distractor_rationale"},c.a.createElement("div",{className:"lrn_validation_stem_numeration"},Object(_.a)(a,t.index)),c.a.createElement("div",{className:"lrn_distractor_rationale_content",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(t.metadata)}}))}))):null}},{key:"visible",value:function visible(){var t=this.props,n=t.items,r=t.showDistractorRationalePerResponse,i=t.validatedResponses,o=t.validationState;return n.length&&shouldBeVisible(r,i,o)}}]),DistractorRationalePerResponseList}(c.a.Component),R=function(t){_inherits(DistractorRationale,t);var n=_createSuper(DistractorRationale);function DistractorRationale(){var t;_classCallCheck(this,DistractorRationale);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"onDistractorComponentsVisible",o.a.debounce((function(){t.props.baseActions.renderMathIfRequired()}),100)),t}return _createClass(DistractorRationale,[{key:"render",value:function render(){var t=this.props,n=t.validatable,r=t.base,i=n.questionLevelDistractorRationale,a=n.responseLevelDistractorRationale,l=n.showDistractorRationale,u=n.validationState,p=n.validatedResponses,f=n.validationStemNumeration,d=[O.QUESTION_TYPES.MCQ,O.QUESTION_TYPES.CLOZEASSOCIATION,O.QUESTION_TYPES.CLOZEDROPDOWN,O.QUESTION_TYPES.CLOZETEXT];if(!("review"===r.state||p&&o.a.contains(d,r.questionType)))return null;var h=Object(E.h)(a,E.f),v=Object(E.h)(a,E.e),y=r.i18n.labels,g=y.distractorRationale,m=y.ariaLabel;return c.a.createElement("div",{className:"lrn_distractor_rationale_wrapper",role:"region","aria-label":m.distractorRationale.distractorRationale},c.a.createElement(C,{html:i,showDistractorRationalePerQuestion:l.perQuestion,validatedResponses:p,validationState:u,viewState:r.state,perQuestionlabel:m.distractorRationale.perQuestion,onVisible:this.onDistractorComponentsVisible}),c.a.createElement(S,{className:"lrn_distractor_rationale_incorrect",items:h,showDistractorRationalePerResponse:l.perResponse,title:g.incorrectTitle,validatedResponses:p,validationState:"incorrect",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseIncorrect,onVisible:this.onDistractorComponentsVisible}),c.a.createElement(S,{className:"lrn_distractor_rationale_correct",items:v,showDistractorRationalePerResponse:l.perResponse,title:g.correctTitle,validatedResponses:p,validationState:"correct",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseCorrect,onVisible:this.onDistractorComponentsVisible}))}}]),DistractorRationale}(c.a.Component),T=r(181),P=r(135);var w={validation:function validation(t){return o.a.contains(["correct","incorrect"],t)?"lrn_".concat(t):""}};function validatable_typeof(t){return(validatable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function validatable_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function validatable_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function validatable_setPrototypeOf(t,n){return(validatable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function validatable_createSuper(t){var n=function validatable_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=validatable_getPrototypeOf(t);if(n){var o=validatable_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return validatable_possibleConstructorReturn(this,r)}}function validatable_possibleConstructorReturn(t,n){if(n&&("object"===validatable_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return validatable_assertThisInitialized(t)}function validatable_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function validatable_getPrototypeOf(t){return(validatable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function validatable_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var I=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{validatableActions:l.b({checkAnswer:f.a.checkAnswer},t)}}))(v.a),A=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:l.b(p.a,t)}}))(R),D=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:l.b(p.a,t)}}))(T.b),N={responseInput:{className:"lrn_response_input"},hasSuggestedAnswersList:!1},x=function(t){!function validatable_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&validatable_setPrototypeOf(t,n)}(ValidatableQuestion,t);var n=validatable_createSuper(ValidatableQuestion);function ValidatableQuestion(){var t;validatable_classCallCheck(this,ValidatableQuestion);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return validatable_defineProperty(validatable_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"validatedEventCount",0),t}return function validatable_createClass(t,n,r){return n&&validatable_defineProperties(t.prototype,n),r&&validatable_defineProperties(t,r),t}(ValidatableQuestion,[{key:"render",value:function render(){var t=this.props,n=t.children,r=t.validatable,i=t.base.i18n.labels.ariaLiveText,o=r.validationState,a=P.a.getGlobalAccessibility(o,i);return c.a.createElement(d.a,null,c.a.createElement(h.a.AriaLiveRegion,null),c.a.createElement(h.a.GlobalValidationLabel,{label:a.label}),n,c.a.createElement(I,null),c.a.createElement(A,null))}},{key:"componentDidUpdate",value:function componentDidUpdate(){var t=this.props,n=t.baseActions,r=t.validatable,i=r.validatedEventRequestCount,a=r.validatedResponses;o.a.isEmpty(a)||i===this.validatedEventCount||n.triggerEvent("validated"),this.validatedEventCount=i}}]),ValidatableQuestion}(c.a.Component);function ResponseInput(t){var n=t.validatable.validationState,r=o.a.extend({},N,t.options),i=r.className,a=r.style,l=w.validation(n);return c.a.createElement("div",{className:"".concat(i," ").concat(l),style:a},t.children)}x=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:l.b(p.a,t)}}))(x);n.a={ResponseInput:ResponseInput,CheckAnswerButton:I,SuggestedAnswersList:D,DistractorRationale:A,ValidatableQuestion:x,ValidatableQuestionWithOptionalResponseInput:function ValidatableQuestionWithOptionalResponseInput(t){var n=o.a.extend({},N,t.options),r=o.a.getNested(t,"validatable.__legacyAttributes.willRenderOwnResponseInput");return c.a.createElement(x,t,c.a.createElement("div",{className:"lrn-response-validation-wrapper"},r&&t.children||c.a.createElement(ResponseInput,_extends({},t,{options:n.responseInput}),t.children)),n.hasSuggestedAnswersList&&c.a.createElement(D,null))}}},181:function(t,n,r){"use strict";r.d(n,"a",(function(){return ResponseIndex}));var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(138);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function ResponseIndex(t){var n=t.index,r=t.validationStemNumeration,i=t.domProps,o=void 0===i?{}:i;return(c.a.createElement("span",_extends({className:"lrn_responseIndex"},o),Object(l.a)(r,n)))}var u=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(SuggestedAnswersList,t);var n=_createSuper(SuggestedAnswersList);function SuggestedAnswersList(){return _classCallCheck(this,SuggestedAnswersList),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(SuggestedAnswersList,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.shouldBeVisible()&&this.props.baseActions.renderMathIfRequired()}},{key:"render",value:function render(){var t=this.props,n=t.base,r=t.customListItems,i=n.i18n.labels;if(this.shouldBeVisible()){var a=this.isSingleAnswer,l=this.buildListItems,u=a?i.correctAnswer:i.correctAnswers,p=a?"lrn_single_correct_answer":"",f=(r||l).call(this);return o.a.isEmpty(f)?null:c.a.createElement("div",{className:"lrn_correctAnswers"},c.a.createElement("span",null,u,":"),c.a.createElement("ul",{className:"lrn_correctAnswerList ".concat(p)},f))}return null}},{key:"isSingleAnswer",get:function get(){var t=this.props.validatable.suggestedResponses;return!o.a.isArray(t.value)}},{key:"buildNestedResponseItem",value:function buildNestedResponseItem(t){var n=this,r=t.value,i=t.index;return o.a.isEmpty(r)?null:c.a.createElement("li",{key:i},this.getResponseIndex(i),r.length>1&&c.a.createElement("ul",{className:"lrn_nestedCorrectAnswers"},o.a.map(r,(function(t,r){return c.a.createElement("li",{key:r},n.getResponseText(t,r))}))),1===r.length&&this.getResponseText(r[0]))}},{key:"buildListItems",value:function buildListItems(){var t=this,n=this.props.validatable.suggestedResponses;return this.isSingleAnswer?this.buildResponseItem({label:n.value},0):o.a.map(n.value,(function(n,r){if(o.a.isArray(n.value))return t.buildNestedResponseItem(n);var i=o.a.isNumber(n.index)?n.index:r;return t.buildResponseItem(n,i)}))}},{key:"buildResponseItem",value:function buildResponseItem(t,n){return c.a.createElement("li",{key:n},this.getResponseIndex(n),this.getResponseText(t))}},{key:"getResponseIndex",value:function getResponseIndex(t){var n=this.props.validatable.validationStemNumeration;return(c.a.createElement(ResponseIndex,{index:t,validationStemNumeration:n}))}},{key:"getResponseText",value:function getResponseText(t,n){return c.a.createElement("div",{key:n,className:"lrn_responseText",dangerouslySetInnerHTML:{__html:t.label}})}},{key:"shouldBeVisible",value:function shouldBeVisible(){var t=this.props.validatable,n=t.isShowingCorrectAnswers,r=t.suggestedResponses,i=t.validationState;return!(!n||"correct"===i||!r)}}]),SuggestedAnswersList}(c.a.Component);n.b=u},187:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(1),c=r.n(a),l=r(5),u=r.n(l),p=r(51);function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=p.a.isPointerEventsSupported(),d=p.a.isTouchDevice(),h=!!p.a.isPassiveEventListenersSupported()&&{passive:!0},v=function(){function TouchClickObserver(t){var n=this;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,TouchClickObserver),_defineProperty(this,"ignoreClickEventsBeforeTime",0),_defineProperty(this,"initialX",-10),_defineProperty(this,"initialY",-10),_defineProperty(this,"listeners",new Set),_defineProperty(this,"touchMoveThreshold",10),_defineProperty(this,"treatTouchEndAsClick",!0),_defineProperty(this,"onClick",(function(t){0===t.button&&((0===t.clientX&&0===t.clientY||t.timeStamp>=n.ignoreClickEventsBeforeTime)&&n.dispatchEvent(t),n.ignoreClickEventsBeforeTime=0)})),_defineProperty(this,"onPointerUp",(function(t){0===t.button&&(n.ignoreClickEventsBeforeTime=t.timeStamp+100,n.dispatchEvent(t))})),_defineProperty(this,"onTouchStart",(function(t){if(1===t.touches.length){var r=t.touches[0];n.initialX=r.clientX,n.initialY=r.clientY,n.touchMoveThreshold=function getTouchMoveThreshold(){return 10/function estimateZoomFactor(){return document.documentElement.clientWidth/window.innerWidth||1}()}(),n.treatTouchEndAsClick=!0}else n.treatTouchEndAsClick=!1})),_defineProperty(this,"onTouchMove",(function(t){if(n.treatTouchEndAsClick&&1===t.touches.length){var r=t.touches[0],i=Math.abs(n.initialX-r.clientX),o=Math.abs(n.initialY-r.clientY);(i>=n.touchMoveThreshold||o>=n.touchMoveThreshold)&&(n.treatTouchEndAsClick=!1)}})),_defineProperty(this,"onTouchEnd",(function(t){0===t.touches.length&&(n.treatTouchEndAsClick&&(n.ignoreClickEventsBeforeTime=t.timeStamp+2500,n.dispatchEvent(t)),n.initialX=-10,n.initialY=-10,n.treatTouchEndAsClick=!0)})),this.eventTarget=t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(TouchClickObserver,[{key:"addListener",value:function addListener(t){0===this.listeners.size&&this.startListening(),this.listeners.add(t)}},{key:"removeListener",value:function removeListener(t){this.listeners.delete(t),0===this.listeners.size&&this.stopListening()}},{key:"removeAllListeners",value:function removeAllListeners(){this.listeners.clear(),this.stopListening()}},{key:"dispatchEvent",value:function dispatchEvent(t){var n=this;this.listeners.forEach((function(r){return r.call(n.eventTarget,t)}))}},{key:"startListening",value:function startListening(){f?this.eventTarget.addEventListener("pointerup",this.onPointerUp):d&&(this.eventTarget.addEventListener("touchstart",this.onTouchStart,h),this.eventTarget.addEventListener("touchmove",this.onTouchMove,h),this.eventTarget.addEventListener("touchend",this.onTouchEnd,h)),this.eventTarget.addEventListener("click",this.onClick)}},{key:"stopListening",value:function stopListening(){f?this.eventTarget.removeEventListener("pointerup",this.onPointerUp):d&&(this.eventTarget.removeEventListener("touchstart",this.onTouchStart),this.eventTarget.removeEventListener("touchmove",this.onTouchMove),this.eventTarget.removeEventListener("touchend",this.onTouchEnd)),this.eventTarget.removeEventListener("click",this.onClick)}}]),TouchClickObserver}();var y=o.a.extend({EVENTS:{CLICK_OR_TAP:"click:element",FOCUS_VIA_KEYBOARD:"focus:element"},documentTouchClick:new v(document),isListening:!1,startListening:function startListening(){return this.isListening||(this.isListening=!0,this.addClickOrTapEventHandler(),this.addFocusViaKeyboardEventHandler()),this},stopListening:function stopListening(){return this.isListening&&(this.isListening=!1,this.removeClickOrTapEventHandler(),this.removeFocusViaKeyboardEventHandler()),this},addClickOrTapEventHandler:function addClickOrTapEventHandler(){var t=this;this.documentTouchClick.addListener((function(n){t.trigger(t.EVENTS.CLICK_OR_TAP,n.target)}))},removeClickOrTapEventHandler:function removeClickOrTapEventHandler(){this.documentTouchClick.removeAllListeners()},addFocusViaKeyboardEventHandler:function addFocusViaKeyboardEventHandler(){var t=this;c()(document).on("keydown.lrn.domEvents",(function(n){9===n.keyCode&&o.a.defer((function(){t.trigger(t.EVENTS.FOCUS_VIA_KEYBOARD,document.activeElement)}))}))},removeFocusViaKeyboardEventHandler:function removeFocusViaKeyboardEventHandler(){c()(document).off("keydown.lrn.domEvents")}},u.a.Events);n.a=y},188:function(t,n,r){"use strict";var i=r(127),o=r.n(i);n.a=function CheckAnswerButton(t){var n=t.base,r=t.validatable,i=t.validatableActions;if(r.canCheckAnswer){var a=n.i18n,c=n.readOnly,l=n.disabled,u=r.canShowCorrectAnswers,p=r.canShowGlobalValidationUI,f=r.feedbackAttemptsCount,d=r.feedbackAttemptsLimit,h=a.labels.checkAnswer,v=!(!c&&!l)||0!==d&&f>=d;return o.a.createElement("button",{type:"button",className:"lrn_btn lrn_validate",disabled:v,onClick:function onClick(){i.checkAnswer({canShowCorrectAnswers:u,canShowGlobalValidationUI:p,skipAttemptCountLimit:!1})}},o.a.createElement("span",null,h))}return null}},193:function(t,n,r){"use strict";r.d(n,"c",(function(){return getClasses})),r.d(n,"b",(function(){return getAttrs})),r.d(n,"a",(function(){return DragButton}));var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(128),u=r.n(l),p=r(7),f=r(135);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function getClasses(t){var n=t.showDragHandler,r=t.transparent,i=t.isMath,o=t.validated;return u()({lrn_draggable:!0,lrn_btn_no_handle:!n,lrn_transparent:r,lrn_correct:!0===o,lrn_incorrect:!1===o,lrn_math_response:i})}function getAttrs(t){var n=t.disabled,r=t.isReviewState,i=t.isPreviewState,o=t.inMaskingState,a=t.response,c=n||r||i||o;return{"data-key":a.key,"data-response-index":a.index,"data-lrn-response-group":a.groupIndex,disabled:c,"aria-disabled":c,"aria-label":responseAriaLabel(a),"aria-pressed":!1,role:"button"}}function responseAriaLabel(t){var n=t.plainText,r=t.validated,i=t.spokenMath||n;return i=f.a.getAriaLabelFromAllElements(i),o.a.isBoolean(r)&&(i+=r?", correct":", incorrect"),i}function DragButton(t){var n=t.children,r=t.canDuplicateResponses,i=t.hasSiblings,o=t.mathItemRef,a=t.response;return(c.a.createElement(DragButtonWrapper,t,c.a.createElement("span",{className:"lrn_icon","aria-hidden":"true"}),c.a.createElement(h,{cacheable:!r,innerHTML:a.value,mathItemRef:o}),n,i&&c.a.createElement("span",{className:"sr-only"}," ")))}function DragButtonWrapper(t){var n=t.response,r=(t.children,t.isInPossibilityList),i=n.index,o=(n.value,"lrn_btn_drag ".concat(getClasses(n))),a=getAttrs(t);return r?c.a.createElement("div",_extends({className:o,"data-index":i},a),t.children):c.a.createElement("span",_extends({className:o,"data-index":i},a),t.children)}var d=[],h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(DragButtonContent,t);var n=_createSuper(DragButtonContent);function DragButtonContent(){var t;_classCallCheck(this,DragButtonContent);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"containerElement",null),_defineProperty(_assertThisInitialized(t),"setContainerElement",(function(n){t.containerElement=n,t.props.mathItemRef&&t.props.mathItemRef(n)})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(DragButtonContent,[{key:"render",value:function render(){return c.a.createElement("span",{className:"lrn_item",dangerouslySetInnerHTML:{__html:this.props.innerHTML},ref:this.setContainerElement})}},{key:"componentDidMount",value:function componentDidMount(){"ie"!==p.a.browser&&this.applyContentFromCache()}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(t){var n=this.containerElement.querySelector(".learnosity-feature");return!(t.innerHTML===this.props.innerHTML&&!n)&&("ie"!==p.a.browser&&this.cacheContentForPendingUpdate(),!0)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.applyContentFromCache()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.cacheContentForPendingUpdate()}},{key:"applyContentFromCache",value:function applyContentFromCache(){var t=this;if(this.props.cacheable&&this.containerElement){var n=o.a.findWhere(d,{innerHTML:this.props.innerHTML});n&&(o.a.toArray(this.containerElement.childNodes).forEach((function(t){return t.parentNode.removeChild(t)})),n.childNodes.forEach((function(n){return t.containerElement.appendChild(n)})),d=o.a.without(d,n))}}},{key:"cacheContentForPendingUpdate",value:function cacheContentForPendingUpdate(){if(this.containerElement){var t={innerHTML:this.props.innerHTML,childNodes:o.a.toArray(this.containerElement.childNodes)};d.push(t),o.a.defer((function(){d=o.a.without(d,t)}))}}}]),DragButtonContent}(c.a.Component)},200:function(t,n,r){(function(n){t.exports=function e(t,n,r){function s(o,a){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(n){var r=t[o][1][n];return s(r||n)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,n,r){"use strict";var i={};function lookupClass(t){var n=i[t];return n?n.lastIndex=0:i[t]=n=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),n}n.exports={add:function addClass(t,n){var r=t.className;r.length?lookupClass(n).test(r)||(t.className+=" "+n):t.className=n},rm:function rmClass(t,n){t.className=t.className.replace(lookupClass(n)," ").trim()}}},{}],2:[function(t,r,i){(function(n){"use strict";var i=t("contra/emitter"),o=t("crossvent"),a=t("./classes"),c=document,l=c.documentElement,u=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,p="onpropertychange"in document&&!!window.matchMedia,f=!!window.MSInputMethodContext&&!!document.documentMode;function touchy(t,r,i,a){n.navigator.pointerEnabled?o[r](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],a):n.navigator.msPointerEnabled?o[r](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],a):(o[r](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],a),o[r](t,i,a))}function whichMouseButton(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var n=t.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function getOffset(t){var n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left}}function getElementBehindPoint(t,n,r){return c.elementFromPoint(n,r)}function never(){return!1}function always(){return!0}function getRectWidth(t){return t.width||t.right-t.left}function getRectHeight(t){return t.height||t.bottom-t.top}function getParent(t){return t.parentNode===c?null:t.parentNode}function isInput(t){return t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function isEditable(t){return!!t&&"false"!==t.contentEditable&&("true"===t.contentEditable||isEditable(getParent(t)))}(t))}function nextEl(t){return t.nextElementSibling||function manually(){var n=t;do{n=n.nextSibling}while(n&&1!==n.nodeType);return n}()}function getCoord(t,n){var r=function getEventHost(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(n),i={pageX:"clientX",pageY:"clientY"};return t in i&&!(t in r)&&i[t]in r&&(t=i[t]),r[t]}p&&(getElementBehindPoint=function(t,n,r){var i,o=t||{},a=o.className;return o.className+=" gu-hide",i=c.elementFromPoint(n,r),o.className=a,i}),r.exports=function dragula(t,n){var r,p,d,h,v,y,g,m,b,_,E,O=arguments.length;1===O&&!1===Array.isArray(t)&&(n=t,t=[]);var C,S=null,R=null,T=null,P=n||{};void 0===P.moves&&(P.moves=always),void 0===P.accepts&&(P.accepts=always),void 0===P.invalid&&(P.invalid=invalidTarget),void 0===P.containers&&(P.containers=t||[]),void 0===P.isContainer&&(P.isContainer=never),void 0===P.copy&&(P.copy=!1),void 0===P.copySortSource&&(P.copySortSource=!1),void 0===P.revertOnSpill&&(P.revertOnSpill=!1),void 0===P.removeOnSpill&&(P.removeOnSpill=!1),void 0===P.direction&&(P.direction="vertical"),void 0===P.ignoreInputTextSelection&&(P.ignoreInputTextSelection=!0),void 0===P.mirrorContainer&&(P.mirrorContainer=c.body);var w=i({containers:P.containers,start:manualStart,end:end,cancel:cancel,remove:remove,destroy:destroy,canMove:canMove,dragging:!1});return!0===P.removeOnSpill&&w.on("over",spillOver).on("out",spillOut),events(),w;function isContainer(t){return-1!==w.containers.indexOf(t)||P.isContainer(t)}function events(t){var n=t?"remove":"add";touchy(P.mirrorContainer,n,"mousedown",grab),touchy(window,n,"mouseup",release)}function eventualMovements(t){touchy(l,t?"remove":"add","mousemove",startBecauseMouseMoved)}function movements(t){var n=t?"remove":"add";o[n](l,"selectstart",preventGrabbed),o[n](l,"click",preventGrabbed)}function destroy(){events(!0),release({})}function preventGrabbed(t){C&&t.preventDefault()}function grab(t){if(y=t.clientX,g=t.clientY,1===whichMouseButton(t)&&!t.metaKey&&!t.ctrlKey){var n=t.target,r=canStart(n);if(r){C=r;var i=getOffset(r.item);h=getCoord("pageX",t)-i.left,v=getCoord("pageY",t)-i.top,eventualMovements(),"mousedown"===t.type&&(isInput(n)?n.focus():t.preventDefault()),t.stopPropagation(),"touchstart"===t.type&&t.preventDefault()}}}function startBecauseMouseMoved(t){if(C)if(0!==whichMouseButton(t)){if(void 0===t.clientX||t.clientX!==y||void 0===t.clientY||t.clientY!==g){if(P.ignoreInputTextSelection){var n=getCoord("clientX",t),r=getCoord("clientY",t);if(isInput(c.elementFromPoint(n,r)))return}var i=C;for(eventualMovements(!0),movements(),end(),start(i),R=d;R&&"none"===window.getComputedStyle(R).getPropertyValue("transform");)R=R.parentElement;R&&(T=P.transformMatrix.getInverseMatrix(R,{removeTranslation:!0})),a.add(_||d,"gu-transit"),renderMirrorImage(),drag(t)}}else release({})}function canStart(t){if(!(w.dragging&&r||isContainer(t))){for(var n=t;getParent(t)&&!1===isContainer(getParent(t));){if(P.invalid(t,n))return;if(!(t=getParent(t)))return}var i=getParent(t);if(i&&!P.invalid(t,n)&&P.moves(t,i,n,nextEl(t)))return{item:t,source:i}}}function canMove(t){return!!canStart(t)}function manualStart(t){var n=canStart(t);n&&start(n)}function start(t){isCopy(t.item,t.source)&&(_=t.item.cloneNode(!0),w.emit("cloned",_,t.item,"copy")),p=t.source,d=t.item,m=b=nextEl(t.item),w.dragging=!0,w.emit("drag",d,p)}function invalidTarget(){return!1}function end(){if(w.dragging){var t=_||d;drop(t,getParent(t))}}function ungrab(){C=!1,eventualMovements(!0),movements(!0)}function release(t){if(ungrab(),w.dragging){var n=_||d,i=getCoord("clientX",t),o=getCoord("clientY",t),a=findDropTarget(getElementBehindPoint(r,i,o),i,o);a&&(_&&P.copySortSource||!_||a!==p)?drop(n,a):P.removeOnSpill?remove():cancel()}}function drop(t,n){var r=getParent(t);_&&P.copySortSource&&n===p&&r.removeChild(d),isInitialPlacement(n)?w.emit("cancel",t,p,p):w.emit("drop",t,n,p,b),cleanup()}function remove(){if(w.dragging){var t=_||d,n=getParent(t);n&&n.removeChild(t),w.emit(_?"cancel":"remove",t,n,p),cleanup()}}function cancel(t){if(w.dragging){var n=arguments.length>0?t:P.revertOnSpill,r=_||d,i=getParent(d),o=isInitialPlacement(i);!1===o&&n&&(_?_.parentNode&&_.parentNode.removeChild(_):p.insertBefore(r,p.contains(m)?m:null)),o||n?w.emit("cancel",r,p,p):w.emit("drop",r,i,p,b),cleanup()}}function cleanup(){var t=_||d;ungrab(),removeMirrorImage(),t&&a.rm(t,"gu-transit"),E&&clearTimeout(E),w.dragging=!1,S&&w.emit("out",t,S,p),w.emit("dragend",t),p=d=_=m=b=E=S=null,R=null,T=null}function isInitialPlacement(t,n){var i;return i=void 0!==n?n:r?b:nextEl(_||d),t===p&&i===m}function findDropTarget(t,n,r){for(var i=t;i&&!accepted();)i=getParent(i);return i;function accepted(){if(!1===isContainer(i))return!1;var o=getImmediateChild(i,t),a=getReference(i,o,n,r);return!!isInitialPlacement(i,a)||P.accepts(d,i,p,a)}}function drag(t){if(r){t.preventDefault();var n=getCoord("clientX",t),i=getCoord("clientY",t),o=n-h,a=i-v;if(R&&!f){var c=R.getBoundingClientRect();o=o-c.left-c.width/2,a=a-c.top-c.height/2;var l=P.transformMatrix.transformPoint({x:o,y:a},T);o=l.x+R.scrollLeft+R.offsetWidth/2,a=l.y+R.scrollTop+R.offsetHeight/2}requestAnimationFrame((function(){if(r&&(r.style.left=o+"px",r.style.top=a+"px",u&&!R)){var t=r.getBoundingClientRect();(t.top<a-2||t.top>a+2||t.left<o-2||t.left>o+2)&&(o+=o-t.left,a+=a-t.top,r.style.left=o+"px",r.style.top=a+"px")}}));var y=_||d,g=getElementBehindPoint(r,n,i),E=findDropTarget(g,n,i);w.emit("move",y,{clientX:n,clientY:i,pageX:getCoord("pageX",t),pageY:getCoord("pageY",t)},g);var O=null!==E&&E!==S;(O||null===E)&&(function out(){S&&moved("out")}(),S=E,function over(){O&&moved("over")}());var C=getParent(y);if(E!==p||!_||P.copySortSource){var I;if(null!==getImmediateChild(E,g))I=getShadowReference(E,y,O,n,i);else{if(!0!==P.revertOnSpill||_)return void(_&&C&&C.removeChild(y));I=m,E=p}(null===I&&O||I!==y&&I!==nextEl(y))&&(b=I,E.insertBefore(y,I),w.emit("shadow",y,E,p))}else C&&C.removeChild(y)}function moved(t){w.emit(t,y,S,p)}}function spillOver(t){a.rm(t,"gu-hide")}function spillOut(t){w.dragging&&a.add(t,"gu-hide")}function renderMirrorImage(){r||(d.getBoundingClientRect(),(r=d.cloneNode(!0)).style.width=d.offsetWidth+"px",r.style.height=d.offsetHeight+"px",a.rm(r,"gu-transit"),a.add(r,"gu-mirror"),P.mirrorContainer.appendChild(r),touchy(l,"add","mousemove",drag),a.add(P.mirrorContainer,"gu-unselectable"),w.emit("cloned",r,d,"mirror"))}function removeMirrorImage(){r&&(a.rm(P.mirrorContainer,"gu-unselectable"),touchy(l,"remove","mousemove",drag),getParent(r).removeChild(r),r=null)}function getImmediateChild(t,n){for(var r=n;r!==t&&getParent(r)!==t;)r=getParent(r);return r===l?null:r}function getShadowReference(t,n,r,i,o){var a,c,l,u,p,f,d,h,v,y=t.children.length;for(a=0;a<y;a++)if(u=(l=t.children[a]).getBoundingClientRect(),p=l.getClientRects(),v=l,f=n.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_FOLLOWING,inRect(i,o,u)&&(d=p[0],h=void 0,h=n.getBoundingClientRect(),i<d.left+h.width&&o<d.top+h.height))for(c=0;c<p.length;c++)if(inRect(i,o,p[c]))return resolve(l,f);return r?null:nextEl(n);function resolve(t,n){return n?nextEl(t):t}function inRect(t,n,r){return t>r.left&&t<r.right&&n>r.top&&n<r.bottom}}function getReference(t,n,r,i){var o="horizontal"===P.direction;return n!==t?function inside(){var t=n.getBoundingClientRect();return resolve(o?r>t.left+getRectWidth(t)/2:i>t.top+getRectHeight(t)/2)}():function outside(){var n,a,c,l=t.children.length;for(n=0;n<l;n++){if(a=t.children[n],c=a.getBoundingClientRect(),o&&c.left+c.width/2>r)return a;if(!o&&c.top+c.height/2>i)return a}return null}();function resolve(t){return t?nextEl(n):n}}function isCopy(t,n){return"boolean"==typeof P.copy?P.copy:P.copy(t,n)}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":4,crossvent:8}],3:[function(t,n,r){"use strict";var i=t("ticky");n.exports=function debounce(t,n,r){t&&i((function run(){t.apply(r||null,n||[])}))}},{ticky:6}],4:[function(t,n,r){"use strict";var i=t("atoa"),o=t("./debounce");n.exports=function emitter(t,n){var r=n||{},a={};return void 0===t&&(t={}),t.on=function(n,r){return a[n]?a[n].push(r):a[n]=[r],t},t.once=function(n,r){return r._once=!0,t.on(n,r),t},t.off=function(n,r){var i=arguments.length;if(1===i)delete a[n];else if(0===i)a={};else{var o=a[n];if(!o)return t;o.splice(o.indexOf(r),1)}return t},t.emit=function(){var n=i(arguments);return t.emitterSnapshot(n.shift()).apply(this,n)},t.emitterSnapshot=function(n){var c=(a[n]||[]).slice(0);return function(){var a=i(arguments),l=this||t;if("error"===n&&!1!==r.throws&&!c.length)throw 1===a.length?a[0]:a;return c.forEach((function emitter(i){r.async?o(i,a,l):i.apply(l,a),i._once&&t.off(n,i)})),t}},t}},{"./debounce":3,atoa:5}],5:[function(t,n,r){n.exports=function atoa(t,n){return Array.prototype.slice.call(t,n)}},{}],6:[function(t,n,r){var i;i="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},n.exports=i},{}],7:[function(t,r,i){(function(t){var n=t.CustomEvent;r.exports=function useNative(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"function"==typeof document.createEvent?function CustomEvent(t,n){var r=document.createEvent("CustomEvent");return n?r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail):r.initCustomEvent(t,!1,!1,void 0),r}:function CustomEvent(t,n){var r=document.createEventObject();return r.type=t,n?(r.bubbles=Boolean(n.bubbles),r.cancelable=Boolean(n.cancelable),r.detail=n.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,r,i){(function(n){"use strict";var i=t("custom-event"),o=t("./eventmap"),a=n.document,c=function addEventEasy(t,n,r,i){return t.addEventListener(n,r,i)},l=function removeEventEasy(t,n,r,i){return t.removeEventListener(n,r,i)},u=[];function unwrap(t,n,r){var i=function find(t,n,r){var i,o;for(i=0;i<u.length;i++)if((o=u[i]).element===t&&o.type===n&&o.fn===r)return i}(t,n,r);if(i){var o=u[i].wrapper;return u.splice(i,1),o}}n.addEventListener||(c=function addEventHard(t,r,i){return t.attachEvent("on"+r,function wrap(t,r,i){var o=unwrap(t,r,i)||function wrapperFactory(t,r,i){return function wrapper(r){var o=r||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function preventDefault(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function stopPropagation(){o.cancelBubble=!0},o.which=o.which||o.keyCode,i.call(t,o)}}(t,0,i);return u.push({wrapper:o,element:t,type:r,fn:i}),o}(t,r,i))},l=function removeEventHard(t,n,r){var i=unwrap(t,n,r);if(i)return t.detachEvent("on"+n,i)}),r.exports={add:c,remove:l,fabricate:function fabricateEvent(t,n,r){var c=-1===o.indexOf(n)?function makeCustomEvent(){return new i(n,{detail:r})}():function makeClassicEvent(){var t;return a.createEvent?(t=a.createEvent("Event")).initEvent(n,!0,!0):a.createEventObject&&(t=a.createEventObject()),t}();t.dispatchEvent?t.dispatchEvent(c):t.fireEvent("on"+n,c)}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":9,"custom-event":7}],9:[function(t,r,i){(function(t){"use strict";var n=[],i="",o=/^on/;for(i in t)o.test(i)&&n.push(i.slice(2));r.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)}).call(this,r(39))},204:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(5),c=r.n(a),l=r(1),u=r.n(l),p=r(200),f=r.n(p);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function Behaviour(t){o()(this).extend(t),this.initialize()}o.a.extend(Behaviour.prototype,c.a.Events,{remove:function remove(){this.stopListening()}}),Behaviour.extend=c.a.Model.extend,Behaviour.Collection=function(t,n){var r=this;this._behaviours={},o.a.each(t,(function(t,i){t.prototype.active.call(n)&&(r._behaviours[i]=new t(n))}))},o.a.extend(Behaviour.Collection.prototype,c.a.Events,{aggregate:function aggregate(t){var n={},r=Array.prototype.slice.call(arguments,1);return o.a.each(this._behaviours,(function(i){o.a.isFunction(i[t])&&o.a.extend(n,i[t].apply(i,r))})),n},prioritise:function prioritise(t,n){var r=this,i=Array.prototype.slice.call(arguments,2),a=this._behaviours[o.a.find(n,(function(n){return r._behaviours[n]&&r._behaviours[n][t]}))];return a&&a[t].apply(a,i)},callAll:function callAll(t){var n,r=Array.prototype.slice.call(arguments,1);(n=o()(this._behaviours)).invoke.apply(n,[t].concat(_toConsumableArray(r)))},callIfActive:function callIfActive(t,n){var r=this._behaviours[t],i=Array.prototype.slice.call(arguments,2);if(r&&o.a.isFunction(r[n]))return r[n].apply(r,i)},has:function has(t){return!!this._behaviours[t]}});var d=Behaviour,h=d.extend({active:function active(){var t=this.opts;return o.a.isNumber(t.maxItems)&&t.maxItems>0},initialize:function initialize(){this.handleMaxItems()},handleMaxItems:function handleMaxItems(){var t=this,n=this.pub;this.listenTo(n,n.EVENT.CHANGED,(function(n,r,i){t.shouldRemoveItems(r)&&t.removeOtherItems(n,r,i)}))},draggablesInZone:function draggablesInZone(t){return u()(t).find(this.prv.$draggables).get()},shouldRemoveItems:function shouldRemoveItems(t){var n=this.opts;return this.spacesLeft(t)<0&&(n.enforceMaxItemsInOrigin||!this.isOriginalDragZone(t))},isOriginalDragZone:function isOriginalDragZone(t){return!this.prv.$dropzones.is(t)},spacesLeft:function spacesLeft(t){return this.opts.maxItems-this.draggablesInZone(t).length},removeOtherItems:function removeOtherItems(t,n,r){var i=this,a=this.draggablesInZone(n);o.a.each(a,(function(n,o){n!==t&&a.length>i.opts.maxItems&&(i.moveItemAway(n,r),a.splice(o,1))}))},moveItemAway:function moveItemAway(t,n){var r=this.prv,i=this.prv.behaviours.prioritise("returnItemTo",["duplicateItems","groupingResponses","maxItems"],t,n),o=t.parentElement;i?i.appendChild(t):(this.prv.$draggables=this.prv.$draggables.not(t),o.removeChild(t)),r.trigger(r.EVENT.MOVED_ITEM_AWAY,t,o)},returnItemTo:function returnItemTo(t,n){var r=this.opts;return r.enforceMaxItemsInOrigin?n:r.origin||!1}}),v=d.extend({active:function active(){return this.opts.copy&&this.opts.origin},initialize:function initialize(){this.listenTo(this.prv,this.prv.EVENT.APPENDED_ITEM,this.onAppend)},isInOrigin:function isInOrigin(t){return this.opts.origin.contains(t)},onAppend:function onAppend(t,n){var r=this.prv;n&&(this.removeIfReturnedToOrigin(t,n),r.$draggables=r.$draggables.not(t),n.contains(t)&&(r.$draggables=r.$draggables.add(t)))},removeIfReturnedToOrigin:function removeIfReturnedToOrigin(t,n){this.isInOrigin(n)&&(this.prv.$draggables=this.prv.$draggables.not(t),u()(t).remove())},returnItemTo:function returnItemTo(){return!1}}),y=r(11),g=d.extend({active:function active(){return this.opts.preventMathjaxDuplication},initialize:function initialize(){var t=this.pub;this.listenTo(t,t.EVENT.CLONED,this.onClone)},onClone:function onClone(t){y.a.isInitalised()&&t.querySelector(".MathJax")&&y.a.preventReRender(t)}}),m=r(187);function getDraggableAttributes(t){if(!o.a.exists(t))return{};var n=o.a.chain(t.attributes).pick("aria-disabled","aria-label","aria-pressed","data-index","data-key","data-response-index").mapObject((function(t,n){return o.a.exists(t.value)?t.value:null})).mapObject((function(t,n){return"true"===t||"false"!==t&&t})).mapObject((function(t,n){return"data-index"===n||"data-response-index"===n?parseInt(t):t})).value();return{ariaDisabled:n["aria-disabled"],ariaLabel:n["aria-label"],ariaPressed:n["aria-pressed"],index:n["data-index"],key:n["data-key"],responseIndex:n["data-response-index"]}}function getContainerIndex(t){var n=u()(t).closest(".lrn_dropzone");return n.length?parseInt(n.data("index")):-1}var b=d.extend({EVENT:{MOVE_FOCUS_WITH_ARROW_KEY:"move-focus-with-arrow-key"},NAMESPACES:{INTERACTION:".interaction",ACTIVE:".active"},KEYS:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},IGNORE_SELECTORS:".lrn_widget.lrn_feature:not(.lrn_scrollablepassage)",DRAG_ABORT_WINDOW:200,activeItem:null,active:function active(){return this.opts.keyboardAndClickInteraction},initialize:function initialize(){var t=this.prv;this.draggableClass=o.a.uniqueId("lrn-dragdrop-group-"),this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.setupDraggables(),this.setupInteraction(),this.activateAfterShortDrag(),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,this.onItemActivation),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,this.onItemDeactivation),this.listenTo(t,t.EVENT.SET_DISABLED,this.onSetDisabled),this.listenTo(t,t.EVENT.CHANGED,this.onChange),this.listenTo(t,t.EVENT.CLEAR,this.deactivateActiveItem),this.listenTo(t,t.EVENT.CLONED,this.onClone),this.listenTo(t,t.EVENT.AUTO_MOVE,this.autoMove),this.listenTo(t,t.EVENT.CHANGE_DRAGGABLES,this.setupDraggables),this.on(this.EVENT.MOVE_FOCUS_WITH_ARROW_KEY,this.onMoveFocusWithArrowKey)},onChange:function onChange(t){var n=this.prv;this.isKeyboard&&(n.$origin.find(n.$draggables.get()).get(0)||t).focus()},onClone:function onClone(t,n,r){"copy"===r&&u()(n).data("clone",t)},namespace:function namespace(t,n){return t.replace(/\s/g,"."+n+" ")},activateAfterShortDrag:function activateAfterShortDrag(){var t,n=this.pub,r={};function isShortAbortedDrag(t,n,i){return n===i&&r.source===i&&r.start+this.DRAG_ABORT_WINDOW>Date.now()}this.listenTo(n,n.EVENT.DRAG_START,(function(n,i){r.activeItem=this.activeItem,r.start=Date.now(),r.source=i,r.el=n,t=!1})),this.listenTo(n,n.EVENT.DRAG_CANCEL,(function(){isShortAbortedDrag.apply(this,arguments)&&(t=!0)})),this.listenTo(n,n.EVENT.DRAG_END,(function(){t&&(r.activeItem&&r.activeItem!==this.activeItem&&this.activateItem(r.activeItem),this.hitItem(r.el))}))},setupDraggables:function setupDraggables(){this.prv.$draggables.addClass(this.draggableClass).attr("tabindex",0)},autoMove:function autoMove(t,n,r){var i=this.prv,o=t&&t.parentNode;i.canAccept(t,n,o)&&(this.activateItem(t),this.appendActiveToZone(n),r&&this.activateItem(t))},setupInteraction:function setupInteraction(){var t=this.prv,n=this.pub,r=n.uid+this.NAMESPACES.INTERACTION,i=this.namespace("keydown ",r),o=this.namespace("keyup ",r),a=this.namespace("focus ",r);t.$container.on(i,this.onContainerKeyDown.bind(this)).on(o,this.onContainerKeyUp.bind(this)).on(a,".".concat(n.CLASS.ACTIVE),this.onContainerFocus.bind(this)),t.$draggables.addClass(this.draggableClass),m.a.startListening(),this.listenTo(m.a,m.a.EVENTS.CLICK_OR_TAP,this.onActivateElement)},onContainerFocus:function onContainerFocus(){this.keyFocusDirection&&(this.moveFocus(this.keyFocusDirection),this.keyFocusDirection=!1)},onContainerKeyDown:function onContainerKeyDown(t){var n=this.isArrowKeyEvent(t);n&&(this.keyFocusDirection=this.getKeyFocusDirection(t)),(n||this.isSpacebarKeyEvent(t))&&t.preventDefault()},onContainerKeyUp:function onContainerKeyUp(t){this.isToggleKeyEvent(t)?(this.isKeyboard=!0,this.onActivateElement(t.target),this.isKeyboard=!1):this.isArrowKeyEvent(t)?(t.stopPropagation(),this.trigger(this.EVENT.MOVE_FOCUS_WITH_ARROW_KEY,this.getKeyFocusDirection(t))):this.isEscapeKeyEvent(t)&&this.deactivateActiveItem()},onActivateElement:function onActivateElement(t){var n=this.prv,r=u()(t);if(!(n.isDragging()||r.closest(this.IGNORE_SELECTORS).length>0)){var i=r.closest(n.$draggables);i.length>0?this.hitItem(i.get(0)):n.$zones.is(t)&&this.hitZone(t),n.$origin.is(t)&&this.hitOrigin(t)}},onMoveFocusWithArrowKey:function onMoveFocusWithArrowKey(t){var n=this.prv.behaviours,r=this.activeItem;n.has("list")&&document.activeElement===r?(this.keyFocusDirection=!1,n.callIfActive("list","moveActive",r,this.getNextByDir(t,r)[0])):this.moveFocus(t)},remove:function remove(){var t=this.prv;this.deactivateActiveItem(),this.stopListening(),this.off(),t.$container.add(t.$origin).off("."+this.pub.uid).find("."+this.draggableClass).removeClass(this.draggableClass),this.lastHitItem=null},onItemActivation:function onItemActivation(t){this.deactivateActiveItem(),t.focus(),this.applyTabindex(t),this.listenForDomEvents()},onItemDeactivation:function onItemDeactivation(t){var n=this.prv,r=this.pub,i=u()(t);n.$zones.removeAttr("tabindex"),n.$origin.removeAttr("tabindex"),i.data("clone")&&(i=i.add(i.data("clone")).removeData("clone")),i.removeClass(r.CLASS.ACTIVE),u()(document).add(this.opts.zones).add(this.opts.origin).off("."+r.uid+this.NAMESPACES.ACTIVE)},onSetDisabled:function onSetDisabled(t,n){t&&(n?this.deactivateItem(n):this.deactivateActiveItem())},applyTabindex:function applyTabindex(t){var n=this.prv,r=this.opts,i=n.$origin;i.is(r.zones)||n.behaviours.has("groupingResponses")?(n.$dropzones.filter(":empty, .lrn-dragdrop-empty").attr("tabindex",0),i.find(t).length||i.attr("tabindex",0)):n.$zones.filter(":empty, .lrn-dragdrop-empty").attr("tabindex",0)},listenForDomEvents:function listenForDomEvents(){var t=this,n=this.prv,r=this.pub,i=r.uid+this.NAMESPACES.ACTIVE,o=n.$container.find("."+r.CLASS.IGNORE_TAP);function contains(t,n){return t.is(n)||t.find(n).length>0}n.$zones.add(n.$origin).on(this.namespace("mouseenter ",i),(function(t){n.isDragging()||r.trigger(r.EVENT.OVER_DROP_ZONE,t.currentTarget)})).on(this.namespace("mouseleave ",i),(function(t){n.isDragging()||r.trigger(r.EVENT.LEFT_DROP_ZONE,t.currentTarget)})),n.$origin.on("focus."+i,(function(t){t.currentTarget.classList.add(r.CLASS.OVER)})).on("blur."+i,(function(t){t.currentTarget.classList.remove(r.CLASS.OVER)})),m.a.startListening(),this.listenToOnce(m.a,m.a.EVENTS.CLICK_OR_TAP,(function(r){contains(u()(t.lastHitItem),r)||contains(o,r)||contains(n.$zones,r)||t.deactivateActiveItem()}))},hitOrigin:function hitOrigin(){this.prv.trigger(this.prv.EVENT.HIT_ORIGIN,this.activeItem)},hitZone:function hitZone(t){this.appendActiveToZone(t)},appendActiveToZone:function appendActiveToZone(t){var n,r=this.prv,i=this.activeItem,o=i&&i.parentNode;i&&r.canAccept(i,t,o)&&(n=u()(i).data("clone")||i,this.deactivateItem(i,{isBeingAppendedToNewZone:t!==o}),t.contains(i)||(t.appendChild(n),r.triggerAppendEvents(n,t,o)))},hitItem:function hitItem(t){var n=this.prv;this.activeItem?(this.activeItem!==t&&n.behaviours.prioritise("hitSecondItem",["list","keyboardMouseInteraction"],t,this.activeItem),this.deactivateActiveItem()):(this.activateItem(t),this.lastHitItem=t)},hitSecondItem:function hitSecondItem(t){this.appendActiveToZone(t.parentNode)},getKeyFocusDirection:function getKeyFocusDirection(t){var n=this.KEYS;return t.which===n.DOWN||t.which===n.RIGHT?1:t.which===n.UP||t.which===n.LEFT?-1:void 0},moveFocus:function moveFocus(t){this.getNextByDir(t,document.activeElement).focus()},getNextByDir:function getNextByDir(t,n){var r=this.prv.$container.find("[tabindex=0]"),i=r.index(n)+t;return r.eq(i%r.length)},isArrowKeyEvent:function isArrowKeyEvent(t){var n=this.KEYS;return[n.LEFT,n.UP,n.RIGHT,n.DOWN].indexOf(t.which)>=0},isEscapeKeyEvent:function isEscapeKeyEvent(t){return t.which===this.KEYS.ESC},isSpacebarKeyEvent:function isSpacebarKeyEvent(t){return t.which===this.KEYS.SPACE},isToggleKeyEvent:function isToggleKeyEvent(t){return t.which===this.KEYS.ENTER||t.which===this.KEYS.SPACE},isActive:function isActive(t){return t===this.activeItem},activateItem:function activateItem(t){var n=this.pub,r=this.prv;if(this.deactivateActiveItem(),r.drake.canMove(t)){var i=o()(getDraggableAttributes(t)).assign({containerIndex:getContainerIndex(t),isActive:!0});t.classList.add(n.CLASS.ACTIVE),n.trigger(n.EVENT.ACTIVATED_ITEM,t,i),n.trigger(n.EVENT.CLONED,t.cloneNode(!0),t,r.canCopy(t,t.parentNode)?"copy":"invisible"),this.activeItem=t}},deactivateActiveItem:function deactivateActiveItem(){this.activeItem&&this.deactivateItem(this.activeItem)},deactivateItem:function deactivateItem(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isBeingAppendedToNewZone:!1};if(this.activeItem){var r=this.pub,i=o()(getDraggableAttributes(t)).assign({dropzoneIndex:getContainerIndex(t),isActive:!1});i.isBeingAppendedToNewZone=n.isBeingAppendedToNewZone,t.classList.remove(r.CLASS.ACTIVE),r.trigger(r.EVENT.DEACTIVATED_ITEM,t,i),this.activeItem=null}}}),_=d.extend({active:function active(){return this.opts.applyAriaAttributes},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.prv.$zones;this.setupDraggables(),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,(function(t){t.setAttribute("aria-pressed",!0)})),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,(function(t){t.setAttribute("aria-pressed",!1)}))},setupDraggables:function setupDraggables(){this.prv.$draggables.attr("aria-pressed",!1)},disabledProps:function disabledProps(t){return{"aria-disabled":t}}}),E=d.extend({active:function active(){return this.opts.applyOverHighlightDropzoneClasses},initialize:function initialize(){var t=this.prv;this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized),this.opts.origin&&this.listenTo(t,t.EVENT.NOTIFY_CUSTOM_DROP,this.setOriginOver)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub,n=this.prv,r=n.$dropzones,i=t.CLASS;r.addClass(i.DROPZONE),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,(function(){r.filter((function(t,n){return!n.hasAttribute("disabled")})).addClass(i.HIGHLIGHT)})),this.listenTo(t,t.EVENT.CLONED,(function(t){this.mirror=t})),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,(function(){n.$zones.removeClass(i.HIGHLIGHT+" "+i.OVER),this.mirror=null})),this.listenTo(t,t.EVENT.OVER_DROP_ZONE,(function(t){t.classList.add(i.OVER)})),this.listenTo(t,t.EVENT.LEFT_DROP_ZONE,(function(t){t.classList.remove(i.OVER)}))},setOriginOver:function setOriginOver(t){this.opts.origin.classList[t?"add":"remove"](this.pub.CLASS.OVER)}}),O=r(141),C={maxItems:h,duplicateItems:v,preventMathjaxDuplication:g,keyboardMouseInteraction:b,ariaAttribute:_,styleHandler:E,scrollable:d.extend({REPEATER_ID:"dragDropScroll",CONSTS:{BUFFER:50,PERIOD:10,DELTA:10},POSSIBLE_OVERFLOWS:["overflow","overflowY"],active:function active(){return this.opts.scrollable},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.listenTo(t,t.EVENT.ACTIVATED_ITEM,this.onActivatedItem),this.listenTo(t,t.EVENT.MOVED,this.onMoved),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,this.clearScroll)},isScrollableOverflow:function isScrollableOverflow(t){var n=u()(t),r=!1;return o.a.some(this.POSSIBLE_OVERFLOWS,(function(t){var i=n.css(t);if("scroll"===i||"auto"===i)return r=!0,!0})),r},onActivatedItem:function onActivatedItem(t){var n=this,r=window,i=document.documentElement,o=u()(t).parents().filter((function(t,r){return n.isScrollableOverflow(r)})),a=document.scrollingElement||i;this.scrollableContainers=u.a.merge(o,u()(a)).map((function(t,n){var o=u()(n),c=o.offset(),l={el:n,top:c.top,left:c.left,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight};return n===a?(l.isDocumentScrollingElement=!0,l.width=Math.max(i.clientWidth,r.innerWidth||0),l.height=Math.max(i.clientHeight,r.innerHeight||0)):(l.width=o.outerWidth(),l.height=o.outerHeight()),l})).toArray()},onMoved:function onMoved(t,n){var r,i,a=this,c={top:n.pageY,left:n.pageX};o.a.some(this.scrollableContainers,(function(t){if(r=a.getScrollingDirection(t,c,t.isDocumentScrollingElement),!o.a.isNull(r))return i=t.el,!0})),r&&i?this.scroll(i,r):O.a.clear(this.REPEATER_ID)},getScrollingDirection:function getScrollingDirection(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.CONSTS.BUFFER,o=t.height,a=t.scrollHeight,c=t.el,l=c.scrollTop,u=r?l:t.top;return n.top<=u+i&&l>0?"top":n.top>=u+o-i&&l<a-o&&o<a?"bottom":null},scroll:function scroll(t,n){var r=this.CONSTS,i=r.DELTA,o=r.PERIOD;O.a.start(this.REPEATER_ID,(function(){"top"===n?t.scrollTop-=i:"bottom"===n&&(t.scrollTop+=i)}),o)},clearScroll:function clearScroll(){this.scrollableContainers=null,O.a.clear(this.REPEATER_ID)},remove:function remove(){this.stopListening(),this.clearScroll()}}),groupingResponses:d.extend({ATTR:{RESPONSE_GROUP:"data-lrn-response-group"},active:function active(){return this.opts.groupingResponses},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){this.setupDragOverOrigin(),this.listenTo(this.prv,this.prv.EVENT.HIT_ORIGIN,this.hitOrigin)},setupDragOverOrigin:function setupDragOverOrigin(){var t=this.prv,n=this.pub,r=this.opts.origin,i=!1,o=null;this.listenTo(n,n.EVENT.ACTIVATED_ITEM,(function(t){i=r.contains(t),o=t.parentElement})),this.listenTo(n,n.EVENT.MOVED,(function(n,o,a){var c=r.contains(a);c!==i&&(i=c,t.trigger(t.EVENT.NOTIFY_CUSTOM_DROP,i))})),this.listenTo(n,n.EVENT.DEACTIVATED_ITEM,(function(n){i&&this.moveToCorrespondingGroup(n,o),i=!1,o=null,t.trigger(t.EVENT.NOTIFY_CUSTOM_DROP,!1)}))},moveToCorrespondingGroup:function moveToCorrespondingGroup(t,n){var r=this.prv,i=r.$origin,o=this.getResponseGroup(i,t),a=r.behaviours;o&&!o.contains(t)&&(o.appendChild(t),r.triggerAppendEvents(t,o,n),a.prioritise("deactivateItem",["keyboardMouseInteraction","groupingResponses"],t))},deactivateItem:function deactivateItem(t){this.pub.trigger(this.pub.EVENT.DEACTIVATED_ITEM,t)},getResponseGroup:function getResponseGroup(t,n){var r=n.getAttribute(this.ATTR.RESPONSE_GROUP);if(!o.a.isUndefined(r))return t.find("["+this.ATTR.RESPONSE_GROUP+'="'+r+'"]')[0]},returnItemTo:function returnItemTo(t){return this.getResponseGroup(this.prv.$origin,t)},isDroppable:function isDroppable(t,n,r){var i=this.prv.$dropzones,o=this.ATTR.RESPONSE_GROUP;return{allowed:n===r||(!!i.is(n)||u()(t).attr(o)===u()(n).attr(o))}},hitOrigin:function hitOrigin(t){t&&this.moveToCorrespondingGroup(t,t.parentElement)}}),list:d.extend({active:function active(){return this.opts.list},initialize:function initialize(){var t=this.pub;this.listenTo(t,t.EVENT.CLONED,this.onClone)},onClone:function onClone(t,n,r){var i,o=this;"mirror"===r&&(t.classList.remove(this.pub.CLASS.ACTIVE),(i=this.horizontalOffset(n,t))&&requestAnimationFrame((function(){o.replicateOffset(t,i)})))},horizontalOffset:function horizontalOffset(t,n){return u()(t.firstChild).innerHeight()>u()(n.firstChild).innerHeight()&&this.getHorizontalOffset(t)},hitSecondItem:function hitSecondItem(t,n){this.moveActive(n,t)},getHorizontalOffset:function getHorizontalOffset(t){var n=t.offsetParent.getBoundingClientRect();return t.getClientRects()[0].left-n.left},replicateOffset:function replicateOffset(t,n){var r=u()(t),i=r.clone().removeClass("gu-mirror"),o=u()("<span>").css({display:"inline-block",width:n});t.className="gu-mirror",r.empty().removeAttr("data-original-index aria-label aria-pressed tabindex").append(o).append(i)},moveActive:function moveActive(t,n){var r=t.parentNode;this.moveItemBeyondTarget(t,n,r)&&(t.focus(),this.prv.triggerAppendEvents(t,r,r))},moveItemBeyondTarget:function moveItemBeyondTarget(t,n,r){var i=this.getDomOrder(t,n);if(0!==i)return r.insertBefore(t,1===i?n.nextSibling:n),!0},getDomOrder:function getDomOrder(t,n){var r=t.compareDocumentPosition(n),i=0;return r&Node.DOCUMENT_POSITION_FOLLOWING&&(i=1),r&Node.DOCUMENT_POSITION_PRECEDING&&(i=-1),i}}),swapInlineAndBlock:d.extend({active:function active(){return this.opts.swapInlineAndBlock},initialize:function initialize(){var t=this.prv;this.$container=u()(this.opts.container),this.onChanged=o.a.debounce(this.onChanged.bind(this),10),this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.listenTo(t,t.EVENT.CHANGED,this.onChanged)},onChanged:function onChanged(t,n){var r,i=this.pub,o=this.opts,a=u()(t);if(n===o.origin&&a.is("span")?r="div":a.is("div")&&(r="span"),r){this.changeElementType(t,r);var c=this.$container.find(".".concat(i.CLASS.ZONE," .").concat(i.CLASS.DRAGGABLE)).get();this.pub.changeDraggables(c)}},changeElementType:function changeElementType(t,n){var r={},i=u()(t);u.a.each(t.attributes,(function(t,n){r[n.nodeName]=n.nodeValue})),i.replaceWith((function(){return u()("<".concat(n,"/>"),r).append(i.contents())}))}})},S=r(226),R=r.n(S),T=r(233),P=r.n(T),w=r(237),I=r.n(w),A=r(189),D=r.n(A),N=R.a.create();function getTransformMatrixString(t){return window.getComputedStyle(t).getPropertyValue("transform")}function strToMatrixArray(t){for(var n=t.replace(/(matrix\()|(\))/,"").split(","),r=0;r<n.length;r++)n[r]=parseFloat(n[r]);return[[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]]}N.import(P.a),N.import(I.a),N.import(D.a);var x={getInverseMatrix:function getInverseMatrix(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=getTransformMatrixString(t),i=strToMatrixArray(r);return n.removeTranslation&&(i[0][2]=i[1][2]=0),N.inv(N.matrix(i))},transformPoint:function transformPoint(t,n){var r=function pointToVector(t){var n=t.x,r=t.y;return N.matrix([[n],[r],[1]])}(t),i=N.multiply(n,r);return{x:i.get([0,0]),y:i.get([1,0])}}};function DragDropPrivate(t,n){this.pub=t,this.opts=n}o.a.extend(DragDropPrivate.prototype,c.a.Events,{EVENT:{APPENDED_ITEM:"appended-item",NOTIFY_CUSTOM_DROP:"notify-custom-drop",HIT_ORIGIN:"hit-origin",INITIALIZED:"initialized",MOVED_ITEM_AWAY:"moved-item-away"},MOVE_THROTTLE_TIME:100,initialize:function initialize(){o.a.defaults(this.opts,this.pub.defaults),this.applyBehaviours(),this.jqueryize(),this.applyClasses(),this.dragulize(),this.listenToDragula(),this.listenToInterface(),this.on(this.EVENT.MOVED_ITEM_AWAY,this.onMovedAway),this.trigger(this.EVENT.INITIALIZED)},applyBehaviours:function applyBehaviours(){this.behaviours=new d.Collection(C,{prv:this,pub:this.pub,opts:this.opts})},applyClasses:function applyClasses(){var t=this.pub,n=this.opts;this.$zones.addClass(t.CLASS.ZONE),n.list||n.container.classList.add(this.pub.CLASS.NON_LIST)},jqueryize:function jqueryize(){var t=this.pub;this.$origin=u()(this.opts.origin),this.$zones=u()(this.opts.zones),this.$draggables=u()(this.opts.draggables),this.$dropzones=this.$zones.not(this.$origin).not(this.$origin.find(this.opts.zones)),this.$container=t.$container=u()(this.opts.container)},dragulize:function dragulize(){var t=this,n=this.opts;this.drake=f()(n.zones,{mirrorContainer:n.container,copy:this.canCopy.bind(this),accepts:this.canAccept.bind(this),transformMatrix:x,invalid:function invalid(n){return!t.$draggables.is(n)&&!t.$draggables.find(n).length||n.hasAttribute("disabled")}})},canAccept:function canAccept(t,n,r){return(!n||!n.hasAttribute("disabled"))&&o.a.every(this.behaviours.aggregate("isDroppable",t,n,r))},canCopy:function canCopy(t,n){return!!this.behaviours.callIfActive("duplicateItems","isInOrigin",n)},listenToDragula:function listenToDragula(){var t=this,n=this.pub,r=this.drake,i=!1;r.on("drag",(function(t,r){var i=o()(getDraggableAttributes(t)).assign({isActive:!0,isPointerDragAction:!0,isBeingAppendedToNewZone:!1});n.trigger(n.EVENT.DRAG_START,t,r),n.trigger(n.EVENT.ACTIVATED_ITEM,t,i)})).on("move",o.a.throttle((function handleMove(r,i,o){t.isDragging()&&n.trigger(n.EVENT.MOVED,r,i,o)}),this.MOVE_THROTTLE_TIME)).on("dragend",(function(t){var r=o()(getDraggableAttributes(t)).assign({isActive:!1,isPointerDragAction:!0,isBeingAppendedToNewZone:!1});t&&(t.classList.remove(n.CLASS.DRAG_SHADOW,n.CLASS.DRAG_MIRROR),n.trigger(n.EVENT.DEACTIVATED_ITEM,t,r)),n.trigger(n.EVENT.DRAG_END,t),i=!1})).on("over",(function(t,r){n.trigger(n.EVENT.OVER_DROP_ZONE,r)})).on("out",(function(t,r){n.trigger(n.EVENT.LEFT_DROP_ZONE,r)})).on("drop",(function(n,o,a){i?r.cancel(!0):t.triggerAppendEvents(n,o,a)})).on("cloned",(function(t,r,i){t.classList.add(n.CLASS.DRAG_MIRROR),n.trigger(n.EVENT.CLONED,t,r,i)})).on("cancel",(function(t,r,o){i||n.trigger(n.EVENT.DRAG_CANCEL,t,r,o)})).on("shadow",(function(t,r){t.classList.add(n.CLASS.DRAG_SHADOW),n.trigger(n.EVENT.SHADOW,t,r)})),this.on(this.EVENT.NOTIFY_CUSTOM_DROP,(function(t){i=t}))},listenToInterface:function listenToInterface(){var t=this,n=this.drake,r=this.pub;r.on(r.EVENT.SET_DISABLED,this.setDisabled,this),r.on(r.EVENT.REMOVE,this.remove,this),r.on(r.EVENT.CLEAR,(function(){n.cancel()})),r.on(r.EVENT.CHANGE_DRAGGABLES,(function(n){t.$draggables=u()(n)}))},isDragging:function isDragging(){return this.drake&&this.drake.dragging},triggerAppendEvents:function triggerAppendEvents(t,n,r){var i=this,a=this.pub;this.opts;if(n){this.trigger(this.EVENT.APPENDED_ITEM,t,n);var c=o()(n.childNodes).filter((function(t){return i.$draggables.is(t)})),l={containerIndex:this.$dropzones.index(n),sourceIndex:this.$dropzones.index(r),keys:o()(c).map((function(t){return t.dataset.key}))};a.trigger(a.EVENT.CHANGED,t,n,r,l)}},onMovedAway:function onMovedAway(t,n){var r=this.pub,i=this.$dropzones.index(n);r.trigger(r.EVENT.MOVED_AWAY,t,n,i)},setDisabled:function setDisabled(t,n){var r=!!t||null,i=this.behaviours.aggregate("disabledProps",r),o=n?u()(n):this.$zones.add(this.$draggables);i.disabled=r,o.attr(i)},remove:function remove(){this.behaviours.callAll("remove"),this.drake.destroy(),this.off(),this.pub.off(),this.$container=this.$origin=this.$zones=this.$draggables=this.pub=this.opts=null}});var k=DragDropPrivate;function DragDrop(t){var n=new k(this,t);this.uid=o.a.uniqueId("lrn-dragdrop-"),n.initialize()}o.a.extend(DragDrop.prototype,c.a.Events,{EVENT:{ACTIVATED_ITEM:"activated-item",AUTO_MOVE:"auto-move",CHANGED:"changed",CHANGE_DRAGGABLES:"change-draggables",CLEAR:"clear",CLONING:"cloning",CLONED:"cloned",DEACTIVATED_ITEM:"deactivated-item",DRAG_START:"drag-start",DRAG_CANCEL:"drag-cancel",DRAG_END:"drag-end",OVER_DROP_ZONE:"over-drop-zone",LEFT_DROP_ZONE:"left-drop-zone",MOVED:"moved",MOVED_AWAY:"moved-away",SET_DISABLED:"set-disabled",SHADOW:"shadow",REMOVE:"remove"},CLASS:{ACTIVE:"lrn_active",DRAGGABLE:"lrn_draggable",DRAG_SHADOW:"lrn_drag_shadow",DRAG_MIRROR:"lrn_drag_mirror",DROPPABLE:"lrn_droppable",DROPZONE:"lrn_dropzone",HIGHLIGHT:"lrn_highlight",IGNORE_TAP:"lrn_dragdrop_ignore_tap",NON_LIST:"lrn_non_list",OVER:"lrn_over",ZONE:"lrn_dragdrop"},defaults:{preventMathjaxDuplication:!0,copy:!1,keyboardAndClickInteraction:!0,applyAriaAttributes:!0,applyOverHighlightDropzoneClasses:!0,maxItems:null,enforceMaxItemsInOrigin:!1,scrollable:!0,groupingResponses:!1,list:!1,swapInlineAndBlock:!1},changeDraggables:function changeDraggables(t){this.trigger(this.EVENT.CHANGE_DRAGGABLES,t)},clear:function clear(){this.trigger(this.EVENT.CLEAR)},disable:function disable(t){this.trigger(this.EVENT.SET_DISABLED,!0,t)},enable:function enable(t){this.trigger(this.EVENT.SET_DISABLED,!1,t)},move:function move(t,n,r){this.trigger(this.EVENT.AUTO_MOVE,t,n,r)},remove:function remove(){this.trigger(this.EVENT.REMOVE)}});n.a=DragDrop},206:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(131),u=r(129),p=r(21);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(MaskableElement,t);var n=_createSuper(MaskableElement);function MaskableElement(){var t;_classCallCheck(this,MaskableElement);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"maskId",o.a.uniqueId()),_defineProperty(_assertThisInitialized(t),"state",{renderComplete:!1}),_defineProperty(_assertThisInitialized(t),"buttonRef",(function(n){var r=t.props.buttonRef;t.button=n,r&&r(n)})),_defineProperty(_assertThisInitialized(t),"onToggleMasking",(function(){var n=t.props,r=n.baseActions,i=n.onChange,o=t.hasMask();i&&i(!o),r.toggleComponentMask(t.maskId)})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(MaskableElement,[{key:"componentDidMount",value:function componentDidMount(){this.setState({renderComplete:!0})}},{key:"hasMask",value:function hasMask(){var t=this.props.base.maskIds;return o.a.contains(t,this.maskId)}},{key:"generateAriaLabel",value:function generateAriaLabel(){var t=this.props,n=t.base,r=t.ariaLabel,i=n.inMaskingState,o=n.i18n.labels.masking;return r&&i?(this.hasMask()?o.ariaLabelUnmask:o.ariaLabelMask)+" - "+r:null}},{key:"render",value:function render(){var t=this,n=this.props,r=n.hidden,i=n.base,o=n.draggable,a=i.inMaskingState,l=i.disabled,u=this.state.renderComplete,p=this.hasMask(),f=!r&&(p||a),d=o&&a,h=l?void 0:this.onToggleMasking;if(!f)return null;var v=function(){if(p&&u){var n=t.button,r=n.clientWidth,i=n.clientHeight;return t.generateMask(r,i)}return null}(),y=!a||void 0;return c.a.createElement("button",{type:"button",className:"lrn-mask",onClick:h,onTouchEnd:d?h:null,disabled:!a,ref:this.buttonRef,"aria-label":this.generateAriaLabel(),"aria-hidden":y},v)}},{key:"generateMask",value:function generateMask(t,n){for(var r=t+n,i=[],o=15;o<r;o+=15)i.push(c.a.createElement("line",{key:o,className:"lrn-line1",x1:"0",y1:o,x2:o,y2:"0"}));return(c.a.createElement("svg",{className:"lrn-mask",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"transparent"}),i))}}]),MaskableElement}(c.a.Component);f=u.b((function(t){return{base:t.base}}),(function(t){return{baseActions:l.b(p.a,t)}}))(f),n.a=f},218:function(t,n,r){"use strict";r.d(n,"a",(function(){return withNonUpdatable}));var i=r(127),o=r.n(i);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function withNonUpdatable(t){var n=!1;return(function(r){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(_class,r);var i=_createSuper(_class);function _class(){return _classCallCheck(this,_class),i.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(_class,[{key:"componentDidMount",value:function componentDidMount(){n=!0}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!n}},{key:"render",value:function render(){return o.a.createElement(t,this.props)}}]),_class}(o.a.Component))}},225:function(t,n,r){"use strict";var i=r(127),o=r.n(i),a=r(206),c=r(193),l=r(231);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(MaskableDraggableResponse,t);var n=_createSuper(MaskableDraggableResponse);function MaskableDraggableResponse(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,MaskableDraggableResponse),(r=n.call(this,t)).state={},r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(MaskableDraggableResponse,[{key:"componentDidUpdate",value:function componentDidUpdate(t){if(this.props.inMaskingState!==t.inMaskingState){var n=this.button;n&&n.querySelectorAll("svg.lrn-mask").length?this.setState({disabled:!0}):(delete this.state.disabled,this.setState(this.state))}}},{key:"render",value:function render(){var t=this,n=this.props,r=n.children,i=n.isInPossibilityList;return o.a.createElement(c.a,_extends({},this.props,this.state),r,o.a.createElement(a.a,{hidden:!i,buttonRef:function buttonRef(n){return t.button=n}}))}}]),MaskableDraggableResponse}(o.a.Component);n.a=Object(l.a)(u)},231:function(t,n,r){"use strict";r.d(n,"a",(function(){return withMathCachingResponse}));var i=r(127),o=r.n(i),a=r(17),c=r.n(a);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function withMathCachingResponse(t){return function(n){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ResponseWithMathCaching,n);var r=_createSuper(ResponseWithMathCaching);function ResponseWithMathCaching(){var t;_classCallCheck(this,ResponseWithMathCaching);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(i))),"MATH_SELECTOR",".lrn_math_renderer_processed, .MathJax[id^=MathJax-Element-]"),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ResponseWithMathCaching,[{key:"componentDidMount",value:function componentDidMount(){if(!this.item)throw new Error("withMathCachingResponse HoC expects the wrapped component to implement mathItemRef")}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){var n=t.cacheRenderedMath;n&&n!==this.props.cacheRenderedMath&&n(this.getMathForCache())}},{key:"hasMath",value:function hasMath(){return!!this.item.querySelectorAll(this.MATH_SELECTOR).length}},{key:"getSanitisedHtml",value:function getSanitisedHtml(){var t=this.item.innerHTML.replace(/<script(.+?)\/script>/g,"");return c.a.sanitizeHTML(t)}},{key:"getMathForCache",value:function getMathForCache(){var t=this.props.response,n=t.index,r=t.plainText;if(this.hasMath())return{html:this.getSanitisedHtml(),latex:r,index:n}}},{key:"render",value:function render(){var n=this;return(o.a.createElement(t,_extends({mathItemRef:function mathItemRef(t){return n.item=t}},this.props)))}}]),ResponseWithMathCaching}(o.a.Component)}},232:function(t,n,r){"use strict";r.d(n,"a",(function(){return withDragDropWrapper}));var i=r(0),o=r.n(i),a=r(1),c=r.n(a),l=r(127),u=r.n(l),p=r(204);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=function(t){_inherits(DragDropWrapper,t);var n=_createSuper(DragDropWrapper);function DragDropWrapper(){var t;_classCallCheck(this,DragDropWrapper);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"classes",o.a.extend({DRAGGABLE:"lrn_draggable",ORIGIN:"lrn_possibilityList"},p.a.prototype.CLASS)),t}return _createClass(DragDropWrapper,[{key:"componentDidMount",value:function componentDidMount(){var t=this;o.a.isFunction(this.props.onDragDropMount)?this.props.onDragDropMount((function(){return t.initDragDrop()})):this.initDragDrop()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.dragDrop&&(this.dragDrop.off().remove(),delete this.dragDrop)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.dragDrop&&this.updateDraggables()}},{key:"initDragDrop",value:function initDragDrop(){if(!this.props.disabled){var t=this.props,n=this.classes,r=this.refs,i=c()(r.container);this.dragDrop=new p.a({container:i[0],draggables:i.find(".".concat(n.DRAGGABLE)).get(),zones:i.find(".".concat(n.ZONE)).get(),origin:i.find(".".concat(n.ORIGIN))[0],copy:t.copy,maxItems:t.maxItems,groupingResponses:t.groupingResponses,list:t.list,applyOverHighlightDropzoneClasses:t.applyOverHighlightDropzoneClasses}),this.listenForChanges(),this.listenForInteraction(),this.listenForClones()}}},{key:"listenForChanges",value:function listenForChanges(){var t=this.props,n=this.classes,r=t.handlers,i=this.refs.container.querySelector(".".concat(n.ORIGIN)),o=null;this.dragDrop.on(p.a.prototype.EVENT.CHANGED,(function(n,a,c,l){var u=i&&i.contains(c),p=i&&i.contains(a),f=n.dataset.key,d={responseIndex:parseInt(n.dataset.responseIndex),elIndex:l.keys.indexOf(f),containerIndex:l.containerIndex,sourceIndex:l.sourceIndex,keys:l.keys,removedItemKey:o,key:f};t.copy&&u&&!p?n.parentNode&&n.parentNode.removeChild(n):a!==c&&c.appendChild(n),r.onChange(d),o=null})),this.dragDrop.on(p.a.prototype.EVENT.MOVED_AWAY,(function(t,n,r){o=t.dataset.key,n.appendChild(t)})),r.onToggle&&(this.dragDrop.on(p.a.prototype.EVENT.ACTIVATED_ITEM,r.onToggle),this.dragDrop.on(p.a.prototype.EVENT.DEACTIVATED_ITEM,r.onToggle))}},{key:"listenForClones",value:function listenForClones(){this.dragDrop.on(p.a.prototype.EVENT.CLONED,(function(t,n,r){"copy"===r&&delete t.dataset.key}))}},{key:"listenForInteraction",value:function listenForInteraction(){var t=this.props.handlers;this.dragDrop.on(p.a.prototype.EVENT.ACTIVATED_ITEM,(function(){t.onInteraction()}))}},{key:"updateDraggables",value:function updateDraggables(){var t=this.classes,n=this.refs,r=c()(n.container).find(".".concat(t.ZONE," .").concat(t.DRAGGABLE)).get();this.dragDrop.changeDraggables(r)}},{key:"render",value:function render(){return u.a.createElement("div",{className:"lrn-dragdrop-container",ref:"container"},this.props.children)}}]),DragDropWrapper}(u.a.Component);function withDragDropWrapper(t){return function(n){_inherits(ComponentWrappedWithDragDrop,n);var r=_createSuper(ComponentWrappedWithDragDrop);function ComponentWrappedWithDragDrop(){return _classCallCheck(this,ComponentWrappedWithDragDrop),r.apply(this,arguments)}return _createClass(ComponentWrappedWithDragDrop,[{key:"wrapperProps",get:function get(){var t=this.props;return{copy:t.canDuplicateResponses,disabled:t.disabled,maxItems:t.maxResponsePerCell,groupingResponses:t.usingPossibleGroupingResponses,handlers:t.dragDropHandlers,list:!!t.list,applyOverHighlightDropzoneClasses:!t.list,onDragDropMount:t.onDragDropMount}}},{key:"render",value:function render(){var n=this.props,r=this.wrapperProps;return(u.a.createElement(f,r,u.a.createElement(t,n)))}}]),ComponentWrappedWithDragDrop}(u.a.Component)}},238:function(t,n,r){"use strict";r.d(n,"a",(function(){return PossibilityListWrapper})),r.d(n,"c",(function(){return isHorizontalList})),r.d(n,"b",(function(){return y}));var i=r(0),o=r.n(i),a=r(127),c=r.n(a),l=r(128),u=r.n(l),p=r(224),f=r(193),d=r(218);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(PossibilityList,t);var n=_createSuper(PossibilityList);function PossibilityList(){var t;_classCallCheck(this,PossibilityList);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"buildPossibleResponsesGroup",(function(n){var r=n.title,i=n.index,a=n.responses;return(c.a.createElement("div",{key:i,className:"lrn_possible_responses_group"},c.a.createElement("div",{className:"lrn_group_label"},r),c.a.createElement("div",{className:"lrn_dragdrop","data-lrn-response-group":i},o.a.map(a,t.buildPossibleResponse))))})),_defineProperty(_assertThisInitialized(t),"buildPossibleResponse",(function(n){var r=_assertThisInitialized(t).Possibility;return(c.a.createElement(r,_extends({isInPossibilityList:!0,key:n.key,response:n},t.props)))})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(PossibilityList,[{key:"render",value:function render(){var t=this.props,n=t.usingPossibleGroupingResponses,r=t.extraClasses,i=t.i18nLabels,a=n?this.buildPossibleResponsesGroup:this.buildPossibleResponse,l=u()({lrn_dragdrop:!n},r),p=this.props.hasActiveResponse?"button":"region";return c.a.createElement("div",_extends({className:"lrn_possibilityList ".concat(l),"aria-label":i.ariaLabel.dragDrop.possibleResponses,"aria-roledescription":i.ariaLabel.dragDrop.responseZone,role:p},{}),o.a.map(this.getPossibleResponsesToBuild(),a))}},{key:"Possibility",get:function get(){return this.props.Possibility||f.a}},{key:"getPossibleResponsesToBuild",value:function getPossibleResponsesToBuild(){var t=this.props,n=t.usingPossibleGroupingResponses,r=t.canDuplicateResponses,i=t.possibleResponseCollection,a=t.selectedResponses;if(r)return i;var c=o.a.pluck(o.a.flatten(a),"index"),l=function filterSelectedResponses(t){return o.a.filter(t,(function(t){var n=t.index;return!o.a.contains(c,n)}))};return n?o.a.map(i,(function(t){return o.a.extend({},t,{responses:l(t.responses)})})):l(i)}}]),PossibilityList}(a.Component),v=Object(d.a)(h);function getPossibilityList(t){return t.nonUpdatablePossibilityList?c.a.createElement(v,t):c.a.createElement(h,t)}function PossibilityListContainer(t){var n=t.possibilityListPosition,r=t.getPossibilityListContainerRef;return(c.a.createElement("div",{ref:r,className:"lrn_possibilityListContainer lrn_list_".concat(n)},getPossibilityList(t)))}function PossibilityListWrapper(t){var n=t.possibilityListPosition,r=t.children,i=function getPossibilityWrapperContent(t){var n=t.possibilityListPosition;return t.useContainer?c.a.createElement(PossibilityListContainer,t):getPossibilityList(o.a.assign({extraClasses:"lrn_list_".concat(n)},t))}(o()(t).omit("children")),a="left"===n||"top"===n,l=u()({lrn_horizontal_list:isHorizontalList(t)},"lrn_response_innerbody");return c.a.createElement("div",{className:l},a&&i,r,!a&&i)}function isHorizontalList(t){var n=t.possibilityListPosition;return"left"===n||"right"===n}var y=Object(p.c)({nonUpdatablePossibilityList:!0})(PossibilityListWrapper)},328:function(t,n,r){"use strict";var i=r(0),o=r.n(i),a=r(10),c=r(35);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=["exactMatch","partialMatch","partialMatchElement","partialMatchV2","partialMatchElementV2"],u=function isEmptyValidResponse(t){var n=!1;return o.a.map(t,(function(t){o.a.isEmpty(t)||(n=!0)})),o.a.isEmpty(t)||!n},p=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ClassificationScorer,t);var n=_createSuper(ClassificationScorer);function ClassificationScorer(){return _classCallCheck(this,ClassificationScorer),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ClassificationScorer,[{key:"detailedValidatedResponses",value:function detailedValidatedResponses(){return this.scoringData.detailedValidatedResponses}},{key:"reset",value:function reset(t){var n=JSON.stringify(t);if(this.serializedData!==n){try{this.scoringData=function getScoringData(t){var n=t.question.validation,r=[];if(!function canValidateResponse(t){if(!1===o.a.getNested(t,"validation.automarkable"))return!1;var n=t.validation||t||{};return!o.a.isEmpty(n)&&(o.a.isArray(n.valid_responses)||o.a.isObject(n.valid_response)&&!u(n.valid_response.value))}(t.question))return{automarkable:!1};if(t.response=t.response||{},n&&n.scoring_type){if(!o.a.contains(l,n.scoring_type))throw new a.a.InvalidScoringTypeException(t.question.type,n.scoring_type);return n.valid_response&&r.push(n.valid_response),n.alt_responses&&(r=r.concat(n.alt_responses)),function processResponsesCurrentScoringFormat(t,n){var r,i,c,l,u,p,f=t.question.validation||{},d=t.response.value||[],h=f.scoring_type,v=Math.abs(o.a.isNumber(f.penalty)?f.penalty:0),y=f.rounding||"floor",g={};o.a.each(n,(function(t){var n=o.a.isUndefined(t.score)?1:t.score,a=o.a.map(t.value,(function(t){return o.a.without(t,null)})),c={partialMatchScore:0,partialMatchElementScore:0,responses:[],cellsValid:[],possibleScore:n},u=o.a.flatten(a).length*n,p=a.length*n,f=0,y=0;o.a.each(d,(function(t,r){var i=o.a.sortBy(o.a.clone(a[r]||[])),l=!0;c.responses[r]=[],o.a.each(t,(function(t){var a,u=!0;(a=o.a.indexOf(i,t,!0))>-1?(i.splice(a,1),c.partialMatchElementScore+=n):(l=!1,u=!1,c.partialMatchElementScore-=v),c.responses[r].push(u)})),l=l&&0===i.length,c.partialMatchScore+=l?n:-1*v,c.cellsValid.push(l)}));var m=c.cellsValid,b=c.partialMatchElementScore,_=c.partialMatchScore;if("exactMatch"===h){var E=o.a.isUndefined(l),O=b===u&&o.a.all(o.a.flatten(m))&&o.a.all(o.a.flatten(c.responses)),C=E||b>g.partialMatchElementScore;O&&(E||n>r||C&&n===r)?(l=t,(g=c).isValid=!0,r=n):(E||C&&!g.isValid)&&(l=t,g=c,r=-1*v),f=n}o.a.contains(["partialMatch","partialMatchV2","partialMatchElement","partialMatchElementV2"],h)&&("partialMatch"===h&&(y=_,f=p),"partialMatchV2"===h&&(y=0===p?0:_/p*n,f=n),"partialMatchElement"===h&&(y=_,f=u),"partialMatchElementV2"===h&&(y=0===u?0:b/u*n,f=n),(o.a.isUndefined(r)||y>r)&&(g=c,l=t,r=y)),(o.a.isUndefined(i)||f>i)&&(i=f)})),d.length&&("exactMatch"===h&&(g.isValid?(c=g.possibleScore,u=!0):(c=-1*v,u=!1),p=g.responses),"partialMatchV2"!==h&&"partialMatch"!==h||(c=r,"partialMatchV2"===h&&(c=a.a.round(c,y)),u=o.a.any(o.a.flatten(g.responses)),p=g.cellsValid),"partialMatchElementV2"!==h&&"partialMatchElement"!==h||(c=g.partialMatchElementScore,"partialMatchElementV2"===h&&(c=a.a.round(r,y)),u=o.a.any(o.a.flatten(g.responses)),p=g.responses));return{maxScore:i,score:a.a.generateScore({allowNegative:t.question.validation.allow_negative_scores,rawScore:c,maxScore:i}),scoreWithFullPenalty:a.a.generateScore({allowNegative:!0,rawScore:c,maxScore:i}),detailedValidatedResponses:g.responses,isValid:u,responsesValid:p,suggestedResponse:l}}(t,r)}return function processLegacyResponsesPre2140(t){var n,r,i,a,c=t.question.validation||{},l=t.response.value||[],u=c.valid_responses,p=c.partial_scoring||"element",f=o.a.isNumber(c.valid_score)?c.valid_score:1,d=Math.abs(o.a.isNumber(c.penalty_score)?c.penalty_score:0),h=0;return o.a.each(u,(function(t){var u=[],v=0,y=!0,g=0,m=0;o.a.each(l,(function(n,r){if(n){var i=o.a.clone(t[r]),a=0,c=0;u[r]=[],o.a.each(n,(function(t){o.a.contains(i,t)||(c-=d,u[r].push(!1)),o.a.each(i,(function(n,o){n===t&&("cell"===p?a++:v++,i.splice(o,1),c+=f,u[r].push(!0))}))})),"cell"===p&&(a===t[r].length&&a===n.length?u[r]=!0:u[r]=!1,t[r].length*f!==c&&(c=0)),g+=c}else u[r]=void 0})),o.a.each(t,(function(t){m+=t.length*f})),o.a.isUndefined(c.partial_scoring)&&m!==g&&(g=0),m>h&&(h=m),c.partial_scoring||v===o.a.flatten(t).length||(y=!1),l.length&&(o.a.isUndefined(r)||v>r)&&(n=u,i=g,a=y),r=v})),{score:i,responsesValid:n,maxScore:h,isValid:a}}(t=a.a.normalizeParameters(t))}(JSON.parse(JSON.stringify(t))),a.a.normalizeScores(this.scoringData,t)}catch(t){this.scoringData={error:t}}this.serializedData=n}return this}}]),ClassificationScorer}(c.a);n.a=p},329:function(t,n,r){"use strict";r.d(n,"a",(function(){return enhanceWithPossibleResponseGroup}));var i=r(0),o=r.n(i),a=r(17),c=r.n(a),l=r(156),u=r(158),p=function isMath(t){return/^\\\(.*\\\)$/gi.test(t)};function enhanceWithPossibleResponseGroup(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=o.a.defaults(n,{defaultShowDragHandle:!0}),o.a.extend(t,{generateResponseKey:function generateResponseKey(){return o.a.uniqueId("k")}}),Object(u.a)(t,{shuffleService:function shuffleService(){return this._shuffleService||(this._shuffleService=new l.a(t.model)),this._shuffleService},usingPossibleGroupingResponses:function usingPossibleGroupingResponses(){return!!t.question.group_possible_responses},possibleResponseGroups:function possibleResponseGroups(){var n=this;if(o.a.isUndefined(t.data.possibleResponseGroups)){var r=t.shuffleService,i=-1;t.data.possibleResponseGroups=o.a.map(t.question.possible_response_groups,(function(t,a){var l=t.title,u=t.responses;return u=o.a.map(u,(function(t){return{value:t,index:++i}})),{index:a,title:o.a.isString(l)?c.a.stripHTML(c.a.createImageDescriptions(l),!0):"",responses:o.a.map(r.getOrderedData(u),(function(t){var r=c.a.sanitizeHTML(t.value);return{groupIndex:a,value:r,index:t.index,defaultValue:t.value,plainText:c.a.stripHTML(c.a.createImageDescriptions(t.value),!0),isMath:p(r),key:n.generateResponseKey()}}))}}))}return t.data.possibleResponseGroups},possibleResponses:function possibleResponses(){var n=this;if(o.a.isUndefined(t.data.possibleResponses)){var possibleResponses=o.a.map(t.question.possible_responses,(function(t,n){return{value:t,index:n}})),r=t.shuffleService.getOrderedData(possibleResponses);t.data.possibleResponses=o.a.map(r,(function(t){var r=c.a.sanitizeHTML(t.value);return{value:r,index:t.index,defaultValue:t.value,plainText:c.a.stripHTML(c.a.createImageDescriptions(t.value),!0),isMath:p(r),key:n.generateResponseKey()}}))}return t.data.possibleResponses},possibleResponseCollection:function possibleResponseCollection(){if(o.a.isUndefined(t.data.possibleResponseCollection)){var r,i=o.a.getNested(t.question,"ui_style.show_drag_handle"),a=o.a.isBoolean(i)?i:n.defaultShowDragHandle,c=!!o.a.getNested(t.question,"ui_style.transparent_possible_responses");r=t.usingPossibleGroupingResponses?o.a.map(t.possibleResponseGroups,(function(t){return o.a.each(t.responses,(function(t){t.transparent=c,t.showDragHandler=a})),t})):o.a.map(t.possibleResponses,(function(t){return t.transparent=c,t.showDragHandler=a,t})),t.data.possibleResponseCollection=r}return t.data.possibleResponseCollection},possibilityListPosition:function possibilityListPosition(){return o.a.isUndefined(t.data.possibilityListPosition)&&(t.data.possibilityListPosition=o.a.getNested(t.question,"ui_style.possibility_list_position")||"bottom"),t.data.possibilityListPosition},possibilityListWidth:function possibilityListWidth(){if(o.a.isUndefined(t.data.possibilityListWidth)){var possibilityListWidth=String(o.a.getNested(t.question,"ui_style.possibility_list_width")),n="auto"===possibilityListWidth;if(!possibilityListWidth||isNaN(parseFloat(possibilityListWidth)))possibilityListWidth="auto";else if(!n){var r=-1!==possibilityListWidth.indexOf("%"),i=-1!==possibilityListWidth.indexOf("px");if(r||!r&&!i){var a=parseInt(possibilityListWidth,10);possibilityListWidth=a>0&&a<100?"".concat(a,"%"):"auto"}}t.data.possibilityListWidth=possibilityListWidth}return t.data.possibilityListWidth},allPossibleResponses:function allPossibleResponses(){if(o.a.isUndefined(t.data.allPossibleResponses)){var n=this.usingPossibleGroupingResponses,r=this.possibleResponseCollection;t.data.allPossibleResponses=(i=r,n&&(i=o.a.flatten(o.a.pluck(r,"responses"))),o()(i).map((function(t){return o()(t).omit("key")})))}var i;return t.data.allPossibleResponses},canDuplicateResponses:function canDuplicateResponses(){return!!t.question.duplicate_responses}})}},83:function(t,n,r){"use strict";r.r(n);var i=r(0),o=r.n(i),a=r(52),c=r(319),l=r(328),u=a.a.extend({processResponseValue:function processResponseValue(t){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").value=t},getScorerClass:function getScorerClass(){return l.a},getMappableResponses:function getMappableResponses(){var t=this.get("question"),n=t.group_possible_responses?o.a.flatten(o.a.pluck(t.possible_response_groups,"responses")):t.possible_responses,r=a.a.prototype.getMappableResponses.call(this),i=o.a.flatten(r);return o.a.map(n,(function(t,n){return i.includes(n)?t:null}))},getMappableValidation:function getMappableValidation(){var t=a.a.prototype.getMappableResponses.call(this),n=this.detailedValidatedResponses(),r=this.getMappableResponses();return!!t&&r.map((function(r,i){return t.some((function(t,r){var o=t&&t.indexOf(i);return o>=0&&(n[r]&&n[r][o])}))}))},getMostCorrectValidResponse:function getMostCorrectValidResponse(){return!!this.canValidateResponse()&&this.getValidResponse().value},getPartialScoring:function getPartialScoring(){var t=this.get("question").validation;if(t){if(!t.scoring_type)return t.hasOwnProperty("partial_scoring")?t.partial_scoring:"element";if("exactMatch"===t.scoring_type)return!1;if("partialMatchElement"===t.scoring_type||"partialMatchElementV2"===t.scoring_type)return"element"}return"cell"},validateResponse:function validateResponse(){return this.getScorer().validateIndividualResponses()},detailedValidatedResponses:function detailedValidatedResponses(){return this.getScorer().detailedValidatedResponses()}});o.a.extend(u.prototype,c.a);var p=u,f=r(177),d=r(127),h=r.n(d),v=r(131),y=r(129),g=r(23),m=r(21),b={CLASSIFICATION_CHANGE_RESPONSE:"classification:changeResponse"};var _={actionTypes:b,changeResponse:function changeResponse(t){return function(n,r){n(g.a.clearValidationUI()),n({type:b.CLASSIFICATION_CHANGE_RESPONSE,payload:t});var i=r().classification.selectedResponses,a=o.a.map(i,(function(t){return t.length?o.a.pluck(t,"index"):null}));n(m.a.updateResponseValue(a))}}},E=r(224),O=r(225),C=r(133),S=r(17),R=r.n(S),T=r(138),P=r(128),w=r.n(P);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function getEndClass(t,n){return w()({lrn_first:0===t,lrn_last:t+1===n})}function CorrectAnswerResponseIndex(t){var n=t.containerIndex,r=t.validationStemNumeration;return(h.a.createElement("span",{className:"lrn_responseIndex"},Object(T.a)(r,n)))}function ClassificationCell(t){var n=t.containerIndex,r=t.columnIndex,i=t.columnWidth,a=t.selectedResponses,c=t.columnCount,l=t.validatedResponses,u=t.partialScoring,p=t.isShowingCorrectAnswers,f=t.validationStemNumeration,d=l||[],v=d.byResponse,y=d.byCell,g=y&&y[n],m=a[n],b=v?v[n]:[],_=getEndClass(r,c);return"cell"===u&&o.a.isBoolean(g)&&(_+=g?" lrn_correct":" lrn_incorrect"),h.a.createElement("td",{style:{width:i},role:"region",className:"lrn_response_container lrn_dropzone lrn_dragdrop ".concat(_),"data-inputid":n,"aria-label":generateCellAriaLabel(t)},p&&h.a.createElement(CorrectAnswerResponseIndex,{validationStemNumeration:f,containerIndex:n}),function table_responses(t,n,r){var i=n.length>1;return o()(n).map((function(n,a){return n=o.a.extend({},n,{validated:r[a]}),h.a.createElement(O.a,_extends({hasSiblings:i,key:n.key,response:n},t))}))}(t,m,b))}function ClassificationRow(t){var n=t.columnCount,r=t.rowCount,i=t.rowIndex,a=t.rowTitles,c=t.rowMinHeight,l=(t.rowHeader,t.rowTitlesWidth),u=i*n,p=[];return o()(n).times((function(n){p.push(h.a.createElement(ClassificationCell,_extends({key:n,columnIndex:n,containerIndex:u+n},t)))})),h.a.createElement("tr",{style:{height:c},className:getEndClass(i,r)},a&&h.a.createElement("th",{className:"lrn_row_title",style:{width:l},dangerouslySetInnerHTML:{__html:a[i]||""}}),p)}function ColumnTitle(t){var n=t.title,r=t.width;return(h.a.createElement("th",{className:"lrn_column_title",scope:"col",style:{width:r},dangerouslySetInnerHTML:{__html:n}}))}function ClassificationThead(t){var n=t.columnTitles,r=t.columnWidth,i=t.rowTitles,a=t.rowTitlesWidth,c=t.rowHeader;return(h.a.createElement("thead",null,h.a.createElement("tr",null,i&&h.a.createElement("th",{className:"lrn_column_title",scope:"col",style:{width:a},dangerouslySetInnerHTML:{__html:c}}),o()(n).map((function(t,n){return h.a.createElement(ColumnTitle,{key:n,title:t,width:r})})))))}function generateCellAriaLabel(t){var n=t.columnIndex,r=t.columnTitles,i=t.i18n,a=t.rowIndex,c=t.rowTitles,l=o.a.exists(c)&&c[a]?" (".concat(c[a],")"):"",u=o.a.exists(r)&&r[n]?" (".concat(r[n],")"):"",p=o.a.getNested(i,"labels.ariaLabel.classification.cell");return Object(C.a)(p||"",{row:a+1+l,column:n+1+u})}var I=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ClassificationTable,t);var n=_createSuper(ClassificationTable);function ClassificationTable(){return _classCallCheck(this,ClassificationTable),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ClassificationTable,[{key:"render",value:function render(){var t=this.props,n=t.columnTitles,r=t.rowTitles;return(h.a.createElement("table",{className:"lrn_response_input",role:"group"},(n||r)&&h.a.createElement(ClassificationThead,this.props),h.a.createElement("tbody",null,function classificationRows(t){var n=t.rowCount;return o()(n).times((function(n){return h.a.createElement(ClassificationRow,_extends({key:n,rowIndex:n},t))}))}(this.props))))}}]),ClassificationTable}(h.a.Component),A=r(232),D=r(238);function responseArea_typeof(t){return(responseArea_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function responseArea_extends(){return(responseArea_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function responseArea_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function responseArea_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function responseArea_setPrototypeOf(t,n){return(responseArea_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function responseArea_createSuper(t){var n=function responseArea_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=responseArea_getPrototypeOf(t);if(n){var o=responseArea_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return responseArea_possibleConstructorReturn(this,r)}}function responseArea_possibleConstructorReturn(t,n){if(n&&("object"===responseArea_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function responseArea_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function responseArea_getPrototypeOf(t){return(responseArea_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function responseArea_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&responseArea_setPrototypeOf(t,n)}(ClassificationResponseAreaPlain,t);var n=responseArea_createSuper(ClassificationResponseAreaPlain);function ClassificationResponseAreaPlain(){return responseArea_classCallCheck(this,ClassificationResponseAreaPlain),n.apply(this,arguments)}return function responseArea_createClass(t,n,r){return n&&responseArea_defineProperties(t.prototype,n),r&&responseArea_defineProperties(t,r),t}(ClassificationResponseAreaPlain,[{key:"getTable",value:function getTable(){return h.a.createElement(I,this.props)}},{key:"getWrappedTable",value:function getWrappedTable(){return h.a.createElement("div",{className:"lrn_response_input_position"},this.getTable())}},{key:"getContent",value:function getContent(){return Object(D.c)(this.props)?this.getWrappedTable():this.getTable()}},{key:"render",value:function render(){var t=this.props;return(h.a.createElement(D.a,responseArea_extends({Possibility:O.a,i18nLabels:t.i18n.labels},t),this.getContent()))}}]),ClassificationResponseAreaPlain}(h.a.Component),x=Object(A.a)(N),k=Object(E.b)((function(t){var n=t.classification,r=t.base,i=t.validatable,a=t.dragDropHandlers,c=t.hasActiveResponse;return o.a.extend(o()(r).pick("readOnly","isReviewState","isPreviewState","i18n","disabled","inMaskingState","cacheRenderedMath"),o()(i).pick("isShowingCorrectAnswers","validationState","validatedResponses","validationStemNumeration"),n,{dragDropHandlers:a,hasActiveResponse:c})}))(x),M=r(179);r(1),r(5);function classificationSuggestedResponses(){var t=this,n=this.props,r=n.validatable,i=n.base,a=r.suggestedResponses;return o()(a.value).map((function(n,r){return h.a.createElement("li",{key:r},t.getResponseIndex(r),h.a.createElement("span",{className:"lrn_responseText"},o.a.isEmpty(n)?h.a.createElement("span",{className:"lrn_btn lrn_empty_correct_answer lrn_disabled",dangerouslySetInnerHTML:{__html:i.i18n.labels.noCorrectAnswersSet}}):function correctResponsesInCell(t){return o()(t).map((function(t,n){return h.a.createElement("span",{key:n,"aria-label":t.plainText,className:"lrn_btn lrn_disabled",dangerouslySetInnerHTML:{__html:t.value}})}))}(n)))}))}var L=r(130),V=r.n(L);function classification_typeof(t){return(classification_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function classification_extends(){return(classification_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function classification_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function classification_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function classification_setPrototypeOf(t,n){return(classification_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function classification_createSuper(t){var n=function classification_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=classification_getPrototypeOf(t);if(n){var o=classification_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return classification_possibleConstructorReturn(this,r)}}function classification_possibleConstructorReturn(t,n){if(n&&("object"===classification_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return classification_assertThisInitialized(t)}function classification_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function classification_getPrototypeOf(t){return(classification_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var j=M.a.ValidatableQuestion,z=M.a.SuggestedAnswersList,W=M.a.ResponseInput,B=function(t){!function classification_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&classification_setPrototypeOf(t,n)}(ClassificationDumb,t);var n=classification_createSuper(ClassificationDumb);function ClassificationDumb(){var t;classification_classCallCheck(this,ClassificationDumb);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _defineProperty(classification_assertThisInitialized(t=n.call.apply(n,[this].concat(i))),"state",{hasActiveResponse:!1}),_defineProperty(classification_assertThisInitialized(t),"dragDropHandlers",{onChange:function onChange(n){t.props.classificationActions.changeResponse(n),t.restoreFocus(n)},onInteraction:function onInteraction(){t.props.validatableActions.clearValidationUI()},onToggle:function onToggle(n){var r=t.state.hasActiveResponse;t.setState({hasActiveResponse:!r})}}),t}return function classification_createClass(t,n,r){return n&&classification_defineProperties(t.prototype,n),r&&classification_defineProperties(t,r),t}(ClassificationDumb,[{key:"render",value:function render(){var t=this.props,n=t.validatable,r=t.base.i18n.labels.ariaLabel;return h.a.createElement(j,{validatable:n},h.a.createElement("div",{className:"sr-only"},r.classification.instructions),h.a.createElement(W,{options:{className:"lrn-response-validation-wrapper lrn_response_input_wrapper"},validatable:n},h.a.createElement(k,classification_extends({hasActiveResponse:this.state.hasActiveResponse,dragDropHandlers:this.dragDropHandlers},this.props))),h.a.createElement(z,{customListItems:classificationSuggestedResponses}))}},{key:"restoreFocus",value:function restoreFocus(t){var n,r=t.responseIndex,i=t.containerIndex;(n=i<0?V.a.findDOMNode(this).querySelector(".lrn_possibilityList").querySelector('.lrn_btn_drag[data-index="'.concat(r,'"]')):V.a.findDOMNode(this).querySelector('.lrn_dropzone[data-inputid="'.concat(i,'"]')).querySelector('.lrn_btn_drag[data-index="'.concat(r,'"]')))&&o.a.isFunction(n.focus)&&n.focus()}}]),ClassificationDumb}(h.a.Component),H=y.b((function(t){return{base:t.base,validatable:t.validatable,classification:t.classification}}),(function(t){return{classificationActions:v.b(_,t),validatableActions:v.b(g.a,t)}}))(B),F=r(56),G=r(329),U=r(135);function dataService_typeof(t){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dataService_defineProperties(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _get(t,n,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,n,r){var i=function _superPropBase(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=dataService_getPrototypeOf(t)););return t}(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(t,n,r||t)}function dataService_setPrototypeOf(t,n){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function dataService_createSuper(t){var n=function dataService_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,i=dataService_getPrototypeOf(t);if(n){var o=dataService_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return dataService_possibleConstructorReturn(this,r)}}function dataService_possibleConstructorReturn(t,n){if(n&&("object"===dataService_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return dataService_assertThisInitialized(t)}function dataService_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dataService_getPrototypeOf(t){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dataService_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var $,q=function(t){!function dataService_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&dataService_setPrototypeOf(t,n)}(ClassificationDataService,t);var n=dataService_createSuper(ClassificationDataService);function ClassificationDataService(t,r){var i;return function dataService_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,ClassificationDataService),dataService_defineProperty(dataService_assertThisInitialized(i=n.call(this,t,r)),"COLUMN_WIDTH_MAX_PERCENTAGE",96),dataService_defineProperty(dataService_assertThisInitialized(i),"DEFAULTS",{ROW_TITLE_WIDTH:"60px",ROW_MIN_HEIGHT:"60px"}),Object(G.a)(dataService_assertThisInitialized(i)),i}return function dataService_createClass(t,n,r){return n&&dataService_defineProperties(t.prototype,n),r&&dataService_defineProperties(t,r),t}(ClassificationDataService,[{key:"getInitialState",value:function getInitialState(){var t=_get(dataService_getPrototypeOf(ClassificationDataService.prototype),"getInitialState",this).call(this);return o.a.extend(t,{classification:{columnCount:this.columnCount,columnTitles:this.columnTitles,columnWidth:this.columnWidth,canDuplicateResponses:this.canDuplicateResponses,usingPossibleGroupingResponses:this.usingPossibleGroupingResponses,maxResponsePerCell:this.maxResponsePerCell,rowCount:this.rowCount,rowTitles:this.rowTitles,rowMinHeight:this.rowMinHeight,rowHeader:this.rowHeader,rowTitlesWidth:this.rowTitlesWidth,partialScoring:this.partialScoring,possibleResponses:this.possibleResponses,allPossibleResponses:this.getAllPossibleResponses(),possibilityListPosition:this.possibilityListPosition,selectedResponses:this.selectedResponses,possibleResponseCollection:this.possibleResponseCollection}})}},{key:"getAllPossibleResponses",value:function getAllPossibleResponses(){var t=this.activity.get("disable_spokenmath_distractors");return this.data.allResponsesHasSpokenMath||(o()(this.allPossibleResponses).each((function(n){var r=n.isMath,i=n.defaultValue;r&&(n.plainText=U.a.getText(i,!0,t))})),this.data.allResponsesHasSpokenMath=!0),this.allPossibleResponses}},{key:"getValidatedResponses",value:function getValidatedResponses(){var t=this.model,n={byResponse:t.detailedValidatedResponses()};return"cell"===this.partialScoring&&(n.byCell=t.validateResponse()),n}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var t=this.allPossibleResponses,n=o.a.deepClone(_get(dataService_getPrototypeOf(ClassificationDataService.prototype),"getSuggestedResponses",this).call(this));if("exactMatch"!==o.a.getNested(this.get("question"),"validation.scoring_type")){var r=o.a.flatten(n.value),i=this.getValidatedResponses()&&o.a.flatten(this.getValidatedResponses().byResponse);if(i.length===r.length&&i.every((function(t){return!1!==t})))return null}return n.value=o()(n.value).map((function(n){return o.a.chain(n).filter(o.a.exists).map((function(n){return o.a.clone(o.a.findWhere(t,{index:n}))})).value()})),n}},{key:"getResponseValue",value:function getResponseValue(){var t=this.model.getResponseValue(),n=this.rowCount*this.columnCount;return o.a.isArray(t)&&t.length===n?t:o()(n).times((function(){return null}))}},{key:"getAriaLiveMessage",value:function getAriaLiveMessage(t){var n=this.columnTitles,r=this.rowTitles,i=this.rowCount,a=this.columnCount,c=this.selectedResponses,l=this.getValidatedResponses().byResponse,u=this.activity.get("i18n").labels.ariaLiveText.classification,p=0,f="";return o.a.times(i,(function(t){o.a.times(a,(function(i){var a=c[p],d=l[p];a.length&&(f+=(r&&r[t]||Object(C.a)(u.row,{number:t+1}))+". ",f+=(n&&n[i]||Object(C.a)(u.column,{number:i+1}))+". "),o.a.each(a,(function(t,n){f+=t.plainText+(d[n]?" - ".concat(u.correct,". "):" - ".concat(u.incorrect,". "))})),p++}))})),f}},{key:"columnCount",get:function get(){if(o.a.isUndefined(this.data.columnCount)){var t=this.question,n=1;t.ui_style&&o.a.isNumber(t.ui_style.column_count)&&(n=t.ui_style.column_count),this.data.columnCount=n}return this.data.columnCount}},{key:"columnTitles",get:function get(){if(o.a.isUndefined(this.data.columnTitles)){var t=this.question,n=null;t.ui_style&&o.a.isArray(t.ui_style.column_titles)&&(n=[],o()(this.columnCount).times((function(r){n.push(R.a.sanitizeHTML(t.ui_style.column_titles[r]||""))}))),this.data.columnTitles=n}return this.data.columnTitles}},{key:"columnWidth",get:function get(){return o.a.isUndefined(this.data.columnWidth)&&(this.data.columnWidth="".concat(this.COLUMN_WIDTH_MAX_PERCENTAGE/this.columnCount,"%")),this.data.columnWidth}},{key:"rowCount",get:function get(){if(o.a.isUndefined(this.data.rowCount)){var t=this.question,n=1;t.ui_style&&o.a.isNumber(t.ui_style.row_count)&&(n=t.ui_style.row_count),this.data.rowCount=n}return this.data.rowCount}},{key:"rowTitles",get:function get(){if(o.a.isUndefined(this.data.rowTitles)){var t=this.question,n=null;t.ui_style&&o.a.isArray(t.ui_style.row_titles)&&(n=[],o()(this.rowCount).times((function(r){n.push(R.a.sanitizeHTML(t.ui_style.row_titles[r]||""))}))),this.data.rowTitles=n}return this.data.rowTitles}},{key:"rowMinHeight",get:function get(){if(o.a.isUndefined(this.data.rowMinHeight)){var t=o.a.getNested(this.question,"ui_style.row_min_height");this.data.rowMinHeight=t||this.DEFAULTS.ROW_MIN_HEIGHT}return this.data.rowMinHeight}},{key:"rowHeader",get:function get(){return o.a.isUndefined(this.data.rowHeader)&&(this.data.rowHeader=o.a.getNested(this.question,"ui_style.row_header")),this.data.rowHeader}},{key:"rowTitlesWidth",get:function get(){if(o.a.isUndefined(this.data.rowTitlesWidth)){var t=o.a.getNested(this.question,"ui_style.row_titles_width");this.data.rowTitlesWidth=t||this.DEFAULTS.ROW_TITLE_WIDTH}return this.data.rowTitlesWidth}},{key:"maxResponsePerCell",get:function get(){return o.a.isUndefined(this.data.maxResponsePerCell)&&(this.data.maxResponsePerCell=this.question.max_response_per_cell||null),this.data.maxResponsePerCell}},{key:"selectedResponses",get:function get(){var t=this,n=this.allPossibleResponses;return o.a.map(this.getResponseValue(),(function(r){return o.a.map(r,(function(r){var i=o.a.findWhere(n,{index:r}),a=t.generateResponseKey();return o.a.extend({key:a},i)}))}))}},{key:"partialScoring",get:function get(){return o.a.isUndefined(this.data.partialScoring)&&(this.data.partialScoring=this.model.getPartialScoring()),this.data.partialScoring}}]),ClassificationDataService}(F.a),K=r(25);function reducer_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function removeResponseByKey(t,n,r){t[n]=o.a.filter(t[n],(function(t){return t.key!==r}))}var Y=(reducer_defineProperty($={},_.actionTypes.CLASSIFICATION_CHANGE_RESPONSE,(function(t,n){var r=t.selectedResponses,i=t.allPossibleResponses,a=n.key,c=n.responseIndex,l=n.elIndex,u=n.containerIndex,p=n.sourceIndex,f=n.removedItemKey;return o()(r).each((function(t,n){if(n===p&&removeResponseByKey(r,n,a),n===u){var d=o.a.findWhere(i,{index:c});f&&removeResponseByKey(r,n,f),r[n].splice(l,0,o.a.extend({},d,{key:a||o.a.uniqueId("k")}))}})),{selectedResponses:r}})),reducer_defineProperty($,m.a.actionTypes.QUESTION_CACHE_RENDERED_MATH,(function(t,n){var r,i=t.allPossibleResponses,a=t.possibleResponseCollection,c=t.usingPossibleGroupingResponses,l=n.mathInResponse,u=l.index,p=l.html,f=o()(i).findWhere({index:u});return r=c?o.a.chain(a).pluck("responses").flatten().findWhere({index:u}).value():o()(a).findWhere({index:u}),f.value=r.value=p,{allPossibleResponses:i,possibleResponseCollection:a}})),$),Q=Object(K.a)(Y,{selectedResponses:[],allPossibleResponses:[]}),Z=f.a.extend({maskable:!0,ViewComponent:H,DataService:q,getReducers:function getReducers(){var t=f.a.prototype.getReducers.apply(this,arguments);return o.a.extend(t,{classification:Q})}});n.default={View:Z,Model:p}}}]);